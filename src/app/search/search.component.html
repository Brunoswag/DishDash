<div class="search-header">
  <!-- Left section with title and toggle -->
  <div class="d-flex align-items-center">
    <button
      class="btn btn-outline-secondary me-2"
      type="button"
      (click)="toggleNav()"
      aria-label="Toggle navigation"
    >
      <i class="bi bi-list"></i>
    </button>
    <a routerLink="/" class="text-decoration-none text-dark">
      <span class="fw-bold fs-5">DishDash</span>
    </a>
  </div>

  <!-- Center section with search -->
  <div class="col-6">
    <form class="d-flex" role="search">
      <div class="searchContainer">
        <input
          class="form-control me-2 search-bar container-contents"
          type="search"
          placeholder="Search"
          aria-label="Search"
          [formControl]="searchControl"
        />

        <div class="dropdown">
          <button
            class="btn btn-outline-secondary dropdown-toggle container-contents"
            type="button"
            id="filterDropdown"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <i class="bi bi-funnel"></i>
          </button>
          <ul
            class="dropdown-menu dropdown-menu-end p-3"
            style="min-width: 200px"
            aria-labelledby="filterDropdown"
          >
            <li>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  (change)="onFilterDate($event)"
                  value=""
                  id="filter1"
                />
                <label class="form-check-label" for="filter1"
                  >Filter by Date</label
                >
              </div>
            </li>
            <li>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  (change)="onFilterCategory($event)"
                  value=""
                  id="filter2"
                />
                <label class="form-check-label" for="filter2"
                  >Filter by Category</label
                >
              </div>
            </li>
          </ul>
        </div>
      </div>
    </form>
  </div>

  <!-- Right section with profile -->
  <div class="profile">
    <div *ngIf="user" class="dropdown">
      <a
        class="nav-link d-flex align-items-center gap-2"
        role="button"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        <img
          [src]="getProfilePicture()"
          [alt]="user.username + '\'s profile picture'"
          class="profile-img"
        />
        <span>{{ user.username }}</span>
      </a>

      <ul class="dropdown-menu dropdown-menu-end profile-dropdown">
        <!-- Header -->
        <li class="dropdown-header">
          <div class="d-flex align-items-center gap-2 p-2">
            <img
              [src]="getProfilePicture()"
              [alt]="user.username"
              class="profile-img"
            />
            <span class="fw-bold">{{ user.username }}</span>
          </div>
        </li>
        <li>
          <a
            class="dropdown-item d-flex align-items-center gap-2"
            (click)="navigateToProfile()"
          >
            <i class="bi bi-person"></i>
            My Profile
          </a>
        </li>
        <li>
          <a
            class="dropdown-item d-flex align-items-center gap-2"
            routerLink="/new-recipe"
          >
            <i class="bi bi-plus-square"></i>
            New Recipe
          </a>
        </li>

        <!-- First Separator -->
        <li><hr class="dropdown-divider" /></li>

        <!-- Recipe Links -->
        <li>
          <a
            class="dropdown-item d-flex align-items-center gap-2"
            routerLink="/saved"
          >
            <i class="bi bi-bookmark"></i>
            Saved Recipes
          </a>
        </li>
        <li>
          <a
            class="dropdown-item d-flex align-items-center gap-2"
            routerLink="/liked"
          >
            <i class="bi bi-heart"></i>
            Liked Recipes
          </a>
        </li>

        <!-- Second Separator -->
        <li><hr class="dropdown-divider" /></li>

        <!-- Appearance and Settings -->
        <li>
          <a class="dropdown-item d-flex align-items-center gap-2" href="#">
            <i class="bi bi-palette"></i>
            Appearance
            <i class="bi bi-chevron-right ms-auto"></i>
          </a>
        </li>
        <li>
          <a
            class="dropdown-item d-flex align-items-center gap-2"
            routerLink="/settings"
          >
            <i class="bi bi-gear"></i>
            Settings
          </a>
        </li>
        <li>
          <a
            class="dropdown-item d-flex align-items-center gap-2"
            (click)="signOut()"
          >
            <i class="bi bi-box-arrow-right"></i>
            Sign Out
          </a>
        </li>
      </ul>
    </div>

    <div *ngIf="!user">
      <a routerLink="/login" class="nav-link d-flex align-items-center gap-2">
        <img
          src="assets/default-avatar.png"
          alt="Default profile picture"
          class="profile-img"
        />
        <span>Login</span>
      </a>
    </div>
  </div>
</div>
