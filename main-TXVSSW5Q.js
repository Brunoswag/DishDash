var W1=Object.defineProperty,K1=Object.defineProperties;var Q1=Object.getOwnPropertyDescriptors;var UC=Object.getOwnPropertySymbols,Y1=Object.getPrototypeOf,Z1=Object.prototype.hasOwnProperty,J1=Object.prototype.propertyIsEnumerable,X1=Reflect.get;var jC=(n,e,t)=>e in n?W1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||={})Z1.call(e,t)&&jC(n,t,e[t]);if(UC)for(var t of UC(e))J1.call(e,t)&&jC(n,t,e[t]);return n},ie=(n,e)=>K1(n,Q1(e));var Oi=(n,e,t)=>X1(Y1(n),t,e);var y=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function Dm(n,e){return Object.is(n,e)}var wt=null,pd=!1,Tm=1,Mn=Symbol("SIGNAL");function fe(n){let e=wt;return wt=n,e}function Sm(){return wt}var jc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Bc(n){if(pd)throw new Error("");if(wt===null)return;wt.consumerOnSignalRead(n);let e=wt.nextProducerIndex++;if(yd(wt),e<wt.producerNode.length&&wt.producerNode[e]!==n&&Uc(wt)){let t=wt.producerNode[e];vd(t,wt.producerIndexOfThis[e])}wt.producerNode[e]!==n&&(wt.producerNode[e]=n,wt.producerIndexOfThis[e]=Uc(wt)?$C(n,wt,e):0),wt.producerLastReadVersion[e]=n.version}function BC(){Tm++}function Am(n){if(!(Uc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Tm)){if(!n.producerMustRecompute(n)&&!Nm(n)){Cm(n);return}n.producerRecomputeValue(n),Cm(n)}}function Rm(n){if(n.liveConsumerNode===void 0)return;let e=pd;pd=!0;try{for(let t of n.liveConsumerNode)t.dirty||eF(t)}finally{pd=e}}function Mm(){return wt?.consumerAllowSignalWrites!==!1}function eF(n){n.dirty=!0,Rm(n),n.consumerMarkedDirty?.(n)}function Cm(n){n.dirty=!1,n.lastCleanEpoch=Tm}function md(n){return n&&(n.nextProducerIndex=0),fe(n)}function xm(n,e){if(fe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Uc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)vd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Nm(n){yd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Am(t),r!==t.version))return!0}return!1}function Pm(n){if(yd(n),Uc(n))for(let e=0;e<n.producerNode.length;e++)vd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function $C(n,e,t){if(HC(n),n.liveConsumerNode.length===0&&zC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=$C(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function vd(n,e){if(HC(n),n.liveConsumerNode.length===1&&zC(n))for(let r=0;r<n.producerNode.length;r++)vd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];yd(i),i.producerIndexOfThis[r]=e}}function Uc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function yd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function HC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function zC(n){return n.producerNode!==void 0}function km(n,e){let t=Object.create(tF);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Am(t),Bc(t),t.value===gd)throw t.error;return t.value};return r[Mn]=t,r}var Em=Symbol("UNSET"),bm=Symbol("COMPUTING"),gd=Symbol("ERRORED"),tF=ie(U({},jc),{value:Em,dirty:!0,error:null,equal:Dm,kind:"computed",producerMustRecompute(n){return n.value===Em||n.value===bm},producerRecomputeValue(n){if(n.value===bm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=bm;let t=md(n),r,i=!1;try{r=n.computation(),fe(null),i=e!==Em&&e!==gd&&r!==gd&&n.equal(e,r)}catch(o){r=gd,n.error=o}finally{xm(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function nF(){throw new Error}var qC=nF;function GC(n){qC(n)}function Om(n){qC=n}var rF=null;function Fm(n,e){let t=Object.create(_d);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Bc(t),t.value);return r[Mn]=t,r}function $c(n,e){Mm()||GC(n),n.equal(n.value,e)||(n.value=e,iF(n))}function Lm(n,e){Mm()||GC(n),$c(n,e(n.value))}var _d=ie(U({},jc),{equal:Dm,value:void 0,kind:"signal"});function iF(n){n.version++,BC(),Rm(n),rF?.()}function Vm(n){let e=fe(null);try{return n()}finally{fe(e)}}var Um;function Hc(){return Um}function Jr(n){let e=Um;return Um=n,e}var wd=Symbol("NotFound");function ce(n){return typeof n=="function"}function ks(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Id=ks(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ro(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var tt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(o){e=o instanceof Id?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{WC(o)}catch(s){e=e??[],s instanceof Id?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Id(e)}}add(e){var t;if(e&&e!==this)if(this.closed)WC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ro(t,e)}remove(e){let{_finalizers:t}=this;t&&Ro(t,e),e instanceof n&&e._removeParent(this)}};tt.EMPTY=(()=>{let n=new tt;return n.closed=!0,n})();var jm=tt.EMPTY;function Ed(n){return n instanceof tt||n&&"closed"in n&&ce(n.remove)&&ce(n.add)&&ce(n.unsubscribe)}function WC(n){ce(n)?n():n.unsubscribe()}var qn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Os={setTimeout(n,e,...t){let{delegate:r}=Os;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Os;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function bd(n){Os.setTimeout(()=>{let{onUnhandledError:e}=qn;if(e)e(n);else throw n})}function zc(){}var KC=Bm("C",void 0,void 0);function QC(n){return Bm("E",void 0,n)}function YC(n){return Bm("N",n,void 0)}function Bm(n,e,t){return{kind:n,value:e,error:t}}var Mo=null;function Fs(n){if(qn.useDeprecatedSynchronousErrorHandling){let e=!Mo;if(e&&(Mo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Mo;if(Mo=null,t)throw r}}else n()}function ZC(n){qn.useDeprecatedSynchronousErrorHandling&&Mo&&(Mo.errorThrown=!0,Mo.error=n)}var xo=class extends tt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ed(e)&&e.add(this)):this.destination=lF}static create(e,t,r){return new Ls(e,t,r)}next(e){this.isStopped?Hm(YC(e),this):this._next(e)}error(e){this.isStopped?Hm(QC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hm(KC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cF=Function.prototype.bind;function $m(n,e){return cF.call(n,e)}var zm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Cd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Cd(r)}else Cd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Cd(t)}}},Ls=class extends xo{constructor(e,t,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&qn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$m(e.next,o),error:e.error&&$m(e.error,o),complete:e.complete&&$m(e.complete,o)}):i=e}this.destination=new zm(i)}};function Cd(n){qn.useDeprecatedSynchronousErrorHandling?ZC(n):bd(n)}function uF(n){throw n}function Hm(n,e){let{onStoppedNotification:t}=qn;t&&Os.setTimeout(()=>t(n,e))}var lF={closed:!0,next:zc,error:uF,complete:zc};var Vs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wn(n){return n}function Dd(...n){return qm(n)}function qm(n){return n.length===0?wn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=hF(t)?t:new Ls(t,r,i);return Fs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=JC(r),new r((i,o)=>{let s=new Ls({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Vs](){return this}pipe(...t){return qm(t)(this)}toPromise(t){return t=JC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function JC(n){var e;return(e=n??qn.Promise)!==null&&e!==void 0?e:Promise}function dF(n){return n&&ce(n.next)&&ce(n.error)&&ce(n.complete)}function hF(n){return n&&n instanceof xo||dF(n)&&Ed(n)}function Gm(n){return ce(n?.lift)}function Ie(n){return e=>{if(Gm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new Wm(n,e,t,r,i)}var Wm=class extends xo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Us(){return Ie((n,e)=>{let t=null;n._refCount++;let r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var js=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Gm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tt;let t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tt.EMPTY)}return e}refCount(){return Us()(this)}};var XC=ks(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Td(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new XC}next(t){Fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?jm:(this.currentObservers=null,o.push(t),new tt(()=>{this.currentObservers=null,Ro(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new Td(e,t),n})(),Td=class extends at{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:jm}};var Ve=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Km={now(){return(Km.delegate||Date).now()},delegate:void 0};var Sd=class extends tt{constructor(e,t){super()}schedule(e,t=0){return this}};var qc={setInterval(n,e,...t){let{delegate:r}=qc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=qc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Bs=class extends Sd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return qc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&qc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ro(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var $s=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};$s.now=Km.now;var Hs=class extends $s{constructor(e,t=$s.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Gc=new Hs(Bs);var Ad=class extends Bs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Rd=class extends Hs{};var Qm=new Rd(Ad);var sn=new ye(n=>n.complete());function eD(n){return n&&ce(n.schedule)}function tD(n){return n[n.length-1]}function Md(n){return ce(tD(n))?n.pop():void 0}function Fi(n){return eD(tD(n))?n.pop():void 0}function Ym(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function rD(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function nD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function No(n){return this instanceof No?(this.v=n,this):new No(n)}function iD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(E){return Promise.resolve(E).then(v,p)}}function a(v,E){r[v]&&(i[v]=function(N){return new Promise(function(M,B){o.push([v,N,M,B])>1||u(v,N)})},E&&(i[v]=E(i[v])))}function u(v,E){try{l(r[v](E))}catch(N){m(o[0][3],N)}}function l(v){v.value instanceof No?Promise.resolve(v.value.v).then(h,p):m(o[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,E){v(E),o.shift(),o.length&&u(o[0][0],o[0][1])}}function oD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof nD=="function"?nD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var xd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Nd(n){return ce(n?.then)}function Pd(n){return ce(n[Vs])}function kd(n){return Symbol.asyncIterator&&ce(n?.[Symbol.asyncIterator])}function Od(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fd=fF();function Ld(n){return ce(n?.[Fd])}function Vd(n){return iD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield No(t.read());if(i)return yield No(void 0);yield yield No(r)}}finally{t.releaseLock()}})}function Ud(n){return ce(n?.getReader)}function ft(n){if(n instanceof ye)return n;if(n!=null){if(Pd(n))return pF(n);if(xd(n))return gF(n);if(Nd(n))return mF(n);if(kd(n))return sD(n);if(Ld(n))return vF(n);if(Ud(n))return yF(n)}throw Od(n)}function pF(n){return new ye(e=>{let t=n[Vs]();if(ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gF(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function mF(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,bd)})}function vF(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function sD(n){return new ye(e=>{_F(n,e).catch(t=>e.error(t))})}function yF(n){return sD(Vd(n))}function _F(n,e){var t,r,i,o;return rD(this,void 0,void 0,function*(){try{for(t=oD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function an(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Li(n,e=0){return Ie((t,r)=>{t.subscribe(_e(r,i=>an(r,n,()=>r.next(i),e),()=>an(r,n,()=>r.complete(),e),i=>an(r,n,()=>r.error(i),e)))})}function Vi(n,e=0){return Ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function aD(n,e){return ft(n).pipe(Vi(e),Li(e))}function cD(n,e){return ft(n).pipe(Vi(e),Li(e))}function uD(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function lD(n,e){return new ye(t=>{let r;return an(t,e,()=>{r=n[Fd](),an(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function jd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{an(t,e,()=>{let r=n[Symbol.asyncIterator]();an(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function dD(n,e){return jd(Vd(n),e)}function hD(n,e){if(n!=null){if(Pd(n))return aD(n,e);if(xd(n))return uD(n,e);if(Nd(n))return cD(n,e);if(kd(n))return jd(n,e);if(Ld(n))return lD(n,e);if(Ud(n))return dD(n,e)}throw Od(n)}function Ae(n,e){return e?hD(n,e):ft(n)}function Q(...n){let e=Fi(n);return Ae(n,e)}function zs(n,e){let t=ce(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function Zm(n){return!!n&&(n instanceof ye||ce(n.lift)&&ce(n.subscribe))}var Xr=ks(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function oe(n,e){return Ie((t,r)=>{let i=0;t.subscribe(_e(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:wF}=Array;function IF(n,e){return wF(e)?n(...e):n(e)}function Bd(n){return oe(e=>IF(n,e))}var{isArray:EF}=Array,{getPrototypeOf:bF,prototype:CF,keys:DF}=Object;function $d(n){if(n.length===1){let e=n[0];if(EF(e))return{args:e,keys:null};if(TF(e)){let t=DF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function TF(n){return n&&typeof n=="object"&&bF(n)===CF}function Hd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Po(...n){let e=Fi(n),t=Md(n),{args:r,keys:i}=$d(n);if(r.length===0)return Ae([],e);let o=new ye(SF(r,e,i?s=>Hd(i,s):wn));return t?o.pipe(Bd(t)):o}function SF(n,e,t=wn){return r=>{fD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)fD(e,()=>{let l=Ae(n[u],e),h=!1;l.subscribe(_e(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function fD(n,e,t){n?an(t,n,e):e()}function pD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?E(N):u.push(N),E=N=>{o&&e.next(N),l++;let M=!1;ft(t(N,h++)).subscribe(_e(e,B=>{i?.(B),o?v(B):e.next(B)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let B=u.shift();s?an(e,s,()=>E(B)):E(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(_e(e,v,()=>{p=!0,m()})),()=>{a?.()}}function ct(n,e,t=1/0){return ce(e)?ct((r,i)=>oe((o,s)=>e(r,o,i,s))(ft(n(r,i))),t):(typeof e=="number"&&(t=e),Ie((r,i)=>pD(r,i,n,t)))}function Ui(n=1/0){return ct(wn,n)}function gD(){return Ui(1)}function qs(...n){return gD()(Ae(n,Fi(n)))}function zd(n){return new ye(e=>{ft(n()).subscribe(e)})}function Jm(...n){let e=Md(n),{args:t,keys:r}=$d(n),i=new ye(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;ft(t[h]).subscribe(_e(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Hd(r,a):a),o.complete())}))}});return e?i.pipe(Bd(e)):i}function cn(n,e){return Ie((t,r)=>{let i=0;t.subscribe(_e(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Xt(n){return Ie((e,t)=>{let r=null,i=!1,o;r=e.subscribe(_e(t,void 0,void 0,s=>{o=ft(n(s,Xt(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function mD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(_e(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ji(n,e){return ce(e)?ct(n,e,1):ct(n,1)}function Xm(n,e=Gc){return Ie((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}t.subscribe(_e(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Bi(n){return Ie((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ei(n){return n<=0?()=>sn:Ie((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function qd(n=AF){return Ie((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function AF(){return new Xr}function Wc(n){return Ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function ti(n,e){let t=arguments.length>=2;return r=>r.pipe(n?cn((i,o)=>n(i,o,r)):wn,ei(1),t?Bi(e):qd(()=>new Xr))}function Gs(n){return n<=0?()=>sn:Ie((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ev(n,e){let t=arguments.length>=2;return r=>r.pipe(n?cn((i,o)=>n(i,o,r)):wn,Gs(1),t?Bi(e):qd(()=>new Xr))}function Gd(n,e){return Ie(mD(n,e,arguments.length>=2,!0))}function Wd(...n){let e=Fi(n);return Ie((t,r)=>{(e?qs(n,t,e):qs(n,t)).subscribe(r)})}function xn(n,e){return Ie((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(_e(r,u=>{i?.unsubscribe();let l=0,h=o++;ft(n(u,h)).subscribe(i=_e(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function tv(n){return Ie((e,t)=>{ft(n).subscribe(_e(t,()=>t.complete(),zc)),!t.closed&&e.subscribe(t)})}function Pt(n,e,t){let r=ce(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ie((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(_e(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wn}var iT="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",W=class extends Error{code;constructor(e,t){super(oT(e,t)),this.code=e}};function RF(n){return`NG0${Math.abs(n)}`}function oT(n,e){return`${RF(n)}${e?": "+e:""}`}var sT=Symbol("InputSignalNode#UNSET"),MF=ie(U({},_d),{transformFn:void 0,applyValueToInputSignal(n,e){$c(n,e)}});function aT(n,e){let t=Object.create(MF);t.value=n,t.transformFn=e?.transform;function r(){if(Bc(t),t.value===sT){let i=null;throw new W(-950,i)}return t.value}return r[Mn]=t,r}function uu(n){return{toString:n}.toString()}var Kd="__parameters__";function xF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function cT(n,e,t){return uu(()=>{let r=xF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Kd)?u[Kd]:Object.defineProperty(u,Kd,{value:[]})[Kd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Oo=globalThis;function Ue(n){for(let e in n)if(n[e]===Ue)return e;throw Error("Could not find renamed property on target object.")}function NF(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function dn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(dn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function vv(n,e){return n?e?`${n} ${e}`:n:e||""}var PF=Ue({__forward_ref__:Ue});function Yn(n){return n.__forward_ref__=Yn,n.toString=function(){return dn(this())},n}function en(n){return uT(n)?n():n}function uT(n){return typeof n=="function"&&n.hasOwnProperty(PF)&&n.__forward_ref__===Yn}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ir(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ah(n){return vD(n,dT)||vD(n,hT)}function lT(n){return Ah(n)!==null}function vD(n,e){return n.hasOwnProperty(e)?n[e]:null}function kF(n){let e=n&&(n[dT]||n[hT]);return e||null}function yD(n){return n&&(n.hasOwnProperty(_D)||n.hasOwnProperty(OF))?n[_D]:null}var dT=Ue({\u0275prov:Ue}),_D=Ue({\u0275inj:Ue}),hT=Ue({ngInjectableDef:Ue}),OF=Ue({ngInjectorDef:Ue}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fT(n){return n&&!!n.\u0275providers}var FF=Ue({\u0275cmp:Ue}),LF=Ue({\u0275dir:Ue}),VF=Ue({\u0275pipe:Ue}),UF=Ue({\u0275mod:Ue}),rh=Ue({\u0275fac:Ue}),Zc=Ue({__NG_ELEMENT_ID__:Ue}),wD=Ue({__NG_ENV_ID__:Ue});function Fo(n){return typeof n=="string"?n:n==null?"":String(n)}function jF(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Fo(n)}function pT(n,e){throw new W(-200,n)}function _y(n,e){throw new W(-201,!1)}var pe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pe||{}),yv;function gT(){return yv}function un(n){let e=yv;return yv=n,e}function mT(n,e,t){let r=Ah(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&pe.Optional)return null;if(e!==void 0)return e;_y(n,"Injector")}var BF={},Lo=BF,_v="__NG_DI_FLAG__",ih=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?wd:Lo,r)}},oh="ngTempTokenPath",$F="ngTokenPath",HF=/\n/gm,zF="\u0275",ID="__source";function qF(n,e=pe.Default){if(Hc()===void 0)throw new W(-203,!1);if(Hc()===null)return mT(n,void 0,e);{let t=Hc(),r;return t instanceof ih?r=t.injector:r=t,r.get(n,e&pe.Optional?null:void 0,e)}}function Z(n,e=pe.Default){return(gT()||qF)(en(n),e)}function F(n,e=pe.Default){return Z(n,Rh(e))}function Rh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function wv(n){let e=[];for(let t=0;t<n.length;t++){let r=en(n[t]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,o=pe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=GF(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(Z(i,o))}else e.push(Z(r))}return e}function vT(n,e){return n[_v]=e,n.prototype[_v]=e,n}function GF(n){return n[_v]}function WF(n,e,t,r){let i=n[oh];throw e[ID]&&i.unshift(e[ID]),n.message=KF(`
`+n.message,i,t,r),n[$F]=i,n[oh]=null,n}function KF(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==zF?n.slice(2):n;let i=dn(e);if(Array.isArray(e))i=e.map(dn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):dn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(HF,`
  `)}`}var Ct=vT(cT("Optional"),8);var QF=vT(cT("SkipSelf"),4);function Uo(n,e){let t=n.hasOwnProperty(rh);return t?n[rh]:null}function YF(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function ZF(n){return n.flat(Number.POSITIVE_INFINITY)}function wy(n,e){n.forEach(t=>Array.isArray(t)?wy(t,e):e(t))}function yT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function sh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function JF(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Iy(n,e,t){let r=lu(n,e);return r>=0?n[r|1]=t:(r=~r,JF(n,r,e,t)),r}function nv(n,e){let t=lu(n,e);if(t>=0)return n[t|1]}function lu(n,e){return XF(n,e,1)}function XF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var jo={},ln=[],Jc=new z(""),_T=new z("",-1),wT=new z(""),ah=class{get(e,t=Lo){if(t===Lo){let r=new Error(`NullInjectorError: No provider for ${dn(e)}!`);throw r.name="NullInjectorError",r}return t}};function IT(n,e){let t=n[UF]||null;if(!t&&e===!0)throw new Error(`Type ${dn(n)} does not have '\u0275mod' property.`);return t}function Bo(n){return n[FF]||null}function eL(n){return n[LF]||null}function tL(n){return n[VF]||null}function kn(n){return{\u0275providers:n}}function nL(...n){return{\u0275providers:ET(!0,n),\u0275fromNgModule:!0}}function ET(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return wy(e,s=>{let a=s;Iv(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&bT(i,o),t}function bT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ey(i,o=>{e(o,r)})}}function Iv(n,e,t,r){if(n=en(n),!n)return!1;let i=null,o=yD(n),s=!o&&Bo(n);if(!o&&!s){let u=n.ngModule;if(o=yD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Iv(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{wy(o.imports,h=>{Iv(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&bT(l,e)}if(!a){let l=Uo(i)||(()=>new i);e({provide:i,useFactory:l,deps:ln},i),e({provide:wT,useValue:i,multi:!0},i),e({provide:Jc,useValue:()=>Z(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Ey(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Ey(n,e){for(let t of n)fT(t)&&(t=t.\u0275providers),Array.isArray(t)?Ey(t,e):e(t)}var rL=Ue({provide:String,useValue:Ue});function CT(n){return n!==null&&typeof n=="object"&&rL in n}function iL(n){return!!(n&&n.useExisting)}function oL(n){return!!(n&&n.useFactory)}function Xs(n){return typeof n=="function"}function sL(n){return!!n.useClass}var Mh=new z(""),Zd={},ED={},rv;function by(){return rv===void 0&&(rv=new ah),rv}var Bt=class{},Xc=class extends Bt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,bv(e,s=>this.processProvider(s)),this.records.set(_T,Ws(void 0,this)),i.has("environment")&&this.records.set(Bt,Ws(void 0,this));let o=this.records.get(Mh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(wT,ln,pe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?wd:Lo,r)}destroy(){Qc(this),this._destroyed=!0;let e=fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fe(e)}}onDestroy(e){return Qc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Qc(this);let t=Jr(this),r=un(void 0),i;try{return e()}finally{Jr(t),un(r)}}get(e,t=Lo,r=pe.Default){if(Qc(this),e.hasOwnProperty(wD))return e[wD](this);r=Rh(r);let i,o=Jr(this),s=un(void 0);try{if(!(r&pe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=dL(e)&&Ah(e);l&&this.injectableDefInScope(l)?u=Ws(Ev(e),Zd):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&pe.Self?by():this.parent;return t=r&pe.Optional&&t===Lo?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[oh]=a[oh]||[]).unshift(dn(e)),o)throw a;return WF(a,e,"R3InjectorError",this.source)}else throw a}finally{un(s),Jr(o)}}resolveInjectorInitializers(){let e=fe(null),t=Jr(this),r=un(void 0),i;try{let o=this.get(Jc,ln,pe.Self);for(let s of o)s()}finally{Jr(t),un(r),fe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(dn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=en(e);let t=Xs(e)?e:en(e&&e.provide),r=cL(e);if(!Xs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ws(void 0,Zd,!0),i.factory=()=>wv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=fe(null);try{return t.value===ED?pT(dn(e)):t.value===Zd&&(t.value=ED,t.value=t.factory()),typeof t.value=="object"&&t.value&&lL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{fe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=en(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ev(n){let e=Ah(n),t=e!==null?e.factory:Uo(n);if(t!==null)return t;if(n instanceof z)throw new W(204,!1);if(n instanceof Function)return aL(n);throw new W(204,!1)}function aL(n){if(n.length>0)throw new W(204,!1);let t=kF(n);return t!==null?()=>t.factory(n):()=>new n}function cL(n){if(CT(n))return Ws(void 0,n.useValue);{let e=DT(n);return Ws(e,Zd)}}function DT(n,e,t){let r;if(Xs(n)){let i=en(n);return Uo(i)||Ev(i)}else if(CT(n))r=()=>en(n.useValue);else if(oL(n))r=()=>n.useFactory(...wv(n.deps||[]));else if(iL(n))r=()=>Z(en(n.useExisting));else{let i=en(n&&(n.useClass||n.provide));if(uL(n))r=()=>new i(...wv(n.deps));else return Uo(i)||Ev(i)}return r}function Qc(n){if(n.destroyed)throw new W(205,!1)}function Ws(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function uL(n){return!!n.deps}function lL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function dL(n){return typeof n=="function"||typeof n=="object"&&n instanceof z}function bv(n,e){for(let t of n)Array.isArray(t)?bv(t,e):t&&fT(t)?bv(t.\u0275providers,e):e(t)}function Ht(n,e){let t;n instanceof Xc?(Qc(n),t=n):t=new ih(n);let r,i=Jr(t),o=un(void 0);try{return e()}finally{Jr(i),un(o)}}function TT(){return gT()!==void 0||Hc()!=null}function Cy(n){if(!TT())throw new W(-203,!1)}function hL(n){return typeof n=="function"}var oi=0,ue=1,se=2,$t=3,Kn=4,Zn=5,eu=6,ch=7,It=8,ea=9,ni=10,pt=11,tu=12,bD=13,aa=14,Qn=15,$o=16,Ks=17,ri=18,xh=19,ST=20,$i=21,iv=22,uh=23,Nn=24,Zs=25,tn=26,AT=1;var Ho=7,lh=8,ta=9,jt=10;function Hi(n){return Array.isArray(n)&&typeof n[AT]=="object"}function si(n){return Array.isArray(n)&&n[AT]===!0}function RT(n){return(n.flags&4)!==0}function ca(n){return n.componentOffset>-1}function Dy(n){return(n.flags&1)===1}function mr(n){return!!n.template}function dh(n){return(n[se]&512)!==0}function du(n){return(n[se]&256)===256}var Cv=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function MT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Jn=(()=>{let n=()=>xT;return n.ngInherit=!0,n})();function xT(n){return n.type.prototype.ngOnChanges&&(n.setInput=pL),fL}function fL(){let n=PT(this),e=n?.current;if(e){let t=n.previous;if(t===jo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function pL(n,e,t,r,i){let o=this.declaredInputs[r],s=PT(n)||gL(n,{previous:jo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Cv(l&&l.currentValue,t,u===jo),MT(n,e,i,t)}var NT="__ngSimpleChanges__";function PT(n){return n[NT]||null}function gL(n,e){return n[NT]=e}var CD=null;var Oe=function(n,e=null,t){CD?.(n,e,t)},mL="svg",vL="math";function vr(n){for(;Array.isArray(n);)n=n[oi];return n}function kT(n,e){return vr(e[n])}function Er(n,e){return vr(e[n.index])}function Ty(n,e){return n.data[e]}function OT(n,e){return n[e]}function yr(n,e){let t=e[n];return Hi(t)?t:t[oi]}function yL(n){return(n[se]&4)===4}function Sy(n){return(n[se]&128)===128}function _L(n){return si(n[$t])}function na(n,e){return e==null?null:n[e]}function FT(n){n[Ks]=0}function LT(n){n[se]&1024||(n[se]|=1024,Sy(n)&&hu(n))}function wL(n,e){for(;n>0;)e=e[aa],n--;return e}function Nh(n){return!!(n[se]&9216||n[Nn]?.dirty)}function Dv(n){n[ni].changeDetectionScheduler?.notify(8),n[se]&64&&(n[se]|=1024),Nh(n)&&hu(n)}function hu(n){n[ni].changeDetectionScheduler?.notify(0);let e=zo(n);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Sy(e)));)e=zo(e)}function VT(n,e){if(du(n))throw new W(911,!1);n[$i]===null&&(n[$i]=[]),n[$i].push(e)}function IL(n,e){if(n[$i]===null)return;let t=n[$i].indexOf(e);t!==-1&&n[$i].splice(t,1)}function zo(n){let e=n[$t];return si(e)?e[$t]:e}function Ay(n){return n[ch]??=[]}function Ry(n){return n.cleanup??=[]}function EL(n,e,t,r){let i=Ay(e);i.push(t),n.firstCreatePass&&Ry(n).push(r,i.length-1)}var ge={lFrame:GT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Tv=!1;function bL(){return ge.lFrame.elementDepthCount}function CL(){ge.lFrame.elementDepthCount++}function DL(){ge.lFrame.elementDepthCount--}function UT(){return ge.bindingsEnabled}function TL(){return ge.skipHydrationRootTNode!==null}function SL(n){return ge.skipHydrationRootTNode===n}function AL(){ge.skipHydrationRootTNode=null}function me(){return ge.lFrame.lView}function Dt(){return ge.lFrame.tView}function Me(n){return ge.lFrame.contextLView=n,n[It]}function xe(n){return ge.lFrame.contextLView=null,n}function nn(){let n=jT();for(;n!==null&&n.type===64;)n=n.parent;return n}function jT(){return ge.lFrame.currentTNode}function RL(){let n=ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function fu(n,e){let t=ge.lFrame;t.currentTNode=n,t.isParent=e}function BT(){return ge.lFrame.isParent}function ML(){ge.lFrame.isParent=!1}function $T(){return Tv}function DD(n){let e=Tv;return Tv=n,e}function Ph(){let n=ge.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function xL(){return ge.lFrame.bindingIndex}function NL(n){return ge.lFrame.bindingIndex=n}function ua(){return ge.lFrame.bindingIndex++}function My(n){let e=ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function PL(){return ge.lFrame.inI18n}function kL(n,e){let t=ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,Sv(e)}function OL(){return ge.lFrame.currentDirectiveIndex}function Sv(n){ge.lFrame.currentDirectiveIndex=n}function FL(n){let e=ge.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function HT(){return ge.lFrame.currentQueryIndex}function xy(n){ge.lFrame.currentQueryIndex=n}function LL(n){let e=n[ue];return e.type===2?e.declTNode:e.type===1?n[Zn]:null}function zT(n,e,t){if(t&pe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&pe.Host);)if(i=LL(o),i===null||(o=o[aa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ge.lFrame=qT();return r.currentTNode=e,r.lView=n,!0}function Ny(n){let e=qT(),t=n[ue];ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function qT(){let n=ge.lFrame,e=n===null?null:n.child;return e===null?GT(n):e}function GT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function WT(){let n=ge.lFrame;return ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var KT=WT;function Py(){let n=WT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function VL(n){return(ge.lFrame.contextLView=wL(n,ge.lFrame.contextLView))[It]}function ai(){return ge.lFrame.selectedIndex}function qo(n){ge.lFrame.selectedIndex=n}function ky(){let n=ge.lFrame;return Ty(n.tView,n.selectedIndex)}function UL(){return ge.lFrame.currentNamespace}var QT=!0;function Oy(){return QT}function Fy(n){QT=n}function jL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=xT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function YT(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Jd(n,e,t){ZT(n,e,3,t)}function Xd(n,e,t,r){(n[se]&3)===t&&ZT(n,e,t,r)}function ov(n,e){let t=n[se];(t&3)===e&&(t&=16383,t+=1,n[se]=t)}function ZT(n,e,t,r){let i=r!==void 0?n[Ks]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Ks]+=65536),(a<o||o==-1)&&(BL(n,t,e,u),n[Ks]=(n[Ks]&4294901760)+u+2),u++}function TD(n,e){Oe(4,n,e);let t=fe(null);try{e.call(n)}finally{fe(t),Oe(5,n,e)}}function BL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[se]>>14<n[Ks]>>16&&(n[se]&3)===e&&(n[se]+=16384,TD(a,o)):TD(a,o)}var Js=-1,Go=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function $L(n){return(n.flags&8)!==0}function HL(n){return(n.flags&16)!==0}function zL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];qL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function JT(n){return n===3||n===4||n===6}function qL(n){return n.charCodeAt(0)===64}function nu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?SD(n,t,i,null,e[++r]):SD(n,t,i,null,null))}}return n}function SD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function XT(n){return n!==Js}function hh(n){return n&32767}function GL(n){return n>>16}function fh(n,e){let t=GL(n),r=e;for(;t>0;)r=r[aa],t--;return r}var Av=!0;function ph(n){let e=Av;return Av=n,e}var WL=256,eS=WL-1,tS=5,KL=0,gr={};function QL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Zc)&&(r=t[Zc]),r==null&&(r=t[Zc]=KL++);let i=r&eS,o=1<<i;e.data[n+(i>>tS)]|=o}function gh(n,e){let t=nS(n,e);if(t!==-1)return t;let r=e[ue];r.firstCreatePass&&(n.injectorIndex=e.length,sv(r.data,n),sv(e,null),sv(r.blueprint,null));let i=Ly(n,e),o=n.injectorIndex;if(XT(i)){let s=hh(i),a=fh(i,e),u=a[ue].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function sv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function nS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Ly(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=aS(i),r===null)return Js;if(t++,i=i[aa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Js}function Rv(n,e,t){QL(n,e,t)}function YL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(JT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function rS(n,e,t){if(t&pe.Optional||n!==void 0)return n;_y(e,"NodeInjector")}function iS(n,e,t,r){if(t&pe.Optional&&r===void 0&&(r=null),(t&(pe.Self|pe.Host))===0){let i=n[ea],o=un(void 0);try{return i?i.get(e,r,t&pe.Optional):mT(e,r,t&pe.Optional)}finally{un(o)}}return rS(r,e,t)}function oS(n,e,t,r=pe.Default,i){if(n!==null){if(e[se]&2048&&!(r&pe.Self)){let s=eV(n,e,t,r,gr);if(s!==gr)return s}let o=sS(n,e,t,r,gr);if(o!==gr)return o}return iS(e,t,r,i)}function sS(n,e,t,r,i){let o=JL(t);if(typeof o=="function"){if(!zT(e,n,r))return r&pe.Host?rS(i,t,r):iS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&pe.Optional))_y(t);else return s}finally{KT()}}else if(typeof o=="number"){let s=null,a=nS(n,e),u=Js,l=r&pe.Host?e[Qn][Zn]:null;for((a===-1||r&pe.SkipSelf)&&(u=a===-1?Ly(n,e):e[a+8],u===Js||!RD(r,!1)?a=-1:(s=e[ue],a=hh(u),e=fh(u,e)));a!==-1;){let h=e[ue];if(AD(o,a,h.data)){let p=ZL(a,e,t,s,r,l);if(p!==gr)return p}u=e[a+8],u!==Js&&RD(r,e[ue].data[a+8]===l)&&AD(o,a,e)?(s=h,a=hh(u),e=fh(u,e)):a=-1}}return i}function ZL(n,e,t,r,i,o){let s=e[ue],a=s.data[n+8],u=r==null?ca(a)&&Av:r!=s&&(a.type&3)!==0,l=i&pe.Host&&o===a,h=eh(a,s,t,u,l);return h!==null?ru(e,s,h,a):gr}function eh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let E=s[v];if(v<u&&t===E||v>=u&&E.type===t)return v}if(i){let v=s[u];if(v&&mr(v)&&v.type===t)return u}return null}function ru(n,e,t,r){let i=n[t],o=e.data;if(i instanceof Go){let s=i;s.resolving&&pT(jF(o[t]));let a=ph(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?un(s.injectImpl):null,h=zT(n,r,pe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&jL(t,o[t],e)}finally{l!==null&&un(l),ph(a),s.resolving=!1,KT()}}return i}function JL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Zc)?n[Zc]:void 0;return typeof e=="number"?e>=0?e&eS:XL:e}function AD(n,e,t){let r=1<<n;return!!(t[e+(n>>tS)]&r)}function RD(n,e){return!(n&pe.Self)&&!(n&pe.Host&&e)}var Vo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return oS(this._tNode,this._lView,e,Rh(r),t)}};function XL(){return new Vo(nn(),me())}function Jo(n){return uu(()=>{let e=n.prototype.constructor,t=e[rh]||Mv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[rh]||Mv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Mv(n){return uT(n)?()=>{let e=Mv(en(n));return e&&e()}:Uo(n)}function eV(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!dh(s);){let a=sS(o,s,t,r|pe.Self,gr);if(a!==gr)return a;let u=o.parent;if(!u){let l=s[ST];if(l){let h=l.get(t,gr,r);if(h!==gr)return h}u=aS(s),s=s[aa]}o=u}return i}function aS(n){let e=n[ue],t=e.type;return t===2?e.declTNode:t===1?n[Zn]:null}function Vy(n){return YL(nn(),n)}function MD(n,e=null,t=null,r){let i=cS(n,e,t,r);return i.resolveInjectorInitializers(),i}function cS(n,e=null,t=null,r,i=new Set){let o=[t||ln,nL(n)];return r=r||(typeof n=="object"?void 0:dn(n)),new Xc(o,e||by(),r||null,i)}var rt=class n{static THROW_IF_NOT_FOUND=Lo;static NULL=new ah;static create(e,t){if(Array.isArray(e))return MD({name:""},t,e,"");{let r=e.name??"";return MD({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>Z(_T)});static __NG_ELEMENT_ID__=-1};var tV=new z("");tV.__NG_ELEMENT_ID__=n=>{let e=nn();if(e===null)throw new W(204,!1);if(e.type&2)return e.value;if(n&pe.Optional)return null;throw new W(204,!1)};var uS=!1,la=(()=>{class n{static __NG_ELEMENT_ID__=nV;static __NG_ENV_ID__=t=>t}return n})(),xv=class extends la{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return VT(this._lView,e),()=>IL(this._lView,e)}};function nV(){return new xv(me())}var Wo=class{},Uy=new z("",{providedIn:"root",factory:()=>!1});var lS=new z(""),dS=new z(""),Xo=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ve(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),kh=(()=>{class n{internalPendingTasks=F(Xo);scheduler=F(Wo);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return y(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Nv=class extends at{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,TT()&&(this.destroyRef=F(la,{optional:!0})??void 0,this.pendingTasks=F(Xo,{optional:!0})??void 0)}emit(e){let t=fe(null);try{super.next(e)}finally{fe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof tt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},nt=Nv;function mh(...n){}function hS(n){let e,t;function r(){n=mh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function xD(n){return queueMicrotask(()=>n()),()=>{n=mh}}var jy="isAngularZone",vh=jy+"_ID",rV=0,Te=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new nt(!1);onMicrotaskEmpty=new nt(!1);onStable=new nt(!1);onError=new nt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=uS}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,sV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(jy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new W(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,iV,mh,mh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},iV={};function By(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function oV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){hS(()=>{n.callbackScheduled=!1,Pv(n),n.isCheckStableRunning=!0,By(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Pv(n)}function sV(n){let e=()=>{oV(n)},t=rV++;n._inner=n._inner.fork({name:"angular",properties:{[jy]:!0,[vh]:t,[vh+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(aV(u))return r.invokeTask(o,s,a,u);try{return ND(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),PD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return ND(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!cV(u)&&e(),PD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Pv(n),By(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Pv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ND(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function PD(n){n._nesting--,By(n)}var kv=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new nt;onMicrotaskEmpty=new nt;onStable=new nt;onError=new nt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function aV(n){return fS(n,"__ignore_ng_zone__")}function cV(n){return fS(n,"__scheduler_tick__")}function fS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var _r=class{_console=console;handleError(e){this._console.error("ERROR",e)}},uV=new z("",{providedIn:"root",factory:()=>{let n=F(Te),e=F(_r);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function kD(n,e){return aT(n,e)}function lV(n){return aT(sT,n)}var pS=(kD.required=lV,kD);function dV(){return da(nn(),me())}function da(n,e){return new In(Er(n,e))}var In=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=dV}return n})();function hV(n){return n instanceof In?n.nativeElement:n}function fV(n){return typeof n=="function"&&n[Mn]!==void 0}function ha(n,e){let t=Fm(n,e?.equal),r=t[Mn];return t.set=i=>$c(r,i),t.update=i=>Lm(r,i),t.asReadonly=pV.bind(t),t}function pV(){let n=this[Mn];if(n.readonlyFn===void 0){let e=()=>this();e[Mn]=n,n.readonlyFn=e}return n.readonlyFn}function gS(n){return fV(n)&&typeof n.set=="function"}function gV(){return this._results[Symbol.iterator]()}var Ov=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new at}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=ZF(e);(this._changesDetected=!YF(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=gV};function mS(n){return(n.flags&128)===128}var vS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vS||{}),yS=new Map,mV=0;function vV(){return mV++}function yV(n){yS.set(n[xh],n)}function Fv(n){yS.delete(n[xh])}var OD="__ngContext__";function pu(n,e){Hi(e)?(n[OD]=e[xh],yV(e)):n[OD]=e}function _S(n){return IS(n[tu])}function wS(n){return IS(n[Kn])}function IS(n){for(;n!==null&&!si(n);)n=n[Kn];return n}var Lv;function ES(n){Lv=n}function _V(){if(Lv!==void 0)return Lv;if(typeof document<"u")return document;throw new W(210,!1)}var $y=new z("",{providedIn:"root",factory:()=>wV}),wV="ng",Hy=new z(""),zi=new z("",{providedIn:"platform",factory:()=>"unknown"});var zy=new z("",{providedIn:"root",factory:()=>_V().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var IV="h",EV="b";var bS=!1,bV=new z("",{providedIn:"root",factory:()=>bS});var qy=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(qy||{}),fa=new z(""),FD=new Set;function qi(n){FD.has(n)||(FD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var CS=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=CV}return n})();function CV(){return new CS(me(),nn())}var Qs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Qs||{}),DS=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),DV=[Qs.EarlyRead,Qs.Write,Qs.MixedReadWrite,Qs.Read],TV=(()=>{class n{ngZone=F(Te);scheduler=F(Wo);errorHandler=F(_r,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){F(fa,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Oe(16),this.executing=!0;for(let r of DV)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Oe(17)}register(t){let{view:r}=t;r!==void 0?((r[Zs]??=[]).push(t),hu(r),r[se]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(qy.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Vv=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Zs];e&&(this.view[Zs]=e.filter(t=>t!==this))}};function Gy(n,e){!e?.injector&&Cy(Gy);let t=e?.injector??F(rt);return qi("NgAfterNextRender"),AV(n,t,e,!0)}function SV(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function AV(n,e,t,r){let i=e.get(DS);i.impl??=e.get(TV);let o=e.get(fa,null,{optional:!0}),s=t?.phase??Qs.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(la):null,u=e.get(CS,null,{optional:!0}),l=new Vv(i.impl,SV(n,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var RV=()=>null;function TS(n,e,t=!1){return RV(n,e,t)}function SS(n,e){let t=n.contentQueries;if(t!==null){let r=fe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];xy(o),a.contentQueries(2,e[s],s)}}}finally{fe(r)}}}function Uv(n,e,t){xy(0);let r=fe(null);try{e(n,t)}finally{fe(r)}}function AS(n,e,t){if(RT(e)){let r=fe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{fe(r)}}}var wr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(wr||{});var Qd;function MV(){if(Qd===void 0&&(Qd=null,Oo.trustedTypes))try{Qd=Oo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qd}function LD(n){return MV()?.createScriptURL(n)||n}var yh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${iT})`}};function gu(n){return n instanceof yh?n.changingThisBreaksApplicationSecurity:n}function RS(n,e){let t=xV(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${iT})`)}return t===e}function xV(n){return n instanceof yh&&n.getTypeName()||null}var NV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function PV(n){return n=String(n),n.match(NV)?n:"unsafe:"+n}var Wy=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Wy||{});function Tt(n){let e=xS();return e?e.sanitize(Wy.URL,n)||"":RS(n,"URL")?gu(n):PV(Fo(n))}function kV(n){let e=xS();if(e)return LD(e.sanitize(Wy.RESOURCE_URL,n)||"");if(RS(n,"ResourceURL"))return LD(gu(n));throw new W(904,!1)}function OV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?kV:Tt}function MS(n,e,t){return OV(e,t)(n)}function xS(){let n=me();return n&&n[ni].sanitizer}function NS(n){return n instanceof Function?n():n}function FV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var PS="ng-template";function LV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&FV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ky(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ky(n){return n.type===4&&n.value!==PS}function VV(n,e,t){let r=n.type===4&&!t?PS:n.value;return e===r}function UV(n,e,t){let r=4,i=n.attrs,o=i!==null?$V(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Gn(r)&&!Gn(u))return!1;if(s&&Gn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!VV(n,u,t)||u===""&&e.length===1){if(Gn(r))return!1;s=!0}}else if(r&8){if(i===null||!LV(n,i,u,t)){if(Gn(r))return!1;s=!0}}else{let l=e[++a],h=jV(u,i,Ky(n),t);if(h===-1){if(Gn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Gn(r))return!1;s=!0}}}}return Gn(r)||s}function Gn(n){return(n&1)===0}function jV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return HV(e,n)}function BV(n,e,t=!1){for(let r=0;r<e.length;r++)if(UV(n,e[r],t))return!0;return!1}function $V(n){for(let e=0;e<n.length;e++){let t=n[e];if(JT(t))return e}return n.length}function HV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function VD(n,e){return n?":not("+e.trim()+")":e}function zV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Gn(s)&&(e+=VD(o,i),i=""),r=s,o=o||!Gn(r);t++}return i!==""&&(e+=VD(o,i)),e}function qV(n){return n.map(zV).join(",")}function GV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Gn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var En={};function WV(n,e){return n.createText(e)}function KV(n,e,t){n.setValue(e,t)}function kS(n,e,t){return n.createElement(e,t)}function _h(n,e,t,r,i){n.insertBefore(e,t,r,i)}function OS(n,e,t){n.appendChild(e,t)}function UD(n,e,t,r,i){r!==null?_h(n,e,t,r,i):OS(n,e,t)}function QV(n,e,t){n.removeChild(null,e,t)}function YV(n,e,t){n.setAttribute(e,"style",t)}function ZV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function FS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&zL(n,e,r),i!==null&&ZV(n,e,i),o!==null&&YV(n,e,o)}function Qy(n,e,t,r,i,o,s,a,u,l,h){let p=tn+r,m=p+i,v=JV(p,m),E=typeof l=="function"?l():l;return v[ue]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:h}}function JV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:En);return t}function XV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Qy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Yy(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[oi]=i,p[se]=r|4|128|8|64|1024,(l!==null||n&&n[se]&2048)&&(p[se]|=2048),FT(p),p[$t]=p[aa]=n,p[It]=t,p[ni]=s||n&&n[ni],p[pt]=a||n&&n[pt],p[ea]=u||n&&n[ea]||null,p[Zn]=o,p[xh]=vV(),p[eu]=h,p[ST]=l,p[Qn]=e.type==2?n[Qn]:p,p}function e2(n,e,t){let r=Er(e,n),i=XV(t),o=n[ni].rendererFactory,s=Zy(n,Yy(n,i,null,LS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function LS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function VS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Zy(n,e){return n[tu]?n[bD][Kn]=e:n[tu]=e,n[bD]=e,e}function P(n=1){US(Dt(),me(),ai()+n,!1)}function US(n,e,t,r){if(!r)if((e[se]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Jd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Xd(e,o,0,t)}qo(t)}var Oh=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Oh||{});function jv(n,e,t,r){let i=fe(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Oh.SignalBased)!==0&&(u=e[o][Mn]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):MT(e,u,o,r)}finally{fe(i)}}function jS(n,e,t,r,i){let o=ai(),s=r&2;try{qo(-1),s&&e.length>tn&&US(n,e,tn,!1),Oe(s?2:0,i),t(r,i)}finally{qo(o),Oe(s?3:1,i)}}function Jy(n,e,t){s2(n,e,t),(t.flags&64)===64&&a2(n,e,t)}function BS(n,e,t=Er){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function t2(n,e,t,r){let o=r.get(bV,bS)||t===wr.ShadowDom,s=n.selectRootElement(e,o);return n2(s),s}function n2(n){r2(n)}var r2=()=>null;function i2(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $S(n,e,t,r,i,o,s,a){if(!a&&Xy(e,n,t,r,i)){ca(e)&&o2(t,e.index);return}if(e.type&3){let u=Er(e,t);r=i2(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function o2(n,e){let t=yr(e,n);t[se]&16||(t[se]|=64)}function s2(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ca(t)&&e2(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||gh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=ru(e,n,s,t);if(pu(u,e),o!==null&&d2(e,s-r,u,a,t,o),mr(a)){let l=yr(t.index,e);l[It]=ru(e,n,s,t)}}}function a2(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=OL();try{qo(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Sv(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&c2(u,l)}}finally{qo(-1),Sv(s)}}function c2(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function HS(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];BV(e,o.selectors,!1)&&(r??=[],mr(o)?r.unshift(o):r.push(o))}return r}function u2(n,e,t,r,i,o){let s=Er(n,e);l2(e[pt],s,o,n.value,t,r,i)}function l2(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Fo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function d2(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];jv(r,t,u,l)}}function h2(n,e){let t=n[ea],r=t?t.get(_r,null):null;r&&r.handleError(e)}function Xy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];jv(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];jv(h,l,r,i),a=!0}return a}function f2(n,e){let t=yr(e,n),r=t[ue];p2(r,t);let i=t[oi];i!==null&&t[eu]===null&&(t[eu]=TS(i,t[ea])),Oe(18),e_(r,t,t[It]),Oe(19,t[It])}function p2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function e_(n,e,t){Ny(e);try{let r=n.viewQuery;r!==null&&Uv(1,r,t);let i=n.template;i!==null&&jS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ri]?.finishViewCreation(n),n.staticContentQueries&&SS(n,e),n.staticViewQueries&&Uv(2,n.viewQuery,t);let o=n.components;o!==null&&g2(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[se]&=-5,Py()}}function g2(n,e){for(let t=0;t<e.length;t++)f2(n,e[t])}function Fh(n,e,t,r){let i=fe(null);try{let o=e.tView,a=n[se]&4096?4096:16,u=Yy(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[$o]=l;let h=n[ri];return h!==null&&(u[ri]=h.createEmbeddedView(o)),e_(o,u,t),u}finally{fe(i)}}function iu(n,e){return!e||e.firstChild===null||mS(n)}var m2;function t_(n,e){return m2(n,e)}var ii=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ii||{});function zS(n){return(n.flags&32)===32}function Ys(n,e,t,r,i){if(r!=null){let o,s=!1;si(r)?o=r:Hi(r)&&(s=!0,r=r[oi]);let a=vr(r);n===0&&t!==null?i==null?OS(e,t,a):_h(e,t,a,i||null,!0):n===1&&t!==null?_h(e,t,a,i||null,!0):n===2?QV(e,a,s):n===3&&e.destroyNode(a),o!=null&&A2(e,n,o,t,i)}}function v2(n,e){qS(n,e),e[oi]=null,e[Zn]=null}function y2(n,e,t,r,i,o){r[oi]=i,r[Zn]=e,Vh(n,r,t,1,i,o)}function qS(n,e){e[ni].changeDetectionScheduler?.notify(9),Vh(n,e,e[pt],2,null,null)}function _2(n){let e=n[tu];if(!e)return av(n[ue],n);for(;e;){let t=null;if(Hi(e))t=e[tu];else{let r=e[jt];r&&(t=r)}if(!t){for(;e&&!e[Kn]&&e!==n;)Hi(e)&&av(e[ue],e),e=e[$t];e===null&&(e=n),Hi(e)&&av(e[ue],e),t=e&&e[Kn]}e=t}}function n_(n,e){let t=n[ta],r=t.indexOf(e);t.splice(r,1)}function Lh(n,e){if(du(e))return;let t=e[pt];t.destroyNode&&Vh(n,e,t,3,null,null),_2(e)}function av(n,e){if(du(e))return;let t=fe(null);try{e[se]&=-129,e[se]|=256,e[Nn]&&Pm(e[Nn]),I2(n,e),w2(n,e),e[ue].type===1&&e[pt].destroy();let r=e[$o];if(r!==null&&si(e[$t])){r!==e[$t]&&n_(r,e);let i=e[ri];i!==null&&i.detachView(n)}Fv(e)}finally{fe(t)}}function w2(n,e){let t=n.cleanup,r=e[ch];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ch]=null);let i=e[$i];if(i!==null){e[$i]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[uh];if(o!==null){e[uh]=null;for(let s of o)s.destroy()}}function I2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Go)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Oe(4,a,u);try{u.call(a)}finally{Oe(5,a,u)}}else{Oe(4,i,o);try{o.call(i)}finally{Oe(5,i,o)}}}}}function E2(n,e,t){return b2(n,e.parent,t)}function b2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[oi];if(ca(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===wr.None||i===wr.Emulated)return null}return Er(r,t)}function C2(n,e,t){return T2(n,e,t)}function D2(n,e,t){return n.type&40?Er(n,t):null}var T2=D2,jD;function r_(n,e,t,r){let i=E2(n,r,e),o=e[pt],s=r.parent||e[Zn],a=C2(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)UD(o,i,t[u],a,!1);else UD(o,i,t,a,!1);jD!==void 0&&jD(o,r,e,t,i)}function Yc(n,e){if(e!==null){let t=e.type;if(t&3)return Er(e,n);if(t&4)return Bv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Yc(n,r);{let i=n[e.index];return si(i)?Bv(-1,i):vr(i)}}else{if(t&128)return Yc(n,e.next);if(t&32)return t_(e,n)()||vr(n[e.index]);{let r=GS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=zo(n[Qn]);return Yc(i,r)}else return Yc(n,e.next)}}}return null}function GS(n,e){if(e!==null){let r=n[Qn][Zn],i=e.projection;return r.projection[i]}return null}function Bv(n,e){let t=jt+n+1;if(t<e.length){let r=e[t],i=r[ue].firstChild;if(i!==null)return Yc(r,i)}return e[Ho]}function i_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&pu(vr(a),r),t.flags|=2),!zS(t))if(u&8)i_(n,e,t.child,r,i,o,!1),Ys(e,n,i,a,o);else if(u&32){let l=t_(t,r),h;for(;h=l();)Ys(e,n,i,h,o);Ys(e,n,i,a,o)}else u&16?S2(n,e,r,t,i,o):Ys(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Vh(n,e,t,r,i,o){i_(t,r,n.firstChild,e,i,o,!1)}function S2(n,e,t,r,i,o){let s=t[Qn],u=s[Zn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ys(e,n,i,h,o)}else{let l=u,h=s[$t];mS(r)&&(l.flags|=128),i_(n,e,l,h,i,o,!0)}}function A2(n,e,t,r,i){let o=t[Ho],s=vr(t);o!==s&&Ys(e,n,r,o,i);for(let a=jt;a<t.length;a++){let u=t[a];Vh(u[ue],u,n,e,r,o)}}function R2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:ii.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ii.Important),n.setStyle(t,r,i,o))}}function wh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(vr(o)),si(o)&&M2(o,r);let s=t.type;if(s&8)wh(n,e,t.child,r);else if(s&32){let a=t_(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=GS(e,t);if(Array.isArray(a))r.push(...a);else{let u=zo(e[Qn]);wh(u[ue],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function M2(n,e){for(let t=jt;t<n.length;t++){let r=n[t],i=r[ue].firstChild;i!==null&&wh(r[ue],r,i,e)}n[Ho]!==n[oi]&&e.push(n[Ho])}function WS(n){if(n[Zs]!==null){for(let e of n[Zs])e.impl.addSequence(e);n[Zs].length=0}}var KS=[];function x2(n){return n[Nn]??N2(n)}function N2(n){let e=KS.pop()??Object.create(k2);return e.lView=n,e}function P2(n){n.lView[Nn]!==n&&(n.lView=null,KS.push(n))}var k2=ie(U({},jc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{hu(n.lView)},consumerOnSignalRead(){this.lView[Nn]=this}});function O2(n){let e=n[Nn]??Object.create(F2);return e.lView=n,e}var F2=ie(U({},jc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=zo(n.lView);for(;e&&!QS(e[ue]);)e=zo(e);e&&LT(e)},consumerOnSignalRead(){this.lView[Nn]=this}});function QS(n){return n.type!==2}function YS(n){if(n[uh]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[uh])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[se]&8192)}}var L2=100;function ZS(n,e=!0,t=0){let i=n[ni].rendererFactory,o=!1;o||i.begin?.();try{V2(n,t)}catch(s){throw e&&h2(n,s),s}finally{o||i.end?.()}}function V2(n,e){let t=$T();try{DD(!0),$v(n,e);let r=0;for(;Nh(n);){if(r===L2)throw new W(103,!1);r++,$v(n,1)}}finally{DD(t)}}function U2(n,e,t,r){if(du(e))return;let i=e[se],o=!1,s=!1;Ny(e);let a=!0,u=null,l=null;o||(QS(n)?(l=x2(e),u=md(l)):Sm()===null?(a=!1,l=O2(e),u=md(l)):e[Nn]&&(Pm(e[Nn]),e[Nn]=null));try{FT(e),NL(n.bindingStartIndex),t!==null&&jS(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Jd(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Xd(e,v,0,null),ov(e,0)}if(s||j2(e),YS(e),JS(e,0),n.contentQueries!==null&&SS(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Jd(e,v)}else{let v=n.contentHooks;v!==null&&Xd(e,v,1),ov(e,1)}$2(n,e);let p=n.components;p!==null&&eA(e,p,0);let m=n.viewQuery;if(m!==null&&Uv(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Jd(e,v)}else{let v=n.viewHooks;v!==null&&Xd(e,v,2),ov(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[iv]){for(let v of e[iv])v();e[iv]=null}o||(WS(e),e[se]&=-73)}catch(h){throw o||hu(e),h}finally{l!==null&&(xm(l,u),a&&P2(l)),Py()}}function JS(n,e){for(let t=_S(n);t!==null;t=wS(t))for(let r=jt;r<t.length;r++){let i=t[r];XS(i,e)}}function j2(n){for(let e=_S(n);e!==null;e=wS(e)){if(!(e[se]&2))continue;let t=e[ta];for(let r=0;r<t.length;r++){let i=t[r];LT(i)}}}function B2(n,e,t){Oe(18);let r=yr(e,n);XS(r,t),Oe(19,r[It])}function XS(n,e){Sy(n)&&$v(n,e)}function $v(n,e){let r=n[ue],i=n[se],o=n[Nn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Nm(o)),s||=!1,o&&(o.dirty=!1),n[se]&=-9217,s)U2(r,n,r.template,n[It]);else if(i&8192){YS(n),JS(n,1);let a=r.components;a!==null&&eA(n,a,1),WS(n)}}function eA(n,e,t){for(let r=0;r<e.length;r++)B2(n,e[r],t)}function $2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)qo(~i);else{let o=i,s=t[++r],a=t[++r];kL(s,o);let u=e[o];Oe(24,u),a(2,u),Oe(25,u)}}}finally{qo(-1)}}function o_(n,e){let t=$T()?64:1088;for(n[ni].changeDetectionScheduler?.notify(e);n;){n[se]|=t;let r=zo(n);if(dh(n)&&!r)return n;n=r}return null}function tA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function nA(n,e){let t=jt+e;if(t<n.length)return n[t]}function Uh(n,e,t,r=!0){let i=e[ue];if(H2(i,e,n,t),r){let s=Bv(t,n),a=e[pt],u=a.parentNode(n[Ho]);u!==null&&y2(i,n[Zn],a,e,u,s)}let o=e[eu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function rA(n,e){let t=ou(n,e);return t!==void 0&&Lh(t[ue],t),t}function ou(n,e){if(n.length<=jt)return;let t=jt+e,r=n[t];if(r){let i=r[$o];i!==null&&i!==n&&n_(i,r),e>0&&(n[t-1][Kn]=r[Kn]);let o=sh(n,jt+e);v2(r[ue],r);let s=o[ri];s!==null&&s.detachView(o[ue]),r[$t]=null,r[Kn]=null,r[se]&=-129}return r}function H2(n,e,t,r){let i=jt+r,o=t.length;r>0&&(t[i-1][Kn]=e),r<o-jt?(e[Kn]=t[i],yT(t,jt+r,e)):(t.push(e),e[Kn]=null),e[$t]=t;let s=e[$o];s!==null&&t!==s&&iA(s,e);let a=e[ri];a!==null&&a.insertView(n),Dv(e),e[se]|=128}function iA(n,e){let t=n[ta],r=e[$t];if(Hi(r))n[se]|=2;else{let i=r[$t][Qn];e[Qn]!==i&&(n[se]|=2)}t===null?n[ta]=[e]:t.push(e)}var su=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[ue];return wh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[It]}set context(e){this._lView[It]=e}get destroyed(){return du(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[$t];if(si(e)){let t=e[lh],r=t?t.indexOf(this):-1;r>-1&&(ou(e,r),sh(t,r))}this._attachedToViewContainer=!1}Lh(this._lView[ue],this._lView)}onDestroy(e){VT(this._lView,e)}markForCheck(){o_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){Dv(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,ZS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=dh(this._lView),t=this._lView[$o];t!==null&&!e&&n_(t,this._lView),qS(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let t=dh(this._lView),r=this._lView[$o];r!==null&&!t&&iA(r,this._lView),Dv(this._lView)}};var Ko=(()=>{class n{static __NG_ELEMENT_ID__=G2}return n})(),z2=Ko,q2=class extends z2{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Fh(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new su(i)}};function G2(){return s_(nn(),me())}function s_(n,e){return n.type&4?new q2(e,n,da(n,e)):null}function a_(n,e,t,r,i){let o=n.data[e];if(o===null)o=W2(n,e,t,r,i),PL()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=RL();o.injectorIndex=s===null?-1:s.injectorIndex}return fu(o,!0),o}function W2(n,e,t,r,i){let o=jT(),s=BT(),a=s?o:o&&o.parent,u=n.data[e]=Q2(n,a,t,e,r,i);return K2(n,u,o,s),u}function K2(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Q2(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return TL()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var UJ=new RegExp(`^(\\d+)*(${EV}|${IV})*(.*)`);var Y2=()=>null;function au(n,e){return Y2(n,e)}var Z2=class{},oA=class{},Hv=class{resolveComponentFactory(e){throw Error(`No component factory found for ${dn(e)}.`)}},jh=class{static NULL=new Hv},ra=class{},ci=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>J2()}return n})();function J2(){let n=me(),e=nn(),t=yr(e.index,n);return(Hi(t)?t:n)[pt]}var X2=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var cv={},zv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Rh(r);let i=this.injector.get(e,cv,r);return i!==cv||t===cv?i:this.parentInjector.get(e,t,r)}};function BD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=vv(i,a);else if(o==2){let u=a,l=e[++s];r=vv(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function L(n,e=pe.Default){let t=me();if(t===null)return Z(n,e);let r=nn();return oS(r,t,en(n),e)}function sA(){let n="invalid";throw new Error(n)}function aA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,u=null,l=null,h=tU(s);h===null?a=s:[a,u,l]=h,iU(n,e,t,a,o,u,l)}o!==null&&r!==null&&eU(t,r,o)}function eU(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new W(-301,!1);r.push(e[i],o)}}function tU(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&mr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,nU(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function nU(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function rU(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function iU(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let v=r[m];!u&&mr(v)&&(u=!0,rU(n,t,m)),Rv(gh(t,e),n,v.type)}lU(t,n.data.length,a);for(let m=0;m<a;m++){let v=r[m];v.providersResolver&&v.providersResolver(v)}let l=!1,h=!1,p=VS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let v=r[m];if(t.mergedAttrs=nu(t.mergedAttrs,v.hostAttrs),sU(n,t,e,p,v),uU(p,v,i),s!==null&&s.has(v)){let[N,M]=s.get(v);t.directiveToIndex.set(v.type,[p,N+t.directiveStart,M+t.directiveStart])}else(o===null||!o.has(v))&&t.directiveToIndex.set(v.type,p);v.contentQueries!==null&&(t.flags|=4),(v.hostBindings!==null||v.hostAttrs!==null||v.hostVars!==0)&&(t.flags|=64);let E=v.type.prototype;!l&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}oU(n,t,o)}function oU(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))$D(0,e,i,r),$D(1,e,i,r),zD(e,r,!1);else{let o=t.get(i);HD(0,e,o,r),HD(1,e,o,r),zD(e,r,!0)}}}function $D(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),cA(e,o)}}function HD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),cA(e,s)}}function cA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function zD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Ky(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function sU(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Uo(i.type,!0)),s=new Go(o,mr(i),L);n.blueprint[r]=s,t[r]=s,aU(n,e,r,VS(n,t,i.hostVars,En),i)}function aU(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;cU(s)!=a&&s.push(a),s.push(t,r,o)}}function cU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function uU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;mr(e)&&(t[""]=n)}}function lU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function uA(n,e,t,r,i,o,s,a){let u=e.consts,l=na(u,s),h=a_(e,n,2,r,l);return o&&aA(e,t,h,na(u,a),i),h.mergedAttrs=nu(h.mergedAttrs,h.attrs),h.attrs!==null&&BD(h,h.attrs,!1),h.mergedAttrs!==null&&BD(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function lA(n,e){YT(n,e),RT(e)&&n.queries.elementEnd(e)}var Ih=class extends jh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Bo(e);return new ia(t,this.ngModule)}};function dU(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Oh.SignalBased)!==0};return i&&(o.transform=i),o})}function hU(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function fU(n,e,t){let r=e instanceof Bt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new zv(t,r):t}function pU(n){let e=n.get(ra,null);if(e===null)throw new W(407,!1);let t=n.get(X2,null),r=n.get(Wo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function gU(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return kS(e,t,t==="svg"?mL:t==="math"?vL:null)}var ia=class extends oA{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=dU(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=hU(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=qV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Oe(22);let o=fe(null);try{let s=this.componentDef,a=r?["ng-version","19.2.8"]:GV(this.componentDef.selectors[0]),u=Qy(0,null,null,1,0,null,null,null,null,[a],null),l=fU(s,i||this.ngModule,e),h=pU(l),p=h.rendererFactory.createRenderer(null,s),m=r?t2(p,r,s.encapsulation,l):gU(s,p),v=Yy(null,u,null,512|LS(s),null,null,h,p,l,null,TS(m,l,!0));v[tn]=m,Ny(v);let E=null;try{let N=uA(tn,u,v,"#host",()=>[this.componentDef],!0,0);m&&(FS(p,m,N),pu(m,v)),Jy(u,v,N),AS(u,N,v),lA(u,N),t!==void 0&&mU(N,this.ngContentSelectors,t),E=yr(N.index,v),v[It]=E[It],e_(u,v,null)}catch(N){throw E!==null&&Fv(E),Fv(v),N}finally{Oe(23),Py()}return new qv(this.componentType,v)}finally{fe(o)}}},qv=class extends Z2{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Ty(t[ue],tn),this.location=da(this._tNode,t),this.instance=yr(this._tNode.index,t)[It],this.hostView=this.changeDetectorRef=new su(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Xy(r,i[ue],i,e,t);this.previousInputValues.set(e,t);let s=yr(r.index,i);o_(s,1)}get injector(){return new Vo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function mU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Gi=(()=>{class n{static __NG_ELEMENT_ID__=vU}return n})();function vU(){let n=nn();return hA(n,me())}var yU=Gi,dA=class extends yU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return da(this._hostTNode,this._hostLView)}get injector(){return new Vo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Ly(this._hostTNode,this._hostLView);if(XT(e)){let t=fh(e,this._hostLView),r=hh(e),i=t[ue].data[r+8];return new Vo(i,t)}else return new Vo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=qD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-jt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=au(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,iu(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!hL(e),a;if(s)a=t;else{let E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef}let u=s?e:new ia(Bo(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(s?l:this.parentInjector).get(Bt,null);N&&(o=N)}let h=Bo(u.componentType??{}),p=au(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,o);return this.insertImpl(v.hostView,a,iu(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(_L(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[$t],l=new dA(u,u[Zn],u[$t]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Uh(s,i,o,r),e.attachToViewContainerRef(),yT(uv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=qD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ou(this._lContainer,t);r&&(sh(uv(this._lContainer),t),Lh(r[ue],r))}detach(e){let t=this._adjustIndex(e,-1),r=ou(this._lContainer,t);return r&&sh(uv(this._lContainer),t)!=null?new su(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function qD(n){return n[lh]}function uv(n){return n[lh]||(n[lh]=[])}function hA(n,e){let t,r=e[n.index];return si(r)?t=r:(t=tA(r,e,null,n),e[n.index]=t,Zy(e,t)),wU(t,e,n,r),new dA(t,n,e)}function _U(n,e){let t=n[pt],r=t.createComment(""),i=Er(e,n),o=t.parentNode(i);return _h(t,o,r,t.nextSibling(i),!1),r}var wU=bU,IU=()=>!1;function EU(n,e,t){return IU(n,e,t)}function bU(n,e,t,r){if(n[Ho])return;let i;t.type&8?i=vr(r):i=_U(e,t),n[Ho]=i}var Gv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Wv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)c_(e,t).matches!==null&&this.queries[t].setDirty()}},Kv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=xU(e):this.predicate=e}},Qv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Yv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,CU(t,o)),this.matchTNodeWithReadOption(e,t,eh(t,e,o,!1,!1))}else r===Ko?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,eh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===In||i===Gi||i===Ko&&t.type&4)this.addMatch(t.index,-2);else{let o=eh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function CU(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function DU(n,e){return n.type&11?da(n,e):n.type&4?s_(n,e):null}function TU(n,e,t,r){return t===-1?DU(e,n):t===-2?SU(n,e,r):ru(n,n[ue],t,e)}function SU(n,e,t){if(t===In)return da(e,n);if(t===Ko)return s_(e,n);if(t===Gi)return hA(e,n)}function fA(n,e,t,r){let i=e[ri].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(TU(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Zv(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=fA(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=jt;p<h.length;p++){let m=h[p];m[$o]===m[$t]&&Zv(m[ue],m,l,r)}if(h[ta]!==null){let p=h[ta];for(let m=0;m<p.length;m++){let v=p[m];Zv(v[ue],v,l,r)}}}}}return r}function AU(n,e){return n[ri].queries[e].queryList}function RU(n,e,t){let r=new Ov((t&4)===4);return EL(n,e,r,r.destroy),(e[ri]??=new Wv).queries.push(new Gv(r))-1}function MU(n,e,t,r){let i=Dt();if(i.firstCreatePass){let o=nn();NU(i,new Kv(e,t,r),o.index),PU(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return RU(i,me(),t)}function xU(n){return n.split(",").map(e=>e.trim())}function NU(n,e,t){n.queries===null&&(n.queries=new Qv),n.queries.track(new Yv(e,t))}function PU(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function c_(n,e){return n.queries.getByIndex(e)}function kU(n,e){let t=n[ue],r=c_(t,e);return r.crossesNgTemplate?Zv(t,n,e,[]):fA(t,n,r,e)}var oa=class{},u_=class{};var Jv=class extends oa{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ih(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=IT(e);this._bootstrapComponents=NS(o.bootstrap),this._r3Injector=cS(e,t,[{provide:oa,useValue:this},{provide:jh,useValue:this.componentFactoryResolver},...r],dn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xv=class extends u_{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Jv(this.moduleType,e,[])}};var Eh=class extends oa{injector;componentFactoryResolver=new Ih(this);instance=null;constructor(e){super();let t=new Xc([...e.providers,{provide:oa,useValue:this},{provide:jh,useValue:this.componentFactoryResolver}],e.parent||by(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function mu(n,e,t=null){return new Eh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var OU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ET(!1,t.type),i=r.length>0?mu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(Z(Bt))})}return n})();function $e(n){return uu(()=>{let e=pA(n),t=ie(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(OU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||wr.Emulated,styles:n.styles||ln,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&qi("NgStandalone"),gA(t);let r=n.dependencies;return t.directiveDefs=GD(r,!1),t.pipeDefs=GD(r,!0),t.id=jU(t),t})}function FU(n){return Bo(n)||eL(n)}function LU(n){return n!==null}function br(n){return uu(()=>({type:n.type,bootstrap:n.bootstrap||ln,declarations:n.declarations||ln,imports:n.imports||ln,exports:n.exports||ln,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function VU(n,e){if(n==null)return jo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Oh.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function UU(n){if(n==null)return jo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Qe(n){return uu(()=>{let e=pA(n);return gA(e),e})}function l_(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function pA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||jo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ln,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:VU(n.inputs,e),outputs:UU(n.outputs),debugInfo:null}}function gA(n){n.features?.forEach(e=>e(n))}function GD(n,e){if(!n)return null;let t=e?tL:FU;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(LU)}function jU(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function BU(n){return Object.getPrototypeOf(n.prototype).constructor}function hn(n){let e=BU(n.type),t=!0,r=[n];for(;e;){let i;if(mr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=lv(n.inputs),s.declaredInputs=lv(n.declaredInputs),s.outputs=lv(n.outputs);let a=i.hostBindings;a&&GU(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&zU(n,u),l&&qU(n,l),$U(n,i),NF(n.outputs,i.outputs),mr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===hn&&(t=!1)}}e=Object.getPrototypeOf(e)}HU(r)}function $U(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function HU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=nu(i.hostAttrs,t=nu(t,i.hostAttrs))}}function lv(n){return n===jo?{}:n===ln?[]:n}function zU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function qU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function GU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function mA(n){return KU(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function WU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function KU(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function d_(n,e,t){return n[e]=t}function QU(n,e){return n[e]}function Pn(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function vA(n,e,t,r){let i=Pn(n,e,t);return Pn(n,e+1,r)||i}function YU(n,e,t,r,i){let o=vA(n,e,t,r);return Pn(n,e+2,i)||o}function ZU(n,e,t,r,i,o,s,a,u){let l=e.consts,h=a_(e,n,4,s||null,a||null);UT()&&aA(e,t,h,na(l,u),HS),h.mergedAttrs=nu(h.mergedAttrs,h.attrs),YT(e,h);let p=h.tView=Qy(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function ey(n,e,t,r,i,o,s,a,u,l){let h=t+tn,p=e.firstCreatePass?ZU(h,e,n,r,i,o,s,a,u):e.data[h];fu(p,!1);let m=JU(e,n,p,t);Oy()&&r_(e,n,m,p),pu(m,n);let v=tA(m,n,m,p);return n[h]=v,Zy(n,v),EU(v,p,n),Dy(p)&&Jy(e,n,p),u!=null&&BS(n,p,l),p}function Ee(n,e,t,r,i,o,s,a){let u=me(),l=Dt(),h=na(l.consts,o);return ey(u,l,n,e,t,r,i,h,s,a),Ee}var JU=XU;function XU(n,e,t,r){return Fy(!0),e[pt].createComment("")}var yA=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var _A=new z("");var ej=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new ty})}return n})(),ty=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Wi(n){return!!n&&typeof n.then=="function"}function h_(n){return!!n&&typeof n.subscribe=="function"}var wA=new z("");function f_(n){return kn([{provide:wA,multi:!0,useValue:n}])}var IA=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=F(wA,{optional:!0})??[];injector=F(rt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Ht(this.injector,i);if(Wi(o))t.push(o);else if(h_(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bh=new z("");function tj(){Om(()=>{throw new W(600,!1)})}function nj(n){return n.isBoundToModule}var rj=10;var Qo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=F(uV);afterRenderManager=F(DS);zonelessEnabled=F(Uy);rootEffectScheduler=F(ej);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new at;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=F(Xo).hasPendingTasks.pipe(oe(t=>!t));constructor(){F(fa,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=F(Bt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=rt.NULL){Oe(10);let o=t instanceof oA;if(!this._injector.get(IA).done){let v="";throw new W(405,v)}let a;o?a=t:a=this._injector.get(jh).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let u=nj(a)?void 0:this._injector.get(oa),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,m=h.injector.get(_A,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),th(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),Oe(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Oe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(qy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new W(101,!1);let t=fe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,fe(t),this.afterTick.next(),Oe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ra,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<rj;)Oe(14),this.synchronizeOnce(),Oe(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)ij(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Nh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;th(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Bh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>th(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new W(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function th(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ij(n,e,t,r){if(!t&&!Nh(n))return;ZS(n,e,t&&!r?0:1)}function $h(n,e,t,r){let i=me(),o=ua();if(Pn(i,o,e)){let s=Dt(),a=ky();u2(a,i,n,e,t,r)}return $h}function oj(n,e,t,r){return Pn(n,ua(),t)?e+Fo(t)+r:En}function sj(n,e,t,r,i,o,s,a){let u=xL(),l=YU(n,u,t,i,s);return My(3),l?e+Fo(t)+r+Fo(i)+o+Fo(s)+a:En}function Yd(n,e){return n<<17|e<<2}function Yo(n){return n>>17&32767}function aj(n){return(n&2)==2}function cj(n,e){return n&131071|e<<17}function ny(n){return n|2}function sa(n){return(n&131068)>>2}function dv(n,e){return n&-131069|e<<2}function uj(n){return(n&1)===1}function ry(n){return n|1}function lj(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Yo(s),u=sa(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||lu(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Yo(n[a+1]);n[r+1]=Yd(m,a),m!==0&&(n[m+1]=dv(n[m+1],r)),n[a+1]=cj(n[a+1],r)}else n[r+1]=Yd(a,0),a!==0&&(n[a+1]=dv(n[a+1],r)),a=r;else n[r+1]=Yd(u,0),a===0?a=r:n[u+1]=dv(n[u+1],r),u=r;l&&(n[r+1]=ny(n[r+1])),WD(n,h,r,!0),WD(n,h,r,!1),dj(e,h,n,r,o),s=Yd(a,u),o?e.classBindings=s:e.styleBindings=s}function dj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&lu(o,e)>=0&&(t[r+1]=ry(t[r+1]))}function WD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Yo(i):sa(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];hj(u,e)&&(a=!0,n[s+1]=r?ry(l):ny(l)),s=r?Yo(l):sa(l)}a&&(n[t+1]=r?ny(i):ry(i))}function hj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?lu(n,e)>=0:!1}var Wn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function fj(n){return n.substring(Wn.key,Wn.keyEnd)}function pj(n){return gj(n),EA(n,bA(n,0,Wn.textEnd))}function EA(n,e){let t=Wn.textEnd;return t===e?-1:(e=Wn.keyEnd=mj(n,Wn.key=e,t),bA(n,e,t))}function gj(n){Wn.key=0,Wn.keyEnd=0,Wn.value=0,Wn.valueEnd=0,Wn.textEnd=n.length}function bA(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function mj(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function G(n,e,t){let r=me(),i=ua();if(Pn(r,i,e)){let o=Dt(),s=ky();$S(o,s,r,n,e,r[pt],t,!1)}return G}function iy(n,e,t,r,i){Xy(e,n,t,i?"class":"style",r)}function He(n,e){return yj(n,e,null,!0),He}function CA(n){_j(Dj,vj,n,!0)}function vj(n,e){for(let t=pj(e);t>=0;t=EA(e,t))Iy(n,fj(e),!0)}function yj(n,e,t,r){let i=me(),o=Dt(),s=My(2);if(o.firstUpdatePass&&TA(o,n,s,r),e!==En&&Pn(i,s,e)){let a=o.data[ai()];SA(o,a,i,i[pt],n,i[s+1]=Sj(e,t),r,s)}}function _j(n,e,t,r){let i=Dt(),o=My(2);i.firstUpdatePass&&TA(i,null,o,r);let s=me();if(t!==En&&Pn(s,o,t)){let a=i.data[ai()];if(AA(a,r)&&!DA(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=vv(u,t||"")),iy(i,a,s,t,r)}else Tj(i,a,s,s[pt],s[o+1],s[o+1]=Cj(n,e,t),r,o)}}function DA(n,e){return e>=n.expandoStartIndex}function TA(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ai()],s=DA(n,t);AA(o,r)&&e===null&&!s&&(e=!1),e=wj(i,o,e,r),lj(i,o,e,t,s,r)}}function wj(n,e,t,r){let i=FL(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=hv(null,n,e,t,r),t=cu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=hv(i,n,e,t,r),o===null){let u=Ij(n,e,r);u!==void 0&&Array.isArray(u)&&(u=hv(null,n,e,u[1],r),u=cu(u,e.attrs,r),Ej(n,e,r,u))}else o=bj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Ij(n,e,t){let r=t?e.classBindings:e.styleBindings;if(sa(r)!==0)return n[Yo(r)]}function Ej(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Yo(i)]=r}function bj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=cu(r,s,t)}return cu(r,e.attrs,t)}function hv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=cu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function cu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Iy(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Cj(n,e,t){if(t==null||t==="")return ln;let r=[],i=gu(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function Dj(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Iy(n,r,t)}function Tj(n,e,t,r,i,o,s,a){i===En&&(i=ln);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,v=l<o.length?o[l+1]:void 0,E=null,N;h===p?(u+=2,l+=2,m!==v&&(E=p,N=v)):p===null||h!==null&&h<p?(u+=2,E=h):(l+=2,E=p,N=v),E!==null&&SA(n,e,t,r,E,N,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function SA(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=uj(l)?KD(u,e,t,i,sa(l),s):void 0;if(!bh(h)){bh(o)||aj(l)&&(o=KD(u,null,t,i,a,s));let p=kT(ai(),t);R2(r,s,p,i,o)}}function KD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===En&&(m=p?ln:void 0);let v=p?nv(m,r):h===r?m:void 0;if(l&&!bh(v)&&(v=nv(u,r)),bh(v)&&(a=v,s))return a;let E=n[i+1];i=s?Yo(E):sa(E)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=nv(u,r))}return a}function bh(n){return n!==void 0}function Sj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=dn(gu(n)))),n}function AA(n,e){return(n.flags&(e?8:16))!==0}var oy=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function fv(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Aj(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),h=e[o],p=fv(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let m=n.at(s),v=e[u],E=fv(s,m,u,v,t);if(E!==0){E<0&&n.updateValue(s,v),s--,u--;continue}let N=t(o,l),M=t(s,m),B=t(o,h);if(Object.is(B,M)){let J=t(u,v);Object.is(J,N)?(n.swap(o,s),n.updateValue(s,v),u--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new Ch,i??=YD(n,o,s,t),sy(n,r,o,B))n.updateValue(o,h),o++,s++;else if(i.has(B))r.set(N,n.detach(o)),s--;else{let J=n.create(o,e[o]);n.attach(o,J),o++,s++}}for(;o<=u;)QD(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,m=fv(o,h,o,p,t);if(m!==0)m<0&&n.updateValue(o,p),o++,l=u.next();else{r??=new Ch,i??=YD(n,o,s,t);let v=t(o,p);if(sy(n,r,o,v))n.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(v))n.attach(o,n.create(o,p)),o++,s++,l=u.next();else{let E=t(o,h);r.set(E,n.detach(o)),s--}}}for(;!l.done;)QD(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function sy(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function QD(n,e,t,r,i){if(sy(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function YD(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Ch=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function On(n,e){qi("NgControlFlow");let t=me(),r=ua(),i=t[r]!==En?t[r]:-1,o=i!==-1?Dh(t,tn+i):void 0,s=0;if(Pn(t,r,n)){let a=fe(null);try{if(o!==void 0&&rA(o,s),n!==-1){let u=tn+n,l=Dh(t,u),h=ly(t[ue],u),p=au(l,h.tView.ssrId),m=Fh(t,h,e,{dehydratedView:p});Uh(l,m,s,iu(h,p))}}finally{fe(a)}}else if(o!==void 0){let a=nA(o,s);a!==void 0&&(a[It]=e)}}var ay=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-jt}};function RA(n,e){return e}var cy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Cr(n,e,t,r,i,o,s,a,u,l,h,p,m){qi("NgControlFlow");let v=me(),E=Dt(),N=u!==void 0,M=me(),B=a?s.bind(M[Qn][It]):s,J=new cy(N,B);M[tn+n]=J,ey(v,E,n+1,e,t,r,i,na(E.consts,o)),N&&ey(v,E,n+2,u,l,h,p,na(E.consts,m))}var uy=class extends oy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-jt}at(e){return this.getLView(e)[It].$implicit}attach(e,t){let r=t[eu];this.needsIndexUpdate||=e!==this.length,Uh(this.lContainer,t,e,iu(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Rj(this.lContainer,e)}create(e,t){let r=au(this.lContainer,this.templateTNode.tView.ssrId),i=Fh(this.hostLView,this.templateTNode,new ay(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Lh(e[ue],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[It].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[It].$index=e}getLView(e){return Mj(this.lContainer,e)}};function Dr(n){let e=fe(null),t=ai();try{let r=me(),i=r[ue],o=r[t],s=t+1,a=Dh(r,s);if(o.liveCollection===void 0){let l=ly(i,s);o.liveCollection=new uy(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(Aj(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=ua(),h=u.length===0;if(Pn(r,l,h)){let p=t+2,m=Dh(r,p);if(h){let v=ly(i,p),E=au(m,v.tView.ssrId),N=Fh(r,v,void 0,{dehydratedView:E});Uh(m,N,0,iu(v,E))}else rA(m,0)}}}finally{fe(e)}}function Dh(n,e){return n[e]}function Rj(n,e){return ou(n,e)}function Mj(n,e){return nA(n,e)}function ly(n,e){return Ty(n,e)}function A(n,e,t,r){let i=me(),o=Dt(),s=tn+n,a=i[pt],u=o.firstCreatePass?uA(s,o,i,e,HS,UT(),t,r):o.data[s],l=xj(o,i,u,a,e,n);i[s]=l;let h=Dy(u);return fu(u,!0),FS(a,l,u),!zS(u)&&Oy()&&r_(o,i,l,u),(bL()===0||h)&&pu(l,i),CL(),h&&(Jy(o,i,u),AS(o,u,i)),r!==null&&BS(i,u),A}function S(){let n=nn();BT()?ML():(n=n.parent,fu(n,!1));let e=n;SL(e)&&AL(),DL();let t=Dt();return t.firstCreatePass&&lA(t,e),e.classesWithoutHost!=null&&$L(e)&&iy(t,e,me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&HL(e)&&iy(t,e,me(),e.stylesWithoutHost,!1),S}function K(n,e,t,r){return A(n,e,t,r),S(),K}var xj=(n,e,t,r,i,o)=>(Fy(!0),kS(r,i,UL()));function ut(){return me()}var ko=void 0;function Nj(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Pj=["en",[["a","p"],["AM","PM"],ko],[["AM","PM"],ko,ko],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ko,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ko,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ko,"{1} 'at' {0}",ko],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Nj],pv={};function Fn(n){let e=kj(n),t=ZD(e);if(t)return t;let r=e.split("-")[0];if(t=ZD(r),t)return t;if(r==="en")return Pj;throw new W(701,!1)}function ZD(n){return n in pv||(pv[n]=Oo.ng&&Oo.ng.common&&Oo.ng.common.locales&&Oo.ng.common.locales[n]),pv[n]}var lt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(lt||{});function kj(n){return n.toLowerCase().replace(/_/g,"-")}var Th="en-US";var Oj=Th;function Fj(n){typeof n=="string"&&(Oj=n.toLowerCase().replace(/_/g,"-"))}function JD(n,e,t){return function r(i){if(i===Function)return t;let o=ca(n)?yr(n.index,e):e;o_(o,5);let s=e[It],a=XD(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=XD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function XD(n,e,t,r){let i=fe(null);try{return Oe(6,e,t),t(r)!==!1}catch(o){return Lj(n,o),!1}finally{Oe(7,e,t),fe(i)}}function Lj(n,e){let t=n[ea],r=t?t.get(_r,null):null;r&&r.handleError(e)}function eT(n,e,t,r,i,o){let s=e[t],a=e[ue],l=a.data[t].outputs[r],h=s[l],p=a.firstCreatePass?Ry(a):null,m=Ay(e),v=h.subscribe(o),E=m.length;m.push(o,v),p&&p.push(i,n.index,E,-(E+1))}var Vj=(n,e,t)=>{};function ee(n,e,t,r){let i=me(),o=Dt(),s=nn();return MA(o,i,i[pt],s,n,e,r),ee}function Uj(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ch],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function MA(n,e,t,r,i,o,s){let a=Dy(r),l=n.firstCreatePass?Ry(n):null,h=Ay(e),p=!0;if(r.type&3||s){let m=Er(r,e),v=s?s(m):m,E=h.length,N=s?B=>s(vr(B[r.index])):r.index,M=null;if(!s&&a&&(M=Uj(n,e,i,r.index)),M!==null){let B=M.__ngLastListenerFn__||M;B.__ngNextListenerFn__=o,M.__ngLastListenerFn__=o,p=!1}else{o=JD(r,e,o),Vj(v,i,o);let B=t.listen(v,i,o);h.push(o,B),l&&l.push(i,N,E,E+1)}}else o=JD(r,e,o);if(p){let m=r.outputs?.[i],v=r.hostDirectiveOutputs?.[i];if(v&&v.length)for(let E=0;E<v.length;E+=2){let N=v[E],M=v[E+1];eT(r,e,N,M,i,o)}if(m&&m.length)for(let E of m)eT(r,e,E,i,i,o)}}function te(n=1){return VL(n)}function xA(n,e,t,r){MU(n,e,t,r)}function NA(n){let e=me(),t=Dt(),r=HT();xy(r+1);let i=c_(t,r);if(n.dirty&&yL(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=kU(e,r);n.reset(o,hV),n.notifyOnChanges()}return!0}return!1}function PA(){return AU(me(),HT())}function jj(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function O(n,e=""){let t=me(),r=Dt(),i=n+tn,o=r.firstCreatePass?a_(r,i,1,e,null):r.data[i],s=Bj(r,t,o,e,n);t[i]=s,Oy()&&r_(r,t,s,o),fu(o,!1)}var Bj=(n,e,t,r,i)=>(Fy(!0),WV(e[pt],r));function ze(n){return ke("",n,""),ze}function ke(n,e,t){let r=me(),i=oj(r,n,e,t);return i!==En&&kA(r,ai(),i),ke}function p_(n,e,t,r,i,o,s){let a=me(),u=sj(a,n,e,t,r,i,o,s);return u!==En&&kA(a,ai(),u),p_}function kA(n,e,t){let r=kT(e,n);KV(n[pt],r,t)}function g_(n,e,t){gS(e)&&(e=e());let r=me(),i=ua();if(Pn(r,i,e)){let o=Dt(),s=ky();$S(o,s,r,n,e,r[pt],t,!1)}return g_}function OA(n,e){let t=gS(n);return t&&n.set(e),t}function m_(n,e){let t=me(),r=Dt(),i=nn();return MA(r,t,t[pt],i,n,e),m_}function $j(n,e,t){let r=Dt();if(r.firstCreatePass){let i=mr(n);dy(t,r.data,r.blueprint,i,!0),dy(e,r.data,r.blueprint,i,!1)}}function dy(n,e,t,r,i){if(n=en(n),Array.isArray(n))for(let o=0;o<n.length;o++)dy(n[o],e,t,r,i);else{let o=Dt(),s=me(),a=nn(),u=Xs(n)?n:en(n.provide),l=DT(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Xs(n)||!n.multi){let v=new Go(l,i,L),E=mv(u,e,i?h:h+m,p);E===-1?(Rv(gh(a,s),o,u),gv(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[E]=v,s[E]=v)}else{let v=mv(u,e,h+m,p),E=mv(u,e,h,h+m),N=v>=0&&t[v],M=E>=0&&t[E];if(i&&!M||!i&&!N){Rv(gh(a,s),o,u);let B=qj(i?zj:Hj,t.length,i,r,l);!i&&M&&(t[E].providerFactory=B),gv(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(B),s.push(B)}else{let B=FA(t[i?E:v],l,!i&&r);gv(o,n,v>-1?v:E,B)}!i&&r&&M&&t[E].componentProviders++}}}function gv(n,e,t,r){let i=Xs(e),o=sL(e);if(i||o){let u=(o?en(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function FA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function mv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Hj(n,e,t,r){return hy(this.multi,[])}function zj(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ru(t,t[ue],this.providerFactory.index,r);o=a.slice(0,s),hy(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],hy(i,o);return o}function hy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function qj(n,e,t,r,i){let o=new Go(n,t,L);return o.multi=[],o.index=e,o.componentProviders=0,FA(o,i,r&&!t),o}function Xn(n,e=[]){return t=>{t.providersResolver=(r,i)=>$j(r,i?i(n):n,e)}}function Hh(n,e,t){let r=Ph()+n,i=me();return i[r]===En?d_(i,r,t?e.call(t):e()):QU(i,r)}function Ln(n,e,t,r){return VA(me(),Ph(),n,e,t,r)}function LA(n,e){let t=n[e];return t===En?void 0:t}function VA(n,e,t,r,i,o){let s=e+t;return Pn(n,s,i)?d_(n,s+1,o?r.call(o,i):r(i)):LA(n,s+1)}function Gj(n,e,t,r,i,o,s){let a=e+t;return vA(n,a,i,o)?d_(n,a+2,s?r.call(s,i,o):r(i,o)):LA(n,a+2)}function er(n,e){let t=Dt(),r,i=n+tn;t.firstCreatePass?(r=Wj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Uo(r.type,!0)),s,a=un(L);try{let u=ph(!1),l=o();return ph(u),jj(t,me(),i,l),l}finally{un(a)}}function Wj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ki(n,e,t){let r=n+tn,i=me(),o=OT(i,r);return UA(i,r)?VA(i,Ph(),e,o.transform,t,o):o.transform(t)}function v_(n,e,t,r){let i=n+tn,o=me(),s=OT(o,i);return UA(o,i)?Gj(o,Ph(),e,s.transform,t,r,s):s.transform(t,r)}function UA(n,e){return n[ue].data[e].pure}var Zo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},jA=new Zo("19.2.8"),fy=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},BA=(()=>{class n{compileModuleSync(t){return new Xv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=IT(t),o=NS(i.declarations).reduce((s,a)=>{let u=Bo(a);return u&&s.push(new ia(u)),s},[]);return new fy(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Kj=(()=>{class n{zone=F(Te);changeDetectionScheduler=F(Wo);applicationRef=F(Qo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qj=new z("",{factory:()=>!1});function $A({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Te(ie(U({},zA()),{scheduleInRootZone:t})),[{provide:Te,useFactory:n},{provide:Jc,multi:!0,useFactory:()=>{let r=F(Kj,{optional:!0});return()=>r.initialize()}},{provide:Jc,multi:!0,useFactory:()=>{let r=F(Yj);return()=>{r.initialize()}}},e===!0?{provide:lS,useValue:!0}:[],{provide:dS,useValue:t??uS}]}function HA(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=$A({ngZoneFactory:()=>{let i=zA(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&qi("NgZone_CoalesceEvent"),new Te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return kn([{provide:Qj,useValue:!0},{provide:Uy,useValue:!1},r])}function zA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Yj=(()=>{class n{subscription=new tt;initialized=!1;zone=F(Te);pendingTasks=F(Xo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Te.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Te.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Zj=(()=>{class n{appRef=F(Qo);taskService=F(Xo);ngZone=F(Te);zonelessEnabled=F(Uy);tracing=F(fa,{optional:!0});disableScheduling=F(lS,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new tt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(vh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(dS,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof kv||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?xD:hS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(vh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,xD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jj(){return typeof $localize<"u"&&$localize.locale||Th}var zh=new z("",{providedIn:"root",factory:()=>F(zh,pe.Optional|pe.SkipSelf)||Jj()});var py=new z(""),Xj=new z("");function Kc(n){return!n.moduleRef}function eB(n){let e=Kc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Te);return t.run(()=>{Kc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(_r,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Kc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(py);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(py);s.add(o),n.moduleRef.onDestroy(()=>{th(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return nB(r,t,()=>{let o=e.get(IA);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(zh,Th);if(Fj(s||Th),!e.get(Xj,!0))return Kc(n)?e.get(Qo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Kc(n)){let u=e.get(Qo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return tB(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function tB(n,e){let t=n.injector.get(Qo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new W(-403,!1);e.push(n)}function nB(n,e,t){try{let r=t();return Wi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var nh=null;function rB(n=[],e){return rt.create({name:e,providers:[{provide:Mh,useValue:"platform"},{provide:py,useValue:new Set([()=>nh=null])},...n]})}function iB(n=[]){if(nh)return nh;let e=rB(n);return nh=e,tj(),oB(e),e}function oB(n){let e=n.get(Hy,null);Ht(n,()=>{e?.forEach(t=>t())})}function y_(){return!1}var ui=(()=>{class n{static __NG_ELEMENT_ID__=sB}return n})();function sB(n){return aB(nn(),me(),(n&16)===16)}function aB(n,e,t){if(ca(n)&&!t){let r=yr(n.index,e);return new su(r,r)}else if(n.type&175){let r=e[Qn];return new su(r,e)}return null}var gy=class{constructor(){}supports(e){return mA(e)}create(e){return new my(e)}},cB=(n,e)=>e,my=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||cB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<tT(r,i,o)?t:r,a=tT(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,E=v+m;h<=E&&E<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!mA(e))throw new W(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,WU(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new vy(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Sh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},vy=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},yy=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Sh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new yy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function tT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function nT(){return new __([new gy])}var __=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:nT});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||nT()),deps:[[n,new QF,new Ct]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new W(901,!1)}}return n})();function qA(n){Oe(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=iB(r),o=[$A({}),{provide:Wo,useExisting:Zj},...t||[]],s=new Eh({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return eB({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Oe(9)}}function es(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Vn(n){return Vm(n)}function pa(n,e){return km(n,e?.equal)}var rT=class{[Mn];constructor(e){this[Mn]=e}destroy(){this[Mn].destroy()}};function GA(n){let e=Bo(n);if(!e)return null;let t=new ia(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var St=new z("");var QA=null;function Un(){return QA}function w_(n){QA??=n}var vu=class{},yu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(YA),providedIn:"platform"})}return n})(),I_=new z(""),YA=(()=>{class n extends yu{_location;_history;_doc=F(St);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Un().getBaseHref(this._doc)}onPopState(t){let r=Un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Un().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function qh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function WA(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function tr(n){return n&&n[0]!=="?"?`?${n}`:n}var nr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(Wh),providedIn:"root"})}return n})(),Gh=new z(""),Wh=(()=>{class n extends nr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(St).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+tr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+tr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+tr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Z(yu),Z(Gh,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Qi=(()=>{class n{_subject=new at;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=dB(WA(KA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tr(r))}normalize(t){return n.stripTrailingSlash(lB(this._basePath,KA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=tr;static joinWithSlash=qh;static stripTrailingSlash=WA;static \u0275fac=function(r){return new(r||n)(Z(nr))};static \u0275prov=H({token:n,factory:()=>uB(),providedIn:"root"})}return n})();function uB(){return new Qi(Z(nr))}function lB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function KA(n){return n.replace(/\/index.html$/,"")}function dB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var A_=(()=>{class n extends nr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=qh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+tr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+tr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Z(yu),Z(Gh,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var zt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(zt||{}),Fe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Fe||{}),fn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(fn||{}),di={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function tR(n){return Fn(n)[lt.LocaleId]}function nR(n,e,t){let r=Fn(n),i=[r[lt.DayPeriodsFormat],r[lt.DayPeriodsStandalone]],o=jn(i,e);return jn(o,t)}function rR(n,e,t){let r=Fn(n),i=[r[lt.DaysFormat],r[lt.DaysStandalone]],o=jn(i,e);return jn(o,t)}function iR(n,e,t){let r=Fn(n),i=[r[lt.MonthsFormat],r[lt.MonthsStandalone]],o=jn(i,e);return jn(o,t)}function oR(n,e){let r=Fn(n)[lt.Eras];return jn(r,e)}function _u(n,e){let t=Fn(n);return jn(t[lt.DateFormat],e)}function wu(n,e){let t=Fn(n);return jn(t[lt.TimeFormat],e)}function Iu(n,e){let r=Fn(n)[lt.DateTimeFormat];return jn(r,e)}function Eu(n,e){let t=Fn(n),r=t[lt.NumberSymbols][e];if(typeof r>"u"){if(e===di.CurrencyDecimal)return t[lt.NumberSymbols][di.Decimal];if(e===di.CurrencyGroup)return t[lt.NumberSymbols][di.Group]}return r}function sR(n){if(!n[lt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[lt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function aR(n){let e=Fn(n);return sR(e),(e[lt.ExtraData][2]||[]).map(r=>typeof r=="string"?E_(r):[E_(r[0]),E_(r[1])])}function cR(n,e,t){let r=Fn(n);sR(r);let i=[r[lt.ExtraData][0],r[lt.ExtraData][1]],o=jn(i,e)||[];return jn(o,t)||[]}function jn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function E_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var hB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Kh={},fB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function uR(n,e,t,r){let i=EB(n);e=li(t,e)||e;let s=[],a;for(;e;)if(a=fB.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=dR(r,u),i=IB(i,r));let l="";return s.forEach(h=>{let p=_B(h);l+=p?p(i,t,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Xh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function li(n,e){let t=tR(n);if(Kh[t]??={},Kh[t][e])return Kh[t][e];let r="";switch(e){case"shortDate":r=_u(n,fn.Short);break;case"mediumDate":r=_u(n,fn.Medium);break;case"longDate":r=_u(n,fn.Long);break;case"fullDate":r=_u(n,fn.Full);break;case"shortTime":r=wu(n,fn.Short);break;case"mediumTime":r=wu(n,fn.Medium);break;case"longTime":r=wu(n,fn.Long);break;case"fullTime":r=wu(n,fn.Full);break;case"short":let i=li(n,"shortTime"),o=li(n,"shortDate");r=Qh(Iu(n,fn.Short),[i,o]);break;case"medium":let s=li(n,"mediumTime"),a=li(n,"mediumDate");r=Qh(Iu(n,fn.Medium),[s,a]);break;case"long":let u=li(n,"longTime"),l=li(n,"longDate");r=Qh(Iu(n,fn.Long),[u,l]);break;case"full":let h=li(n,"fullTime"),p=li(n,"fullDate");r=Qh(Iu(n,fn.Full),[h,p]);break}return r&&(Kh[t][e]=r),r}function Qh(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function rr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function pB(n,e){return rr(n,3).substring(0,e)}function gt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=gB(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return pB(a,e);let u=Eu(s,di.MinusSign);return rr(a,e,u,r,i)}}function gB(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Ge(n,e,t=zt.Format,r=!1){return function(i,o){return mB(i,o,n,e,t,r)}}function mB(n,e,t,r,i,o){switch(t){case 2:return iR(e,i,r)[n.getMonth()];case 1:return rR(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=aR(e),h=cR(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[v,E]=m,N=s>=v.hours&&a>=v.minutes,M=s<E.hours||s===E.hours&&a<E.minutes;if(v.hours<E.hours){if(N&&M)return!0}else if(N||M)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return nR(e,i,r)[s<12?0:1];case 3:return oR(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Yh(n){return function(e,t,r){let i=-1*r,o=Eu(t,di.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+rr(s,2,o)+rr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+rr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+rr(s,2,o)+":"+rr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+rr(s,2,o)+":"+rr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var vB=0,Jh=4;function yB(n){let e=Xh(n,vB,1).getDay();return Xh(n,0,1+(e<=Jh?Jh:Jh+7)-e)}function lR(n){let e=n.getDay(),t=e===0?-3:Jh-e;return Xh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function b_(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=lR(t),s=yB(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return rr(i,n,Eu(r,di.MinusSign))}}function Zh(n,e=!1){return function(t,r){let o=lR(t).getFullYear();return rr(o,n,Eu(r,di.MinusSign),e)}}var C_={};function _B(n){if(C_[n])return C_[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ge(3,Fe.Abbreviated);break;case"GGGG":e=Ge(3,Fe.Wide);break;case"GGGGG":e=Ge(3,Fe.Narrow);break;case"y":e=gt(0,1,0,!1,!0);break;case"yy":e=gt(0,2,0,!0,!0);break;case"yyy":e=gt(0,3,0,!1,!0);break;case"yyyy":e=gt(0,4,0,!1,!0);break;case"Y":e=Zh(1);break;case"YY":e=Zh(2,!0);break;case"YYY":e=Zh(3);break;case"YYYY":e=Zh(4);break;case"M":case"L":e=gt(1,1,1);break;case"MM":case"LL":e=gt(1,2,1);break;case"MMM":e=Ge(2,Fe.Abbreviated);break;case"MMMM":e=Ge(2,Fe.Wide);break;case"MMMMM":e=Ge(2,Fe.Narrow);break;case"LLL":e=Ge(2,Fe.Abbreviated,zt.Standalone);break;case"LLLL":e=Ge(2,Fe.Wide,zt.Standalone);break;case"LLLLL":e=Ge(2,Fe.Narrow,zt.Standalone);break;case"w":e=b_(1);break;case"ww":e=b_(2);break;case"W":e=b_(1,!0);break;case"d":e=gt(2,1);break;case"dd":e=gt(2,2);break;case"c":case"cc":e=gt(7,1);break;case"ccc":e=Ge(1,Fe.Abbreviated,zt.Standalone);break;case"cccc":e=Ge(1,Fe.Wide,zt.Standalone);break;case"ccccc":e=Ge(1,Fe.Narrow,zt.Standalone);break;case"cccccc":e=Ge(1,Fe.Short,zt.Standalone);break;case"E":case"EE":case"EEE":e=Ge(1,Fe.Abbreviated);break;case"EEEE":e=Ge(1,Fe.Wide);break;case"EEEEE":e=Ge(1,Fe.Narrow);break;case"EEEEEE":e=Ge(1,Fe.Short);break;case"a":case"aa":case"aaa":e=Ge(0,Fe.Abbreviated);break;case"aaaa":e=Ge(0,Fe.Wide);break;case"aaaaa":e=Ge(0,Fe.Narrow);break;case"b":case"bb":case"bbb":e=Ge(0,Fe.Abbreviated,zt.Standalone,!0);break;case"bbbb":e=Ge(0,Fe.Wide,zt.Standalone,!0);break;case"bbbbb":e=Ge(0,Fe.Narrow,zt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ge(0,Fe.Abbreviated,zt.Format,!0);break;case"BBBB":e=Ge(0,Fe.Wide,zt.Format,!0);break;case"BBBBB":e=Ge(0,Fe.Narrow,zt.Format,!0);break;case"h":e=gt(3,1,-12);break;case"hh":e=gt(3,2,-12);break;case"H":e=gt(3,1);break;case"HH":e=gt(3,2);break;case"m":e=gt(4,1);break;case"mm":e=gt(4,2);break;case"s":e=gt(5,1);break;case"ss":e=gt(5,2);break;case"S":e=gt(6,1);break;case"SS":e=gt(6,2);break;case"SSS":e=gt(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Yh(0);break;case"ZZZZZ":e=Yh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Yh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Yh(2);break;default:return null}return C_[n]=e,e}function dR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function wB(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function IB(n,e,t){let i=n.getTimezoneOffset(),o=dR(e,i);return wB(n,-1*(o-i))}function EB(n){if(ZA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Xh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(hB))return bB(r)}let e=new Date(n);if(!ZA(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function bB(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function ZA(n){return n instanceof Date&&!isNaN(n.valueOf())}var D_=/\s+/,JA=[],R_=(()=>{class n{_ngEl;_renderer;initialClasses=JA;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(D_):JA}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(D_):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(D_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(L(In),L(ci))};static \u0275dir=Qe({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var ef=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ga=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new ef(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),XA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);XA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(L(Gi),L(Ko),L(__))};static \u0275dir=Qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function XA(n,e){n.context.$implicit=e.item}var hi=(()=>{class n{_viewContainer;_context=new tf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){eR(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){eR(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(L(Gi),L(Ko))};static \u0275dir=Qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),tf=class{$implicit=null;ngIf=null};function eR(n,e){if(n&&!n.createEmbeddedView)throw new W(2020,!1)}function hR(n,e){return new W(2100,!1)}var T_=class{createSubscription(e,t){return Vn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Vn(()=>e.unsubscribe())}},S_=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},CB=new S_,DB=new T_,fi=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Wi(t))return CB;if(h_(t))return DB;throw hR(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(L(ui,16))};static \u0275pipe=l_({name:"async",type:n,pure:!1})}return n})();var TB="mediumDate",fR=new z(""),pR=new z(""),M_=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??TB,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return uR(t,s,o||this.locale,a)}catch(s){throw hR(n,s.message)}}static \u0275fac=function(r){return new(r||n)(L(zh,16),L(fR,24),L(pR,24))};static \u0275pipe=l_({name:"date",type:n,pure:!0})}return n})();var mt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Ir({})}return n})();function x_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var N_="browser",gR="server";function nf(n){return n===gR}var bu=class{};var mR=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new P_(F(St),window)})}return n})(),P_=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=SB(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function SB(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var sf=new z(""),L_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Z(sf),Z(Te))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Cu=class{_doc;constructor(e){this._doc=e}manager},rf="ng-app-id";function vR(n){for(let e of n)e.remove()}function yR(n,e){let t=e.createElement("style");return t.textContent=n,t}function AB(n,e,t,r){let i=n.head?.querySelectorAll(`style[${rf}="${e}"],link[${rf}="${e}"]`);if(i)for(let o of i)o.removeAttribute(rf),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function O_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var V_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=nf(o),AB(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,yR);r?.forEach(i=>this.addUsage(i,this.external,O_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(vR(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])vR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,yR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,O_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(rf,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Z(St),Z($y),Z(zy,8),Z(zi))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),k_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},U_=/%COMP%/g;var wR="%COMP%",RB=`_nghost-${wR}`,MB=`_ngcontent-${wR}`,xB=!0,NB=new z("",{providedIn:"root",factory:()=>xB});function PB(n){return MB.replace(U_,n)}function kB(n){return RB.replace(U_,n)}function IR(n,e){return e.map(t=>t.replace(U_,n))}var j_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=nf(a),this.defaultRenderer=new Du(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===wr.ShadowDom&&(r=ie(U({},r),{encapsulation:wr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof of?i.applyToHost(t):i instanceof Tu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case wr.Emulated:o=new of(u,l,r,this.appId,h,s,a,p,m);break;case wr.ShadowDom:return new F_(u,l,t,r,s,a,this.nonce,p,m);default:o=new Tu(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Z(L_),Z(V_),Z($y),Z(NB),Z(St),Z(zi),Z(Te),Z(zy),Z(fa,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Du=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(k_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(_R(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(_R(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=k_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=k_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ii.DashCase|ii.Important)?e.style.setProperty(t,r,i&ii.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ii.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Un().getGlobalEventTarget(this.doc,e),!e))throw new W(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function _R(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var F_=class extends Du{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=IR(i.id,h);for(let m of h){let v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=m,this.shadowRoot.appendChild(v)}let p=i.getExternalStyles?.();if(p)for(let m of p){let v=O_(m,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Tu=class extends Du{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?IR(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},of=class extends Tu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=PB(h),this.hostAttr=kB(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var af=class n extends vu{supportsDOMEvents=!0;static makeCurrent(){w_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=OB();return t==null?null:FB(t)}resetBaseElement(){Su=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return x_(document.cookie,e)}},Su=null;function OB(){return Su=Su||document.querySelector("base"),Su?Su.getAttribute("href"):null}function FB(n){return new URL(n,document.baseURI).pathname}var LB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),bR=(()=>{class n extends Cu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Z(St))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),ER=["alt","control","meta","shift"],VB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},UB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},CR=(()=>{class n extends Cu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Un().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),ER.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=VB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ER.forEach(s=>{if(s!==i){let a=UB[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Z(St))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function B_(n,e){return qA(U({rootComponent:n},jB(e)))}function jB(n){return{appProviders:[...qB,...n?.providers??[]],platformProviders:zB}}function BB(){af.makeCurrent()}function $B(){return new _r}function HB(){return ES(document),document}var zB=[{provide:zi,useValue:N_},{provide:Hy,useValue:BB,multi:!0},{provide:St,useFactory:HB}];var qB=[{provide:Mh,useValue:"root"},{provide:_r,useFactory:$B},{provide:sf,useClass:bR,multi:!0,deps:[St]},{provide:sf,useClass:CR,multi:!0,deps:[St]},j_,V_,L_,{provide:ra,useExisting:j_},{provide:bu,useClass:LB},[]];var DR=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Z(St))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var de="primary",ju=Symbol("RouteTitle"),G_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function rs(n){return new G_(n)}function PR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function WB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sr(n[t],e[t]))return!1;return!0}function Sr(n,e){let t=n?W_(n):void 0,r=e?W_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!kR(n[i],e[i]))return!1;return!0}function W_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function kR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function OR(n){return n.length>0?n[n.length-1]:null}function eo(n){return Zm(n)?n:Wi(n)?Ae(Promise.resolve(n)):Q(n)}var KB={exact:LR,subset:VR},FR={exact:QB,subset:YB,ignored:()=>!0};function TR(n,e,t){return KB[t.paths](n.root,e.root,t.matrixParams)&&FR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function QB(n,e){return Sr(n,e)}function LR(n,e,t){if(!ts(n.segments,e.segments)||!lf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!LR(n.children[r],e.children[r],t))return!1;return!0}function YB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kR(n[t],e[t]))}function VR(n,e,t){return UR(n,e,e.segments,t)}function UR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ts(i,t)||e.hasChildren()||!lf(i,t,r))}else if(n.segments.length===t.length){if(!ts(n.segments,t)||!lf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!VR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!ts(n.segments,i)||!lf(n.segments,i,r)||!n.children[de]?!1:UR(n.children[de],e,o,r)}}function lf(n,e,t){return e.every((r,i)=>FR[t](n[i].parameters,r.parameters))}var Rr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Re([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=rs(this.queryParams),this._queryParamMap}toString(){return XB.serialize(this)}},Re=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return df(this)}},Yi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=rs(this.parameters),this._parameterMap}toString(){return BR(this)}};function ZB(n,e){return ts(n,e)&&n.every((t,r)=>Sr(t.parameters,e[r].parameters))}function ts(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function JB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===de&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==de&&(t=t.concat(e(i,r)))}),t}var is=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new Zi,providedIn:"root"})}return n})(),Zi=class{parse(e){let t=new Q_(e);return new Rr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Au(e.root,!0)}`,r=n$(e.queryParams),i=typeof e.fragment=="string"?`#${e$(e.fragment)}`:"";return`${t}${r}${i}`}},XB=new Zi;function df(n){return n.segments.map(e=>BR(e)).join("/")}function Au(n,e){if(!n.hasChildren())return df(n);if(e){let t=n.children[de]?Au(n.children[de],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==de&&r.push(`${i}:${Au(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=JB(n,(r,i)=>i===de?[Au(n.children[de],!1)]:[`${i}:${Au(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[de]!=null?`${df(n)}/${t[0]}`:`${df(n)}/(${t.join("//")})`}}function jR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cf(n){return jR(n).replace(/%3B/gi,";")}function e$(n){return encodeURI(n)}function K_(n){return jR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hf(n){return decodeURIComponent(n)}function SR(n){return hf(n.replace(/\+/g,"%20"))}function BR(n){return`${K_(n.path)}${t$(n.parameters)}`}function t$(n){return Object.entries(n).map(([e,t])=>`;${K_(e)}=${K_(t)}`).join("")}function n$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${cf(t)}=${cf(i)}`).join("&"):`${cf(t)}=${cf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var r$=/^[^\/()?;#]+/;function $_(n){let e=n.match(r$);return e?e[0]:""}var i$=/^[^\/()?;=#]+/;function o$(n){let e=n.match(i$);return e?e[0]:""}var s$=/^[^=?&#]+/;function a$(n){let e=n.match(s$);return e?e[0]:""}var c$=/^[^&#]+/;function u$(n){let e=n.match(c$);return e?e[0]:""}var Q_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[de]=new Re(e,t)),r}parseSegment(){let e=$_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new Yi(hf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=o$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=$_(this.remaining);i&&(r=i,this.capture(r))}e[hf(t)]=hf(r)}parseQueryParam(e){let t=a$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=u$(this.remaining);s&&(r=s,this.capture(r))}let i=SR(t),o=SR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=$_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=de);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[de]:new Re([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function $R(n){return n.segments.length>0?new Re([],{[de]:n}):n}function HR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=HR(i);if(r===de&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Re(n.segments,e);return l$(t)}function l$(n){if(n.numberOfChildren===1&&n.children[de]){let e=n.children[de];return new Re(n.segments.concat(e.segments),e.children)}return n}function Ji(n){return n instanceof Rr}function zR(n,e,t=null,r=null){let i=qR(n);return GR(i,e,t,r)}function qR(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Re(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=$R(r);return e??i}function GR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return H_(i,i,i,t,r);let o=d$(e);if(o.toRoot())return H_(i,i,new Re([],{}),t,r);let s=h$(o,i,n),a=s.processChildren?Mu(s.segmentGroup,s.index,o.commands):KR(s.segmentGroup,s.index,o.commands);return H_(i,s.segmentGroup,a,t,r)}function pf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Nu(n){return typeof n=="object"&&n!=null&&n.outlets}function H_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=WR(n,e,t);let a=$R(HR(s));return new Rr(a,o,i)}function WR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=WR(o,e,t)}),new Re(n.segments,r)}var gf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pf(r[0]))throw new W(4003,!1);let i=r.find(Nu);if(i&&i!==OR(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function d$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new gf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new gf(t,e,r)}var ya=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function h$(n,e,t){if(n.isAbsolute)return new ya(e,!0,0);if(!t)return new ya(e,!1,NaN);if(t.parent===null)return new ya(t,!0,0);let r=pf(n.commands[0])?0:1,i=t.segments.length-1+r;return f$(t,i,n.numberOfDoubleDots)}function f$(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new ya(r,!1,i-o)}function p$(n){return Nu(n[0])?n[0].outlets:{[de]:n}}function KR(n,e,t){if(n??=new Re([],{}),n.segments.length===0&&n.hasChildren())return Mu(n,e,t);let r=g$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Re(n.segments.slice(0,r.pathIndex),{});return o.children[de]=new Re(n.segments.slice(r.pathIndex),n.children),Mu(o,0,i)}else return r.match&&i.length===0?new Re(n.segments,{}):r.match&&!n.hasChildren()?Y_(n,e,t):r.match?Mu(n,0,i):Y_(n,e,t)}function Mu(n,e,t){if(t.length===0)return new Re(n.segments,{});{let r=p$(t),i={};if(Object.keys(r).some(o=>o!==de)&&n.children[de]&&n.numberOfChildren===1&&n.children[de].segments.length===0){let o=Mu(n.children[de],e,t);return new Re(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=KR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Re(n.segments,i)}}function g$(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Nu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!RR(u,l,s))return o;r+=2}else{if(!RR(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Y_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Nu(o)){let u=m$(o.outlets);return new Re(r,u)}if(i===0&&pf(t[0])){let u=n.segments[e];r.push(new Yi(u.path,AR(t[0]))),i++;continue}let s=Nu(o)?o.outlets[de]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&pf(a)?(r.push(new Yi(s,AR(a))),i+=2):(r.push(new Yi(s,{})),i++)}return new Re(r,{})}function m$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Y_(new Re([],{}),0,r))}),e}function AR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function RR(n,e,t){return n==t.path&&Sr(e,t.parameters)}var ff="imperative",Et=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Et||{}),Cn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Xi=class extends Cn{type=Et.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Dn=class extends Cn{urlAfterRedirects;type=Et.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},pn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(pn||{}),wa=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(wa||{}),Ar=class extends Cn{reason;code;type=Et.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mr=class extends Cn{reason;code;type=Et.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ia=class extends Cn{error;target;type=Et.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Pu=class extends Cn{urlAfterRedirects;state;type=Et.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mf=class extends Cn{urlAfterRedirects;state;type=Et.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vf=class extends Cn{urlAfterRedirects;state;shouldActivate;type=Et.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},yf=class extends Cn{urlAfterRedirects;state;type=Et.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_f=class extends Cn{urlAfterRedirects;state;type=Et.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wf=class{route;type=Et.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},If=class{route;type=Et.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ef=class{snapshot;type=Et.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bf=class{snapshot;type=Et.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cf=class{snapshot;type=Et.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Df=class{snapshot;type=Et.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ea=class{routerEvent;position;anchor;type=Et.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ku=class{},ba=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function v$(n,e){return n.providers&&!n._injector&&(n._injector=mu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ir(n){return n.outlet||de}function y$(n,e){let t=n.filter(r=>ir(r)===e);return t.push(...n.filter(r=>ir(r)!==e)),t}function Bu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Tf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Bu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new os(this.rootInjector)}},os=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Tf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Z(Bt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Z_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Z_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=J_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return J_(e,this._root).map(t=>t.value)}};function Z_(n,e){if(n===e.value)return e;for(let t of e.children){let r=Z_(n,t);if(r)return r}return null}function J_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=J_(n,t);if(r.length)return r.unshift(e),r}return[]}var bn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function va(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ou=class extends Sf{snapshot;constructor(e,t){super(e),this.snapshot=t,sw(this,e)}toString(){return this.snapshot.toString()}};function QR(n){let e=_$(n),t=new Ve([new Yi("",{})]),r=new Ve({}),i=new Ve({}),o=new Ve({}),s=new Ve(""),a=new qt(t,r,o,s,i,de,n,e.root);return a.snapshot=e.root,new Ou(new bn(a,[]),e)}function _$(n){let e={},t={},r={},i="",o=new ns([],e,r,i,t,de,n,null,{});return new Fu("",new bn(o,[]))}var qt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(oe(l=>l[ju]))??Q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>rs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>rs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Af(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),n.params),data:U(U({},e.data),n.data),resolve:U(U(U(U({},n.data),e.data),i?.data),n._resolvedData)}:r={params:U({},n.params),data:U({},n.data),resolve:U(U({},n.data),n._resolvedData??{})},i&&ZR(i)&&(r.resolve[ju]=i.title),r}var ns=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ju]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Fu=class extends Sf{url;constructor(e,t){super(t),this.url=e,sw(this,t)}toString(){return YR(this._root)}};function sw(n,e){e.value._routerState=n,e.children.forEach(t=>sw(n,t))}function YR(n){let e=n.children.length>0?` { ${n.children.map(YR).join(", ")} } `:"";return`${n.value}${e}`}function z_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Sr(e.params,t.params)||n.paramsSubject.next(t.params),WB(e.url,t.url)||n.urlSubject.next(t.url),Sr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function X_(n,e){let t=Sr(n.params,e.params)&&ZB(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||X_(n.parent,e.parent))}function ZR(n){return typeof n.title=="string"||n.title===null}var JR=new z(""),$u=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=de;activateEvents=new nt;deactivateEvents=new nt;attachEvents=new nt;detachEvents=new nt;routerOutletData=pS(void 0);parentContexts=F(os);location=F(Gi);changeDetector=F(ui);inputBinder=F(Hu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new ew(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Jn]})}return n})(),ew=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===qt?this.route:e===os?this.childContexts:e===JR?this.outletData:this.parent.get(e,t)}},Hu=new z(""),aw=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Po([r.queryParams,r.params,r.data]).pipe(xn(([o,s,a],u)=>(a=U(U(U({},o),s),a),u===0?Q(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=GA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function w$(n,e,t){let r=Lu(n,e._root,t?t._root:void 0);return new Ou(r,e)}function Lu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=I$(n,e,t);return new bn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Lu(n,a)),s}}let r=E$(e.value),i=e.children.map(o=>Lu(n,o));return new bn(r,i)}}function I$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Lu(n,r,i);return Lu(n,r)})}function E$(n){return new qt(new Ve(n.url),new Ve(n.params),new Ve(n.queryParams),new Ve(n.fragment),new Ve(n.data),n.outlet,n.component,n)}var Ca=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},XR="ngNavigationCancelingError";function Rf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ji(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=eM(!1,pn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function eM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[XR]=!0,t.cancellationCode=e,t}function b$(n){return tM(n)&&Ji(n.url)}function tM(n){return!!n&&n[XR]}var C$=(n,e,t,r)=>oe(i=>(new tw(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),tw=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),z_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=va(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=va(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=va(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=va(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Df(o.value.snapshot))}),e.children.length&&this.forwardEvent(new bf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(z_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),z_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Mf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_a=class{component;route;constructor(e,t){this.component=e,this.route=t}};function D$(n,e,t){let r=n._root,i=e?e._root:null;return Ru(r,i,t,[r.value])}function T$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ta(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!lT(n)?n:e.get(n):r}function Ru(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=va(e);return n.children.forEach(s=>{S$(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>xu(a,t.getContext(s),i)),i}function S$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=A$(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Mf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ru(n,e,a?a.children:null,r,i):Ru(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _a(a.outlet.component,s))}else s&&xu(e,a,i),i.canActivateChecks.push(new Mf(r)),o.component?Ru(n,null,a?a.children:null,r,i):Ru(n,null,t,r,i);return i}function A$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ts(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ts(n.url,e.url)||!Sr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!X_(n,e)||!Sr(n.queryParams,e.queryParams);case"paramsChange":default:return!X_(n,e)}}function xu(n,e,t){let r=va(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?xu(s,e.children.getContext(o),t):xu(s,null,t):xu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new _a(e.outlet.component,i)):t.canDeactivateChecks.push(new _a(null,i)):t.canDeactivateChecks.push(new _a(null,i))}function zu(n){return typeof n=="function"}function R$(n){return typeof n=="boolean"}function M$(n){return n&&zu(n.canLoad)}function x$(n){return n&&zu(n.canActivate)}function N$(n){return n&&zu(n.canActivateChild)}function P$(n){return n&&zu(n.canDeactivate)}function k$(n){return n&&zu(n.canMatch)}function nM(n){return n instanceof Xr||n?.name==="EmptyError"}var uf=Symbol("INITIAL_VALUE");function Da(){return xn(n=>Po(n.map(e=>e.pipe(ei(1),Wd(uf)))).pipe(oe(e=>{for(let t of e)if(t!==!0){if(t===uf)return uf;if(t===!1||O$(t))return t}return!0}),cn(e=>e!==uf),ei(1)))}function O$(n){return Ji(n)||n instanceof Ca}function F$(n,e){return ct(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Q(ie(U({},t),{guardsResult:!0})):L$(s,r,i,n).pipe(ct(a=>a&&R$(a)?V$(r,o,n,e):Q(a)),oe(a=>ie(U({},t),{guardsResult:a})))})}function L$(n,e,t,r){return Ae(n).pipe(ct(i=>H$(i.component,i.route,t,e,r)),ti(i=>i!==!0,!0))}function V$(n,e,t,r){return Ae(e).pipe(ji(i=>qs(j$(i.route.parent,r),U$(i.route,r),$$(n,i.path,t),B$(n,i.route,t))),ti(i=>i!==!0,!0))}function U$(n,e){return n!==null&&e&&e(new Cf(n)),Q(!0)}function j$(n,e){return n!==null&&e&&e(new Ef(n)),Q(!0)}function B$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(o=>zd(()=>{let s=Bu(e)??t,a=Ta(o,s),u=x$(a)?a.canActivate(e,n):Ht(s,()=>a(e,n));return eo(u).pipe(ti())}));return Q(i).pipe(Da())}function $$(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>T$(s)).filter(s=>s!==null).map(s=>zd(()=>{let a=s.guards.map(u=>{let l=Bu(s.node)??t,h=Ta(u,l),p=N$(h)?h.canActivateChild(r,n):Ht(l,()=>h(r,n));return eo(p).pipe(ti())});return Q(a).pipe(Da())}));return Q(o).pipe(Da())}function H$(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Q(!0);let s=o.map(a=>{let u=Bu(e)??i,l=Ta(a,u),h=P$(l)?l.canDeactivate(n,e,t,r):Ht(u,()=>l(n,e,t,r));return eo(h).pipe(ti())});return Q(s).pipe(Da())}function z$(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let o=i.map(s=>{let a=Ta(s,n),u=M$(a)?a.canLoad(e,t):Ht(n,()=>a(e,t));return eo(u)});return Q(o).pipe(Da(),rM(r))}function rM(n){return Dd(Pt(e=>{if(typeof e!="boolean")throw Rf(n,e)}),oe(e=>e===!0))}function q$(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let o=i.map(s=>{let a=Ta(s,n),u=k$(a)?a.canMatch(e,t):Ht(n,()=>a(e,t));return eo(u)});return Q(o).pipe(Da(),rM(r))}var Vu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Uu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ma(n){return zs(new Vu(n))}function G$(n){return zs(new W(4e3,!1))}function W$(n){return zs(eM(!1,pn.GuardRejected))}var nw=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[de])return G$(`${e.redirectTo}`);i=i.children[de]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:E,title:N}=i,M=Ht(o,()=>a({params:v,data:E,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(M instanceof Rr)throw new Uu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Uu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Rr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Re(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},rw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function K$(n,e,t,r,i){let o=iM(n,e,t);return o.matched?(r=v$(e,r),q$(r,e,t,i).pipe(oe(s=>s===!0?o:U({},rw)))):Q(o)}function iM(n,e,t){if(e.path==="**")return Q$(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?U({},rw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||PR)(t,n,e);if(!i)return U({},rw);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?U(U({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Q$(n){return{matched:!0,parameters:n.length>0?OR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function MR(n,e,t,r){return t.length>0&&J$(n,t,r)?{segmentGroup:new Re(e,Z$(r,new Re(t,n.children))),slicedSegments:[]}:t.length===0&&X$(n,t,r)?{segmentGroup:new Re(n.segments,Y$(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Re(n.segments,n.children),slicedSegments:t}}function Y$(n,e,t,r){let i={};for(let o of t)if(Nf(n,e,o)&&!r[ir(o)]){let s=new Re([],{});i[ir(o)]=s}return U(U({},r),i)}function Z$(n,e){let t={};t[de]=e;for(let r of n)if(r.path===""&&ir(r)!==de){let i=new Re([],{});t[ir(r)]=i}return t}function J$(n,e,t){return t.some(r=>Nf(n,e,r)&&ir(r)!==de)}function X$(n,e,t){return t.some(r=>Nf(n,e,r))}function Nf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function eH(n,e,t){return e.length===0&&!n.children[t]}var iw=class{};function tH(n,e,t,r,i,o,s="emptyOnly"){return new ow(n,e,t,r,i,s,o).recognize()}var nH=31,ow=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new nw(this.urlSerializer,this.urlTree)}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=MR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:t,rootSnapshot:r})=>{let i=new bn(r,t),o=new Fu("",i),s=zR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ns([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,de,t).pipe(oe(r=>({children:r,rootSnapshot:t})),Xt(r=>{if(r instanceof Uu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Vu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(oe(s=>s instanceof bn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ae(o).pipe(ji(s=>{let a=r.children[s],u=y$(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Gd((s,a)=>(s.push(...a),s)),Bi(null),ev(),ct(s=>{if(s===null)return ma(r);let a=oM(s);return rH(a),Q(a)}))}processSegment(e,t,r,i,o,s,a){return Ae(t).pipe(ji(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Xt(l=>{if(l instanceof Vu)return Q(null);throw l}))),ti(u=>!!u),Xt(u=>{if(nM(u))return eH(r,i,o)?Q(new iw):ma(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return ir(r)!==s&&(s===de||!Nf(i,o,r))?ma(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ma(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=iM(t,i,o);if(!u)return ma(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nH&&(this.allowRedirects=!1));let v=new ns(o,l,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,xR(i),ir(i),i.component??i._loadedComponent??null,i,NR(i)),E=Af(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(E.params),v.data=Object.freeze(E.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(ct(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=K$(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(xn(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(xn(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,E=new ns(m,p,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,xR(r),ir(r),r.component??r._loadedComponent??null,r,NR(r)),N=Af(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(N.params),E.data=Object.freeze(N.data);let{segmentGroup:M,slicedSegments:B}=MR(t,m,v,l);if(B.length===0&&M.hasChildren())return this.processChildren(h,l,M,E).pipe(oe(X=>new bn(E,X)));if(l.length===0&&B.length===0)return Q(new bn(E,[]));let J=ir(r)===o;return this.processSegment(h,l,M,B,J?de:o,!0,E).pipe(oe(X=>new bn(E,X instanceof bn?[X]:[])))}))):ma(t)))}getChildConfig(e,t,r){return t.children?Q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Q({routes:t._loadedRoutes,injector:t._loadedInjector}):z$(e,t,r,this.urlSerializer).pipe(ct(i=>i?this.configLoader.loadChildren(e,t).pipe(Pt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):W$(t))):Q({routes:[],injector:e})}};function rH(n){n.sort((e,t)=>e.value.outlet===de?-1:t.value.outlet===de?1:e.value.outlet.localeCompare(t.value.outlet))}function iH(n){let e=n.value.routeConfig;return e&&e.path===""}function oM(n){let e=[],t=new Set;for(let r of n){if(!iH(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=oM(r.children);e.push(new bn(r.value,i))}return e.filter(r=>!t.has(r))}function xR(n){return n.data||{}}function NR(n){return n.resolve||{}}function oH(n,e,t,r,i,o){return ct(s=>tH(n,e,t,r,s.extractedUrl,i,o).pipe(oe(({state:a,tree:u})=>ie(U({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function sH(n,e){return ct(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Q(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of sM(u))s.add(l);let a=0;return Ae(s).pipe(ji(u=>o.has(u)?aH(u,r,n,e):(u.data=Af(u,u.parent,n).resolve,Q(void 0))),Pt(()=>a++),Gs(1),ct(u=>a===s.size?Q(t):sn))})}function sM(n){let e=n.children.map(t=>sM(t)).flat();return[n,...e]}function aH(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!ZR(i)&&(o[ju]=i.title),cH(o,n,e,r).pipe(oe(s=>(n._resolvedData=s,n.data=Af(n,n.parent,t).resolve,null)))}function cH(n,e,t,r){let i=W_(n);if(i.length===0)return Q({});let o={};return Ae(i).pipe(ct(s=>uH(n[s],e,t,r).pipe(ti(),Pt(a=>{if(a instanceof Ca)throw Rf(new Zi,a);o[s]=a}))),Gs(1),oe(()=>o),Xt(s=>nM(s)?sn:zs(s)))}function uH(n,e,t,r){let i=Bu(e)??r,o=Ta(n,i),s=o.resolve?o.resolve(e,t):Ht(i,()=>o(e,t));return eo(s)}function q_(n){return xn(e=>{let t=n(e);return t?Ae(t).pipe(oe(()=>e)):Q(e)})}var cw=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===de);return r}getResolvedTitleForRoute(t){return t.data[ju]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(aM),providedIn:"root"})}return n})(),aM=(()=>{class n extends cw{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Z(DR))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ss=new z("",{providedIn:"root",factory:()=>({})}),uw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$e({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&K(0,"router-outlet")},dependencies:[$u],encapsulation:2})}return n})();function lw(n){let e=n.children&&n.children.map(lw),t=e?ie(U({},n),{children:e}):U({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==de&&(t.component=uw),t}var as=new z(""),Pf=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=F(BA);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=eo(t.loadComponent()).pipe(oe(uM),Pt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Wc(()=>{this.componentLoaders.delete(t)})),i=new js(r,()=>new at).pipe(Us());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=cM(r,this.compiler,t,this.onLoadEndListener).pipe(Wc(()=>{this.childrenLoaders.delete(r)})),s=new js(o,()=>new at).pipe(Us());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cM(n,e,t,r){return eo(n.loadChildren()).pipe(oe(uM),ct(i=>i instanceof u_||Array.isArray(i)?Q(i):Ae(e.compileModuleAsync(i))),oe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(as,[],{optional:!0,self:!0}).flat()),{routes:s.map(lw),injector:o}}))}function lH(n){return n&&typeof n=="object"&&"default"in n}function uM(n){return lH(n)?n.default:n}var kf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(dH),providedIn:"root"})}return n})(),dH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dw=new z(""),hw=new z("");function lM(n,e,t){let r=n.get(hw),i=n.get(St);return n.get(Te).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),hH(n))),{onViewTransitionCreated:u}=r;return u&&Ht(n,()=>u({transition:a,from:e,to:t})),s})}function hH(n){return new Promise(e=>{Gy({read:()=>setTimeout(e)},{injector:n})})}var fw=new z(""),Of=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new at;transitionAbortSubject=new at;configLoader=F(Pf);environmentInjector=F(Bt);destroyRef=F(la);urlSerializer=F(is);rootContexts=F(os);location=F(Qi);inputBindingEnabled=F(Hu,{optional:!0})!==null;titleStrategy=F(cw);options=F(ss,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=F(kf);createViewTransition=F(dw,{optional:!0});navigationErrorHandler=F(fw,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Q(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new wf(i)),r=i=>this.events.next(new If(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ie(U({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new Ve(null),this.transitions.pipe(cn(r=>r!==null),xn(r=>{let i=!1,o=!1;return Q(r).pipe(xn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",pn.SupersededByNewNavigation),sn;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ie(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new Mr(s.id,this.urlSerializer.serialize(s.rawUrl),l,wa.IgnoredSameUrlNavigation)),s.resolve(!1),sn}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Q(s).pipe(xn(l=>(this.events.next(new Xi(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?sn:Promise.resolve(l))),oH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Pt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=ie(U({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new Pu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:m,extras:v}=s,E=new Xi(l,this.urlSerializer.serialize(h),p,m);this.events.next(E);let N=QR(this.rootComponentType).snapshot;return this.currentTransition=r=ie(U({},s),{targetSnapshot:N,urlAfterRedirects:h,extras:ie(U({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Q(r)}else{let l="";return this.events.next(new Mr(s.id,this.urlSerializer.serialize(s.extractedUrl),l,wa.IgnoredByUrlHandlingStrategy)),s.resolve(!1),sn}}),Pt(s=>{let a=new mf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),oe(s=>(this.currentTransition=r=ie(U({},s),{guards:D$(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),F$(this.environmentInjector,s=>this.events.next(s)),Pt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Rf(this.urlSerializer,s.guardsResult);let a=new vf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),cn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",pn.GuardRejected),!1)),q_(s=>{if(s.guards.canActivateChecks.length!==0)return Q(s).pipe(Pt(a=>{let u=new yf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),xn(a=>{let u=!1;return Q(a).pipe(sH(this.paramsInheritanceStrategy,this.environmentInjector),Pt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",pn.NoDataFromResolver)}}))}),Pt(a=>{let u=new _f(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),q_(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(Pt(h=>{u.component=h}),oe(()=>{})));for(let h of u.children)l.push(...a(h));return l};return Po(a(s.targetSnapshot.root)).pipe(Bi(null),ei(1))}),q_(()=>this.afterPreactivation()),xn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Ae(u).pipe(oe(()=>r)):Q(r)}),oe(s=>{let a=w$(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ie(U({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Pt(()=>{this.events.next(new ku)}),C$(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),ei(1),Pt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Dn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),tv(this.transitionAbortSubject.pipe(Pt(s=>{throw s}))),Wc(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",pn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xt(s=>{if(this.destroyed)return r.resolve(!1),sn;if(o=!0,tM(s))this.events.next(new Ar(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),b$(s)?this.events.next(new ba(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ia(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=Ht(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Ca){let{message:l,cancellationCode:h}=Rf(this.urlSerializer,u);this.events.next(new Ar(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new ba(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return sn}))}))}cancelNavigationTransition(t,r,i){let o=new Ar(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fH(n){return n!==ff}var dM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(pH),providedIn:"root"})}return n})(),xf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},pH=(()=>{class n extends xf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jo(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hM=(()=>{class n{urlSerializer=F(is);options=F(ss,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=F(Qi);urlHandlingStrategy=F(kf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Rr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Rr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=QR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>F(gH),providedIn:"root"})}return n})(),gH=(()=>{class n extends hM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Xi?this.updateStateMemento():t instanceof Mr?this.commitTransition(r):t instanceof Pu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ku?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ar&&(t.code===pn.GuardRejected||t.code===pn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ia?this.restoreHistory(r,!0):t instanceof Dn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=U(U({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=U(U({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jo(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ff(n,e){n.events.pipe(cn(t=>t instanceof Dn||t instanceof Ar||t instanceof Ia||t instanceof Mr),oe(t=>t instanceof Dn||t instanceof Mr?0:(t instanceof Ar?t.code===pn.Redirect||t.code===pn.SupersededByNewNavigation:!1)?2:1),cn(t=>t!==2),ei(1)).subscribe(()=>{e()})}var mH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ke=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=F(yA);stateManager=F(hM);options=F(ss,{optional:!0})||{};pendingTasks=F(Xo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=F(Of);urlSerializer=F(is);location=F(Qi);urlHandlingStrategy=F(kf);_events=new at;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=F(dM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=F(as,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!F(Hu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new tt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ar&&r.code!==pn.Redirect&&r.code!==pn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Dn)this.navigated=!0;else if(r instanceof ba){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||fH(i.source)},s);this.scheduleNavigation(a,ff,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}_H(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ff,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=U({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(lw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=qR(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return GR(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ji(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ff,null,r)}navigate(t,r={skipLocationChange:!1}){return yH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=U({},mH):r===!1?i=U({},vH):i=r,Ji(t))return TR(this.currentUrlTree,t,i);let o=this.parseUrl(t);return TR(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Ff(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new W(4008,!1)}function _H(n){return!(n instanceof ku)&&!(n instanceof ba)}var Gt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new at;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Dn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ji(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:MS(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ji(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(L(Ke),L(qt),Vy("tabindex"),L(ci),L(In),L(nr))};static \u0275dir=Qe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ee("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&$h("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",es],skipLocationChange:[2,"skipLocationChange","skipLocationChange",es],replaceUrl:[2,"replaceUrl","replaceUrl",es],routerLink:"routerLink"},features:[Jn]})}return n})(),gw=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new nt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Dn&&this.update()})}ngAfterContentInit(){Q(this.links.changes,Q(null)).pipe(Ui()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ae(t).pipe(Ui()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=wH(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(L(Ke),L(In),L(ci),L(ui),L(Gt,8))};static \u0275dir=Qe({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&xA(o,Gt,5),r&2){let s;NA(s=PA())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Jn]})}return n})();function wH(n){return!!n.paths}var qu=class{};var fM=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(cn(t=>t instanceof Dn),ji(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=mu(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ae(i).pipe(Ui())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Q(null);let o=i.pipe(ct(s=>s===null?Q(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ae([o,s]).pipe(Ui())}else return o})}static \u0275fac=function(r){return new(r||n)(Z(Ke),Z(Bt),Z(qu),Z(Pf))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pM=new z(""),IH=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Dn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Mr&&t.code===wa.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ea&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ea(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){sA()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function mw(n,...e){return kn([{provide:as,multi:!0,useValue:n},[],{provide:qt,useFactory:gM,deps:[Ke]},{provide:Bh,multi:!0,useFactory:mM},e.map(t=>t.\u0275providers)])}function gM(n){return n.routerState.root}function Gu(n,e){return{\u0275kind:n,\u0275providers:e}}function mM(){let n=F(rt);return e=>{let t=n.get(Qo);if(e!==t.components[0])return;let r=n.get(Ke),i=n.get(vM);n.get(vw)===1&&r.initialNavigation(),n.get(wM,null,pe.Optional)?.setUpPreloading(),n.get(pM,null,pe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var vM=new z("",{factory:()=>new at}),vw=new z("",{providedIn:"root",factory:()=>1});function yM(){let n=[{provide:vw,useValue:0},f_(()=>{let e=F(rt);return e.get(I_,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Ke),o=e.get(vM);Ff(i,()=>{r(!0)}),e.get(Of).afterPreactivation=()=>(r(!0),o.closed?Q(void 0):o),i.initialNavigation()}))})];return Gu(2,n)}function _M(){let n=[f_(()=>{F(Ke).setUpLocationChangeListener()}),{provide:vw,useValue:2}];return Gu(3,n)}var wM=new z("");function IM(n){return Gu(0,[{provide:wM,useExisting:fM},{provide:qu,useExisting:n}])}function EM(){return Gu(8,[aw,{provide:Hu,useExisting:aw}])}function bM(n){qi("NgRouterViewTransitions");let e=[{provide:dw,useValue:lM},{provide:hw,useValue:U({skipNextTransition:!!n?.skipInitialTransition},n)}];return Gu(9,e)}var CM=[Qi,{provide:is,useClass:Zi},Ke,os,{provide:qt,useFactory:gM,deps:[Ke]},Pf,[]],rn=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[CM,[],{provide:as,multi:!0,useValue:t},[],r?.errorHandler?{provide:fw,useValue:r.errorHandler}:[],{provide:ss,useValue:r||{}},r?.useHash?bH():CH(),EH(),r?.preloadingStrategy?IM(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?DH(r):[],r?.bindToComponentInputs?EM().\u0275providers:[],r?.enableViewTransitions?bM().\u0275providers:[],TH()]}}static forChild(t){return{ngModule:n,providers:[{provide:as,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Ir({})}return n})();function EH(){return{provide:pM,useFactory:()=>{let n=F(mR),e=F(Te),t=F(ss),r=F(Of),i=F(is);return t.scrollOffset&&n.setOffset(t.scrollOffset),new IH(i,r,n,e,t)}}}function bH(){return{provide:nr,useClass:A_}}function CH(){return{provide:nr,useClass:Wh}}function DH(n){return[n.initialNavigation==="disabled"?_M().\u0275providers:[],n.initialNavigation==="enabledBlocking"?yM().\u0275providers:[]]}var pw=new z("");function TH(){return[{provide:pw,useFactory:mM},{provide:Bh,multi:!0,useExisting:pw}]}var DM=()=>{};var SM=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},SH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Lf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;u||(v=64,s||(m=64)),r.push(t[h],t[p],t[m],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(SM(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new _w;let m=o<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let E=l<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_w=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},AH=function(n){let e=SM(n);return Lf.encodeByteArray(e,!0)},Wu=function(n){return AH(n).replace(/\./g,"")},Vf=function(n){try{return Lf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Iw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var RH=()=>Iw().__FIREBASE_DEFAULTS__,MH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},xH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Vf(n[1]);return e&&JSON.parse(e)},Uf=()=>{try{return DM()||RH()||MH()||xH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ew=n=>{var e,t;return(t=(e=Uf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},jf=n=>{let e=Ew(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},bw=()=>{var n;return(n=Uf())===null||n===void 0?void 0:n.config},Cw=n=>{var e;return(e=Uf())===null||e===void 0?void 0:e[`_${n}`]};var cs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Bf(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Wu(JSON.stringify(t)),Wu(JSON.stringify(s)),""].join(".")}function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function NH(){var n;let e=(n=Uf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MM(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NM(){let n=At();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function PM(){return!NH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ku(){try{return typeof indexedDB=="object"}catch{return!1}}function kM(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var PH="FirebaseError",on=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=PH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,or.prototype.create)}},or=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?kH(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new on(i,a,r)}};function kH(n,e){return n.replace(OH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var OH=/\{\$([^}]+)}/g;function OM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(TM(o)&&TM(s)){if(!Bn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function TM(n){return n!==null&&typeof n=="object"}function Qu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sa(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Aa(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function FM(n,e){let t=new ww(n,e);return t.subscribe.bind(t)}var ww=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");FH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=yw),i.error===void 0&&(i.error=yw),i.complete===void 0&&(i.complete=yw);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function FH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yw(){}var Ute=4*60*60*1e3;function je(n){return n&&n._delegate?n._delegate:n}var kt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var us="[DEFAULT]";var Dw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new cs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VH(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LH(n){return n===us?void 0:n}function VH(n){return n.instantiationMode==="EAGER"}var $f=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Dw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var UH=[],we=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(we||{}),jH={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},BH=we.INFO,$H={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},HH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=$H[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xr=class{constructor(e){this.name=e,this._logLevel=BH,this._logHandler=HH,this._userLogHandler=null,UH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}};var zH=(n,e)=>e.some(t=>n instanceof t),LM,VM;function qH(){return LM||(LM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GH(){return VM||(VM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var UM=new WeakMap,Sw=new WeakMap,jM=new WeakMap,Tw=new WeakMap,Rw=new WeakMap;function WH(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Nr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&UM.set(t,n)}).catch(()=>{}),Rw.set(e,n),e}function KH(n){if(Sw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Sw.set(n,e)}var Aw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Sw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Nr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function BM(n){Aw=n(Aw)}function QH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Hf(this),e,...t);return jM.set(r,e.sort?e.sort():[e]),Nr(r)}:GH().includes(n)?function(...e){return n.apply(Hf(this),e),Nr(UM.get(this))}:function(...e){return Nr(n.apply(Hf(this),e))}}function YH(n){return typeof n=="function"?QH(n):(n instanceof IDBTransaction&&KH(n),zH(n,qH())?new Proxy(n,Aw):n)}function Nr(n){if(n instanceof IDBRequest)return WH(n);if(Tw.has(n))return Tw.get(n);let e=YH(n);return e!==n&&(Tw.set(n,e),Rw.set(e,n)),e}var Hf=n=>Rw.get(n);function HM(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Nr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Nr(s.result),u.oldVersion,u.newVersion,Nr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var ZH=["get","getKey","getAll","getAllKeys","count"],JH=["put","add","delete","clear"],Mw=new Map;function $M(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mw.get(e))return Mw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=JH.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZH.includes(t)))return;let o=function(s,...a){return y(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return Mw.set(e,o),o}BM(n=>ie(U({},n),{get:(e,t,r)=>$M(e,t)||n.get(e,t,r),has:(e,t)=>!!$M(e,t)||n.has(e,t)}));var Nw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function XH(n){let e=n.getComponent();return e?.type==="VERSION"}var Pw="@firebase/app",zM="0.11.5";var gi=new xr("@firebase/app"),e4="@firebase/app-compat",t4="@firebase/analytics-compat",n4="@firebase/analytics",r4="@firebase/app-check-compat",i4="@firebase/app-check",o4="@firebase/auth",s4="@firebase/auth-compat",a4="@firebase/database",c4="@firebase/data-connect",u4="@firebase/database-compat",l4="@firebase/functions",d4="@firebase/functions-compat",h4="@firebase/installations",f4="@firebase/installations-compat",p4="@firebase/messaging",g4="@firebase/messaging-compat",m4="@firebase/performance",v4="@firebase/performance-compat",y4="@firebase/remote-config",_4="@firebase/remote-config-compat",w4="@firebase/storage",I4="@firebase/storage-compat",E4="@firebase/firestore",b4="@firebase/vertexai",C4="@firebase/firestore-compat",D4="firebase",T4="11.6.1";var kw="[DEFAULT]",S4={[Pw]:"fire-core",[e4]:"fire-core-compat",[n4]:"fire-analytics",[t4]:"fire-analytics-compat",[i4]:"fire-app-check",[r4]:"fire-app-check-compat",[o4]:"fire-auth",[s4]:"fire-auth-compat",[a4]:"fire-rtdb",[c4]:"fire-data-connect",[u4]:"fire-rtdb-compat",[l4]:"fire-fn",[d4]:"fire-fn-compat",[h4]:"fire-iid",[f4]:"fire-iid-compat",[p4]:"fire-fcm",[g4]:"fire-fcm-compat",[m4]:"fire-perf",[v4]:"fire-perf-compat",[y4]:"fire-rc",[_4]:"fire-rc-compat",[w4]:"fire-gcs",[I4]:"fire-gcs-compat",[E4]:"fire-fst",[C4]:"fire-fst-compat",[b4]:"fire-vertex","fire-js":"fire-js",[D4]:"fire-js-all"};var Yu=new Map,A4=new Map,Ow=new Map;function qM(n,e){try{n.container.addComponent(e)}catch(t){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tn(n){let e=n.name;if(Ow.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;Ow.set(e,n);for(let t of Yu.values())qM(t,n);for(let t of A4.values())qM(t,n);return!0}function no(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wt(n){return n==null?!1:n.settings!==void 0}var R4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},to=new or("app","Firebase",R4);var Fw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw to.create("app-deleted",{appName:this._name})}};var Pr=T4;function Uw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:kw,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw to.create("bad-app-name",{appName:String(i)});if(t||(t=bw()),!t)throw to.create("no-options");let o=Yu.get(i);if(o){if(Bn(t,o.options)&&Bn(r,o.config))return o;throw to.create("duplicate-app",{appName:i})}let s=new $f(i);for(let u of Ow.values())s.addComponent(u);let a=new Fw(t,r,s);return Yu.set(i,a),a}function mi(n=kw){let e=Yu.get(n);if(!e&&n===kw&&bw())return Uw();if(!e)throw to.create("no-app",{appName:n});return e}function zf(){return Array.from(Yu.values())}function Be(n,e,t){var r;let i=(r=S4[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(a.join(" "));return}Tn(new kt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var M4="firebase-heartbeat-database",x4=1,Zu="firebase-heartbeat-store",xw=null;function QM(){return xw||(xw=HM(M4,x4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Zu)}catch(t){console.warn(t)}}}}).catch(n=>{throw to.create("idb-open",{originalErrorMessage:n.message})})),xw}function N4(n){return y(this,null,function*(){try{let t=(yield QM()).transaction(Zu),r=yield t.objectStore(Zu).get(YM(n));return yield t.done,r}catch(e){if(e instanceof on)gi.warn(e.message);else{let t=to.create("idb-get",{originalErrorMessage:e?.message});gi.warn(t.message)}}})}function GM(n,e){return y(this,null,function*(){try{let r=(yield QM()).transaction(Zu,"readwrite");yield r.objectStore(Zu).put(e,YM(n)),yield r.done}catch(t){if(t instanceof on)gi.warn(t.message);else{let r=to.create("idb-set",{originalErrorMessage:t?.message});gi.warn(r.message)}}})}function YM(n){return`${n.name}!${n.options.appId}`}var P4=1024,k4=30,Lw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Vw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=WM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>k4){let s=F4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gi.warn(r)}})}getHeartbeatsHeader(){return y(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=WM(),{heartbeatsToSend:r,unsentEntries:i}=O4(this._heartbeatsCache.heartbeats),o=Wu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return gi.warn(t),""}})}};function WM(){return new Date().toISOString().substring(0,10)}function O4(n,e=P4){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),KM(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),KM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Vw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return Ku()?kM().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield N4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GM(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function KM(n){return Wu(JSON.stringify({version:2,heartbeats:n})).length}function F4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function L4(n){Tn(new kt("platform-logger",e=>new Nw(e),"PRIVATE")),Tn(new kt("heartbeat",e=>new Lw(e),"PRIVATE")),Be(Pw,zM,n),Be(Pw,zM,"esm2017"),Be("fire-js","")}L4("");var V4="firebase",U4="11.6.1";Be(V4,U4,"app");function jw(n){n===void 0&&(Cy(jw),n=F(rt));let e=n.get(kh);return t=>new ye(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var kr=new Zo("ANGULARFIRE2_VERSION");function ds(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ro=(n,e)=>{let t=e?[e]:zf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ra=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Ra||{}),ZM=y_()&&typeof Zone<"u"?Ra.WARN:Ra.SILENT;var qf=class{zone;delegate;constructor(e,t=Qm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Or=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=F(Te);this.outsideAngular=t.runOutsideAngular(()=>new qf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new qf(typeof Zone>"u"?void 0:Zone.current,Gc))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JM=!1;function j4(n,e){!JM&&(ZM>Ra.SILENT||y_())&&(JM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),ZM>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function B4(n){let e=F(Te,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ls(n){let e=F(Te,{optional:!0});return e?e.run(()=>n()):n()}var $4=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Ht(t,()=>ls(()=>n.apply(void 0,r)))),Ne=(n,e,t)=>(t||=e?Ra.WARN:Ra.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=F(Or),s=F(kh),a=F(Bt)}catch{return j4(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ls(()=>s.add())),i[l]=$4(i[l],r,a));let u=B4(()=>n.apply(this,i));return e?u instanceof ye?u.pipe(Vi(o.outsideAngular),Li(o.insideAngular),jw(a)):u instanceof Promise?ls(()=>new Promise((l,h)=>{s.run(()=>u).then(p=>Ht(a,()=>ls(()=>l(p))),p=>Ht(a,()=>ls(()=>h(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:ls(()=>u):u instanceof ye?u.pipe(Vi(o.outsideAngular),Li(o.insideAngular)):ls(()=>u)});var sr=class{constructor(e){return e}},vi=class{constructor(){return zf()}};function H4(n){return n&&n.length===1?n[0]:new sr(mi())}var Bw=new z("angularfire2._apps"),z4={provide:sr,useFactory:H4,deps:[[new Ct,Bw]]},q4={provide:vi,deps:[[new Ct,Bw]]};function G4(n){return(e,t)=>{let r=t.get(zi);Be("angularfire",kr.full,"core"),Be("angularfire",kr.full,"app"),Be("angular",jA.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new sr(i)}}function XM(n,...e){return kn([z4,q4,{provide:Bw,useFactory:G4(n),multi:!0,deps:[Te,rt,Or,...e]}])}var ex=Ne(Uw,!0);var W4=new Map,K4={activated:!1,tokenObservers:[]},Q4={initialized:!1,enabled:!1};function ar(n){return W4.get(n)||Object.assign({},K4)}function ix(){return Q4}var Y4="https://content-firebaseappcheck.googleapis.com/v1";var Z4="exchangeDebugToken",tx={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},zne=24*60*60*1e3;var zw=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new cs,this.pending.promise.catch(t=>{}),yield J4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new cs,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function J4(n){return new Promise(e=>{setTimeout(e,n)})}var X4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},io=new or("appCheck","AppCheck",X4);function ox(n){if(!ar(n).activated)throw io.create("use-before-activation",{appName:n.name})}function sx(r,i){return y(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(v){throw io.create("fetch-network-error",{originalErrorMessage:v?.message})}if(u.status!==200)throw io.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(v){throw io.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw io.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function ax(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Y4}/projects/${t}/apps/${r}:${Z4}?key=${i}`,body:{debug_token:e}}}var e3="firebase-app-check-database",t3=1,qw="firebase-app-check-store";var Gf=null;function n3(){return Gf||(Gf=new Promise((n,e)=>{try{let t=indexedDB.open(e3,t3);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(io.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(qw,{keyPath:"compositeKey"})}}}catch(t){e(io.create("storage-open",{originalErrorMessage:t?.message}))}}),Gf)}function r3(n,e){return i3(o3(n),e)}function i3(n,e){return y(this,null,function*(){let r=(yield n3()).transaction(qw,"readwrite"),o=r.objectStore(qw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(io.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function o3(n){return`${n.options.appId}-${n.name}`}var Ju=new xr("@firebase/app-check");function $w(n,e){return Ku()?r3(n,e).catch(t=>{Ju.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function cx(){return ix().enabled}function ux(){return y(this,null,function*(){let n=ix();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var s3={error:"UNKNOWN_ERROR"};function a3(n){return Lf.encodeString(JSON.stringify(n),!1)}function Gw(n,e=!1,t=!1){return y(this,null,function*(){let r=n.app;ox(r);let i=ar(r),o=i.token,s;if(o&&!Xu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Xu(l)?o=l:yield $w(r,void 0))}if(!e&&o&&Xu(o))return{token:o.token};let a=!1;if(cx())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=sx(ax(r,yield ux()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield $w(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ju.warn(l.message):t&&Ju.error(l),Hw(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield ar(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ju.warn(l.message):t&&Ju.error(l),s=l}let u;return o?s?Xu(o)?u={token:o.token,internalError:s}:u=Hw(s):(u={token:o.token},i.token=o,yield $w(r,o)):u=Hw(s),a&&d3(r,u),u})}function c3(n){return y(this,null,function*(){let e=n.app;ox(e);let{provider:t}=ar(e);if(cx()){let r=yield ux(),{token:i}=yield sx(ax(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function u3(n,e,t,r){let{app:i}=n,o=ar(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Xu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),nx(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>nx(n))}function lx(n,e){let t=ar(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function nx(n){let{app:e}=n,t=ar(e),r=t.tokenRefresher;r||(r=l3(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function l3(n){let{app:e}=n;return new zw(()=>y(this,null,function*(){let t=ar(e),r;if(t.token?r=yield Gw(n,!0):r=yield Gw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ar(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},tx.RETRIAL_MIN_WAIT,tx.RETRIAL_MAX_WAIT)}function d3(n,e){let t=ar(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Xu(n){return n.expireTimeMillis-Date.now()>0}function Hw(n){return{token:a3(s3),error:n}}var Ww=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ar(this.app);for(let t of e)lx(this.app,t.next);return Promise.resolve()}};function h3(n,e){return new Ww(n,e)}function f3(n){return{getToken:e=>Gw(n,e),getLimitedUseToken:()=>c3(n),addTokenListener:e=>u3(n,"INTERNAL",e),removeTokenListener:e=>lx(n.app,e)}}var p3="@firebase/app-check",g3="0.8.13";var m3="app-check",rx="app-check-internal";function v3(){Tn(new kt(m3,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return h3(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rx).initialize()})),Tn(new kt(rx,n=>{let e=n.getProvider("app-check").getImmediate();return f3(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Be(p3,g3)}v3();var y3="app-check";var oo=class{constructor(){return ro(y3)}};var _3=["localhost","0.0.0.0","127.0.0.1"],rre=typeof window<"u"&&_3.includes(window.location.hostname);function Tx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Sx=Tx,Ax=new or("auth","Firebase",Tx());var Jf=new xr("@firebase/auth");function w3(n,...e){Jf.logLevel<=we.WARN&&Jf.warn(`Auth (${Pr}): ${n}`,...e)}function Kf(n,...e){Jf.logLevel<=we.ERROR&&Jf.error(`Auth (${Pr}): ${n}`,...e)}function Lr(n,...e){throw yI(n,...e)}function hs(n,...e){return yI(n,...e)}function Rx(n,e,t){let r=Object.assign(Object.assign({},Sx()),{[e]:t});return new or("auth","Firebase",r).create(e,{appName:n.name})}function wi(n){return Rx(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Ax.create(n,...e)}function re(n,e,...t){if(!n)throw yI(e,...t)}function yi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Kf(e),new Error(e)}function co(n,e){n||yi(e)}function Zw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function I3(){return dx()==="http:"||dx()==="https:"}function dx(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function E3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(I3()||MM()||"connection"in navigator)?navigator.onLine:!0}function b3(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var fs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,co(t>e,"Short delay should be less than long delay!"),this.isMobile=AM()||xM()}get(){return E3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function _I(n,e){co(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Xf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var C3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var D3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],T3=new fs(3e4,6e4);function uo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function lo(o,s,a,u){return y(this,arguments,function*(n,e,t,r,i={}){return Mx(n,i,()=>y(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Qu(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:m},l);return RM()||(v.referrerPolicy="no-referrer"),Xf.fetch()(yield xx(n,n.config.apiHost,t,p),v)}))})}function Mx(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},C3),e);try{let i=new Jw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Wf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Wf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Wf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Rx(n,h,l);Lr(n,h)}}catch(i){if(i instanceof on)throw i;Lr(n,"network-request-failed",{message:String(i)})}})}function cl(o,s,a,u){return y(this,arguments,function*(n,e,t,r,i={}){let l=yield lo(n,e,t,r,i);return"mfaPendingCredential"in l&&Lr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function xx(n,e,t,r){return y(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?_I(n.config,i):`${n.config.apiScheme}://${i}`;return D3.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function S3(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Jw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(hs(this.auth,"network-request-failed")),T3.get())})}};function Wf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=hs(n,e,r);return i.customData._tokenResponse=t,i}function hx(n){return n!==void 0&&n.enterprise!==void 0}var Xw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return S3(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function A3(n,e){return y(this,null,function*(){return lo(n,"GET","/v2/recaptchaConfig",uo(n,e))})}function R3(n,e){return y(this,null,function*(){return lo(n,"POST","/v1/accounts:delete",e)})}function ep(n,e){return y(this,null,function*(){return lo(n,"POST","/v1/accounts:lookup",e)})}function tl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function wI(n,e=!1){return y(this,null,function*(){let t=je(n),r=yield t.getIdToken(e),i=II(r);re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:tl(Kw(i.auth_time)),issuedAtTime:tl(Kw(i.iat)),expirationTime:tl(Kw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Kw(n){return Number(n)*1e3}function II(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Kf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Vf(t);return i?JSON.parse(i):(Kf("Failed to decode base64 JWT payload"),null)}catch(i){return Kf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function fx(n){let e=II(n);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function rl(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof on&&M3(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function M3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var eI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var il=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function tp(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield rl(n,ep(t,{idToken:r}));re(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Nx(o.providerUserInfo):[],a=x3(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new il(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function EI(n){return y(this,null,function*(){let e=je(n);yield tp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function x3(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Nx(n){return n.map(e=>{var{providerId:t}=e,r=Ym(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function N3(n,e){return y(this,null,function*(){let t=yield Mx(n,{},()=>y(this,null,function*(){let r=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield xx(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xf.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function P3(n,e){return y(this,null,function*(){return lo(n,"POST","/v2/accounts:revokeToken",uo(n,e))})}var nl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){re(e.length!==0,"internal-error");let t=fx(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield N3(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(re(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(re(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return yi("not implemented")}};function so(n,e){re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ao=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new il(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield rl(this,this.stsTokenManager.getToken(this.auth,e));return re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return wI(this,e)}reload(){return EI(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield tp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(Wt(this.auth.app))return Promise.reject(wi(this.auth));let e=yield this.getIdToken();return yield rl(this,R3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,E=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,M=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,B=(l=t.createdAt)!==null&&l!==void 0?l:void 0,J=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:X,emailVerified:he,isAnonymous:ht,providerData:De,stsTokenManager:C}=t;re(X&&C,e,"internal-error");let _=nl.fromJSON(this.name,C);re(typeof X=="string",e,"internal-error"),so(p,e.name),so(m,e.name),re(typeof he=="boolean",e,"internal-error"),re(typeof ht=="boolean",e,"internal-error"),so(v,e.name),so(E,e.name),so(N,e.name),so(M,e.name),so(B,e.name),so(J,e.name);let I=new n({uid:X,auth:e,email:m,emailVerified:he,displayName:p,isAnonymous:ht,photoURL:E,phoneNumber:v,tenantId:N,stsTokenManager:_,createdAt:B,lastLoginAt:J});return De&&Array.isArray(De)&&(I.providerData=De.map(b=>Object.assign({},b))),M&&(I._redirectEventId=M),I}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new nl;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield tp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];re(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?Nx(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new nl;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new il(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var px=new Map;function _i(n){co(n instanceof Function,"Expected a class definition");let e=px.get(n);return e?(co(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,px.set(n,e),e)}var k3=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),tI=k3;function Qf(n,e,t){return`firebase:${n}:${e}:${t}`}var np=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Qf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Qf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield ep(this.auth,{idToken:e}).catch(()=>{});return t?ao._fromGetAccountInfoResponse(this.auth,t,e):null}return ao._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(_i(tI),e,r);let i=(yield Promise.all(t.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||_i(tI),s=Qf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield ep(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield ao._fromGetAccountInfoResponse(e,m,h)}else p=ao._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>y(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function gx(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Px(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Vx(e))return"Blackberry";if(Ux(e))return"Webos";if(kx(e))return"Safari";if((e.includes("chrome/")||Ox(e))&&!e.includes("edge/"))return"Chrome";if(Lx(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Px(n=At()){return/firefox\//i.test(n)}function kx(n=At()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ox(n=At()){return/crios\//i.test(n)}function Fx(n=At()){return/iemobile/i.test(n)}function Lx(n=At()){return/android/i.test(n)}function Vx(n=At()){return/blackberry/i.test(n)}function Ux(n=At()){return/webos/i.test(n)}function bI(n=At()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function O3(n=At()){var e;return bI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function F3(){return NM()&&document.documentMode===10}function jx(n=At()){return bI(n)||Lx(n)||Ux(n)||Vx(n)||/windows phone/i.test(n)||Fx(n)}function Bx(n,e=[]){let t;switch(n){case"Browser":t=gx(At());break;case"Worker":t=`${gx(At())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pr}/${r}`}var nI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function L3(t){return y(this,arguments,function*(n,e={}){return lo(n,"GET","/v2/passwordPolicy",uo(n,e))})}var V3=6,rI=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:V3,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var iI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rp(this),this.idTokenSubscription=new rp(this),this.beforeStateQueue=new nI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ax,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_i(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield np.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield ep(this,{idToken:e}),r=yield ao._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(Wt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield tp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=b3()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(Wt(this.app))return Promise.reject(wi(this));let t=e?je(e):null;return t&&re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return Wt(this.app)?Promise.reject(wi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Wt(this.app)?Promise.reject(wi(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(_i(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield L3(this),t=new rI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new or("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield P3(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&_i(e)||this._popupRedirectResolver;re(t,this,"argument-error"),this.redirectPersistenceManager=yield np.create(this,[_i(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;if(Wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&w3(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function gs(n){return je(n)}var rp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=FM(t=>this.observer=t)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var lp={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function U3(n){lp=n}function $x(n){return lp.loadJS(n)}function j3(){return lp.recaptchaEnterpriseScript}function B3(){return lp.gapiScript}function Hx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var oI=class{constructor(){this.enterprise=new sI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},sI=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var $3="recaptcha-enterprise",zx="NO_RECAPTCHA",aI=class{constructor(e){this.type=$3,this.auth=gs(e)}verify(e="verify",t=!1){return y(this,null,function*(){function r(o){return y(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>y(this,null,function*(){A3(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Xw(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;hx(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(zx)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oI().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&hx(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=j3();u.length!==0&&(u+=a),$x(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function el(n,e,t,r=!1,i=!1){return y(this,null,function*(){let o=new aI(n),s;if(i)s=zx;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function cI(n,e,t,r,i){return y(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield el(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>y(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield el(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield el(n,e,t);return r(n,a).catch(u=>y(this,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield el(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield el(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function CI(n,e){let t=no(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Bn(o,e??{}))return i;Lr(i,"already-initialized")}return t.initialize({options:e})}function H3(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(_i);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function DI(n,e,t){let r=gs(n);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=qx(e),{host:s,port:a}=z3(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(Bn(l,r.config.emulator)&&Bn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i||q3()}function qx(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function z3(n){let e=qx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:mx(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:mx(s)}}}function mx(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function q3(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ol=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yi("not implemented")}_getIdTokenResponse(e){return yi("not implemented")}_linkToIdToken(e,t){return yi("not implemented")}_getReauthenticationResolver(e){return yi("not implemented")}};function G3(n,e){return y(this,null,function*(){return lo(n,"POST","/v1/accounts:signUp",e)})}function W3(n,e){return y(this,null,function*(){return cl(n,"POST","/v1/accounts:signInWithPassword",uo(n,e))})}function K3(n,e){return y(this,null,function*(){return cl(n,"POST","/v1/accounts:signInWithEmailLink",uo(n,e))})}function Q3(n,e){return y(this,null,function*(){return cl(n,"POST","/v1/accounts:signInWithEmailLink",uo(n,e))})}var sl=class n extends ol{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return y(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cI(e,t,"signInWithPassword",W3,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return K3(e,{email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}})}_linkToIdToken(e,t){return y(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cI(e,r,"signUpPassword",G3,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Q3(e,{idToken:t,email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Qw(n,e){return y(this,null,function*(){return cl(n,"POST","/v1/accounts:signInWithIdp",uo(n,e))})}function Y3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Z3(n){let e=Sa(Aa(n)).link,t=e?Sa(Aa(e)).deep_link_id:null,r=Sa(Aa(n)).deep_link_id;return(r?Sa(Aa(r)).link:null)||r||t||e||n}var ip=class n{constructor(e){var t,r,i,o,s,a;let u=Sa(Aa(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Y3((i=u.mode)!==null&&i!==void 0?i:null);re(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Z3(e);try{return new n(t)}catch{return null}}};var Gx=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return sl._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ip.parseLink(r);return re(i,"argument-error"),sl._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),op=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var uI=class extends op{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function J3(n,e){return y(this,null,function*(){return cl(n,"POST","/v1/accounts:signUp",uo(n,e))})}var Ma=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let o=yield ao._fromIdTokenResponse(e,r,i),s=vx(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=vx(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function vx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var lI=class n extends on{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Wx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lI._fromErrorAndOperation(n,o,e,r):o})}function X3(n,e,t=!1){return y(this,null,function*(){let r=yield rl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ma._forOperation(n,"link",r)})}function ez(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(Wt(r.app))return Promise.reject(wi(r));let i="reauthenticate";try{let o=yield rl(n,Wx(r,i,e,n),t);re(o.idToken,r,"internal-error");let s=II(o.idToken);re(s,r,"internal-error");let{sub:a}=s;return re(n.uid===a,r,"user-mismatch"),Ma._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Lr(r,"user-mismatch"),o}})}function Kx(n,e,t=!1){return y(this,null,function*(){if(Wt(n.app))return Promise.reject(wi(n));let r="signIn",i=yield Wx(n,r,e),o=yield Ma._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function TI(n,e){return y(this,null,function*(){return Kx(gs(n),e)})}function Qx(n){return y(this,null,function*(){let e=gs(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function SI(n,e,t){return y(this,null,function*(){if(Wt(n.app))return Promise.reject(wi(n));let r=gs(n),s=yield cI(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",J3,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Qx(n),u}),a=yield Ma._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function AI(n,e,t){return Wt(n.app)?Promise.reject(wi(n)):TI(je(n),Gx.credential(e,t)).catch(r=>y(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Qx(n),r}))}function RI(n,e,t,r){return je(n).onIdTokenChanged(e,t,r)}function MI(n,e,t){return je(n).beforeAuthStateChanged(e,t)}function xI(n,e,t,r){return je(n).onAuthStateChanged(e,t,r)}var sp="__sak";var ap=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sp,"1"),this.storage.removeItem(sp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var tz=1e3,nz=10,rz=(()=>{class n extends ap{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jx(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);F3()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,nz):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},tz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield Oi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield Oi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield Oi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Yx=rz;var iz=(()=>{class n extends ap{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),NI=iz;function oz(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var sz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>y(this,null,function*(){return h(r.origin,s)})),l=yield oz(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Zx(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var dI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=Zx("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Fr(){return window}function az(n){Fr().location.href=n}function Jx(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}function cz(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function uz(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function lz(){return Jx()?self:null}var Xx="firebaseLocalStorageDb",dz=1,cp="firebaseLocalStorage",eN="fbase_key",ps=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function dp(n,e){return n.transaction([cp],e?"readwrite":"readonly").objectStore(cp)}function hz(){let n=indexedDB.deleteDatabase(Xx);return new ps(n).toPromise()}function hI(){let n=indexedDB.open(Xx,dz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(cp,{keyPath:eN})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(cp)?e(r):(r.close(),yield hz(),e(yield hI()))}))})}function yx(n,e,t){return y(this,null,function*(){let r=dp(n,!0).put({[eN]:e,value:t});return new ps(r).toPromise()})}function fz(n,e){return y(this,null,function*(){let t=dp(n,!1).get(e),r=yield new ps(t).toPromise();return r===void 0?null:r.value})}function _x(n,e){let t=dp(n,!0).delete(e);return new ps(t).toPromise()}var pz=800,gz=3,mz=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield hI(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>gz)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return Jx()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=sz._getInstance(lz()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield cz(),!this.activeServiceWorker)return;this.sender=new dI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||uz()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield hI();return yield yx(t,sp,"1"),yield _x(t,sp),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>yx(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>fz(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>_x(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(o=>{let s=dp(o,!1).getAll();return new ps(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),pz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),tN=mz;var dre=Hx("rcb"),hre=new fs(3e4,6e4);function vz(n,e){return e?_i(e):(re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var al=class extends ol{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function yz(n){return Kx(n.auth,new al(n),n.bypassAuthState)}function _z(n){let{auth:e,user:t}=n;return re(t,e,"internal-error"),ez(t,new al(n),n.bypassAuthState)}function wz(n){return y(this,null,function*(){let{auth:e,user:t}=n;return re(t,e,"internal-error"),X3(t,new al(n),n.bypassAuthState)})}var fI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yz;case"linkViaPopup":case"linkViaRedirect":return wz;case"reauthViaPopup":case"reauthViaRedirect":return _z;default:Lr(this.auth,"internal-error")}}resolve(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){co(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var fre=new fs(2e3,1e4);var Iz="pendingRedirect",Yf=new Map,pI=class n extends fI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Yf.get(this.auth._key());if(!e){try{let r=(yield Ez(this.resolver,this.auth))?yield Oi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yf.set(this.auth._key(),e)}return this.bypassAuthState||Yf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return Oi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Oi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function Ez(n,e){return y(this,null,function*(){let t=Dz(e),r=Cz(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function bz(n,e){Yf.set(n._key(),e)}function Cz(n){return _i(n._redirectPersistence)}function Dz(n){return Qf(Iz,n.config.apiKey,n.name)}function Tz(n,e,t=!1){return y(this,null,function*(){if(Wt(n.app))return Promise.reject(wi(n));let r=gs(n),i=vz(r,e),s=yield new pI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Sz=10*60*1e3,gI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Az(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!nN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(hs(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Sz&&this.cachedEventUids.clear(),this.cachedEventUids.has(wx(e))}saveEventToCache(e){this.cachedEventUids.add(wx(e)),this.lastProcessedEventTime=Date.now()}};function wx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Az(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nN(n);default:return!1}}function Rz(t){return y(this,arguments,function*(n,e={}){return lo(n,"GET","/v1/projects",e)})}var Mz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xz=/^https?/;function Nz(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Rz(n);for(let t of e)try{if(Pz(t))return}catch{}Lr(n,"unauthorized-domain")})}function Pz(n){let e=Zw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!xz.test(t))return!1;if(Mz.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var kz=new fs(3e4,6e4);function Ix(){let n=Fr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Oz(n){return new Promise((e,t)=>{var r,i,o;function s(){Ix(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ix(),t(hs(n,"network-request-failed"))},timeout:kz.get()})}if(!((i=(r=Fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Fr().gapi)===null||o===void 0)&&o.load)s();else{let a=Hx("iframefcb");return Fr()[a]=()=>{gapi.load?s():t(hs(n,"network-request-failed"))},$x(`${B3()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Zf=null,e})}var Zf=null;function Fz(n){return Zf=Zf||Oz(n),Zf}var Lz=new fs(5e3,15e3),Vz="__/auth/iframe",Uz="emulator/auth/iframe",jz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $z(n){let e=n.config;re(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?_I(e,Uz):`https://${n.config.authDomain}/${Vz}`,r={apiKey:e.apiKey,appName:n.name,v:Pr},i=Bz.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Qu(r).slice(1)}`}function Hz(n){return y(this,null,function*(){let e=yield Fz(n),t=Fr().gapi;return re(t,n,"internal-error"),e.open({where:document.body,url:$z(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jz,dontclear:!0},r=>new Promise((i,o)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=hs(n,"network-request-failed"),a=Fr().setTimeout(()=>{o(s)},Lz.get());function u(){Fr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var zz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qz=500,Gz=600,Wz="_blank",Kz="http://localhost",up=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Qz(n,e,t,r=qz,i=Gz){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},zz),{width:r.toString(),height:i.toString(),top:o,left:s}),l=At().toLowerCase();t&&(a=Ox(l)?Wz:t),Px(l)&&(e=e||Kz,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[v,E])=>`${m}${v}=${E},`,"");if(O3(l)&&a!=="_self")return Yz(e||"",a),new up(null);let p=window.open(e||"",a,h);re(p,n,"popup-blocked");try{p.focus()}catch{}return new up(p)}function Yz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Zz="__/auth/handler",Jz="emulator/auth/handler",Xz=encodeURIComponent("fac");function Ex(n,e,t,r,i,o){return y(this,null,function*(){re(n.config.authDomain,n,"auth-domain-config-required"),re(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pr,eventId:i};if(e instanceof op){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",OM(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof uI){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${Xz}=${encodeURIComponent(u)}`:"";return`${eq(n)}?${Qu(a).slice(1)}${l}`})}function eq({config:n}){return n.emulator?_I(n,Jz):`https://${n.authDomain}/${Zz}`}var Yw="webStorageSupport",mI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NI,this._completeRedirectFn=Tz,this._overrideRedirectResult=bz}_openPopup(e,t,r,i){return y(this,null,function*(){var o;co((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield Ex(e,t,r,Zw(),i);return Qz(e,s,Zx())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let o=yield Ex(e,t,r,Zw(),i);return az(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(co(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield Hz(e),r=new gI(e);return t.register("authEvent",i=>(re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Yw,{type:Yw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Yw];s!==void 0&&t(!!s),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Nz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jx()||kx()||bI()}},rN=mI;var bx="@firebase/auth",Cx="1.10.1";var vI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function tq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nq(n){Tn(new kt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;re(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bx(n)},l=new iI(r,i,o,u);return H3(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Tn(new kt("auth-internal",e=>{let t=gs(e.getProvider("auth").getImmediate());return(r=>new vI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Be(bx,Cx,tq(n)),Be(bx,Cx,"esm2017")}var rq=5*60,iq=Cw("authIdTokenMaxAge")||rq,Dx=null,oq=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>iq)return;let i=t?.token;Dx!==i&&(Dx=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function PI(n=mi()){let e=no(n,"auth");if(e.isInitialized())return e.getImmediate();let t=CI(n,{popupRedirectResolver:rN,persistence:[tN,Yx,NI]}),r=Cw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=oq(o.toString());MI(t,s,()=>s(t.currentUser)),RI(t,a=>s(a))}}let i=Ew("auth");return i&&DI(t,`http://${i}`),t}function sq(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}U3({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=hs("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",sq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nq("Browser");var iN="auth",cr=class{constructor(e){return e}},ms=class{constructor(){return ro(iN)}};var kI=new z("angularfire2.auth-instances");function Qq(n,e){let t=ds(iN,n,e);return t&&new cr(t)}function Yq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new cr(r)}}var Zq={provide:ms,deps:[[new Ct,kI]]},Jq={provide:cr,useFactory:Qq,deps:[[new Ct,kI],sr]};function oN(n,...e){return Be("angularfire",kr.full,"auth"),kn([Jq,Zq,{provide:kI,useFactory:Yq(n),multi:!0,deps:[Te,rt,Or,vi,[new Ct,oo],...e]}])}var sN=Ne(SI,!0,2);var aN=Ne(PI,!0);var cN=Ne(xI,!0);var uN=Ne(AI,!0,2);var lN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dN={};var Ii,OI;(function(){var n;function e(C,_){function I(){}I.prototype=_.prototype,C.D=_.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(b,D,R){for(var w=Array(arguments.length-2),Qr=2;Qr<arguments.length;Qr++)w[Qr-2]=arguments[Qr];return _.prototype[D].apply(b,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,I){I||(I=0);var b=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)b[D]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(D=0;16>D;++D)b[D]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=C.g[0],I=C.g[1],D=C.g[2];var R=C.g[3],w=_+(R^I&(D^R))+b[0]+3614090360&4294967295;_=I+(w<<7&4294967295|w>>>25),w=R+(D^_&(I^D))+b[1]+3905402710&4294967295,R=_+(w<<12&4294967295|w>>>20),w=D+(I^R&(_^I))+b[2]+606105819&4294967295,D=R+(w<<17&4294967295|w>>>15),w=I+(_^D&(R^_))+b[3]+3250441966&4294967295,I=D+(w<<22&4294967295|w>>>10),w=_+(R^I&(D^R))+b[4]+4118548399&4294967295,_=I+(w<<7&4294967295|w>>>25),w=R+(D^_&(I^D))+b[5]+1200080426&4294967295,R=_+(w<<12&4294967295|w>>>20),w=D+(I^R&(_^I))+b[6]+2821735955&4294967295,D=R+(w<<17&4294967295|w>>>15),w=I+(_^D&(R^_))+b[7]+4249261313&4294967295,I=D+(w<<22&4294967295|w>>>10),w=_+(R^I&(D^R))+b[8]+1770035416&4294967295,_=I+(w<<7&4294967295|w>>>25),w=R+(D^_&(I^D))+b[9]+2336552879&4294967295,R=_+(w<<12&4294967295|w>>>20),w=D+(I^R&(_^I))+b[10]+4294925233&4294967295,D=R+(w<<17&4294967295|w>>>15),w=I+(_^D&(R^_))+b[11]+2304563134&4294967295,I=D+(w<<22&4294967295|w>>>10),w=_+(R^I&(D^R))+b[12]+1804603682&4294967295,_=I+(w<<7&4294967295|w>>>25),w=R+(D^_&(I^D))+b[13]+4254626195&4294967295,R=_+(w<<12&4294967295|w>>>20),w=D+(I^R&(_^I))+b[14]+2792965006&4294967295,D=R+(w<<17&4294967295|w>>>15),w=I+(_^D&(R^_))+b[15]+1236535329&4294967295,I=D+(w<<22&4294967295|w>>>10),w=_+(D^R&(I^D))+b[1]+4129170786&4294967295,_=I+(w<<5&4294967295|w>>>27),w=R+(I^D&(_^I))+b[6]+3225465664&4294967295,R=_+(w<<9&4294967295|w>>>23),w=D+(_^I&(R^_))+b[11]+643717713&4294967295,D=R+(w<<14&4294967295|w>>>18),w=I+(R^_&(D^R))+b[0]+3921069994&4294967295,I=D+(w<<20&4294967295|w>>>12),w=_+(D^R&(I^D))+b[5]+3593408605&4294967295,_=I+(w<<5&4294967295|w>>>27),w=R+(I^D&(_^I))+b[10]+38016083&4294967295,R=_+(w<<9&4294967295|w>>>23),w=D+(_^I&(R^_))+b[15]+3634488961&4294967295,D=R+(w<<14&4294967295|w>>>18),w=I+(R^_&(D^R))+b[4]+3889429448&4294967295,I=D+(w<<20&4294967295|w>>>12),w=_+(D^R&(I^D))+b[9]+568446438&4294967295,_=I+(w<<5&4294967295|w>>>27),w=R+(I^D&(_^I))+b[14]+3275163606&4294967295,R=_+(w<<9&4294967295|w>>>23),w=D+(_^I&(R^_))+b[3]+4107603335&4294967295,D=R+(w<<14&4294967295|w>>>18),w=I+(R^_&(D^R))+b[8]+1163531501&4294967295,I=D+(w<<20&4294967295|w>>>12),w=_+(D^R&(I^D))+b[13]+2850285829&4294967295,_=I+(w<<5&4294967295|w>>>27),w=R+(I^D&(_^I))+b[2]+4243563512&4294967295,R=_+(w<<9&4294967295|w>>>23),w=D+(_^I&(R^_))+b[7]+1735328473&4294967295,D=R+(w<<14&4294967295|w>>>18),w=I+(R^_&(D^R))+b[12]+2368359562&4294967295,I=D+(w<<20&4294967295|w>>>12),w=_+(I^D^R)+b[5]+4294588738&4294967295,_=I+(w<<4&4294967295|w>>>28),w=R+(_^I^D)+b[8]+2272392833&4294967295,R=_+(w<<11&4294967295|w>>>21),w=D+(R^_^I)+b[11]+1839030562&4294967295,D=R+(w<<16&4294967295|w>>>16),w=I+(D^R^_)+b[14]+4259657740&4294967295,I=D+(w<<23&4294967295|w>>>9),w=_+(I^D^R)+b[1]+2763975236&4294967295,_=I+(w<<4&4294967295|w>>>28),w=R+(_^I^D)+b[4]+1272893353&4294967295,R=_+(w<<11&4294967295|w>>>21),w=D+(R^_^I)+b[7]+4139469664&4294967295,D=R+(w<<16&4294967295|w>>>16),w=I+(D^R^_)+b[10]+3200236656&4294967295,I=D+(w<<23&4294967295|w>>>9),w=_+(I^D^R)+b[13]+681279174&4294967295,_=I+(w<<4&4294967295|w>>>28),w=R+(_^I^D)+b[0]+3936430074&4294967295,R=_+(w<<11&4294967295|w>>>21),w=D+(R^_^I)+b[3]+3572445317&4294967295,D=R+(w<<16&4294967295|w>>>16),w=I+(D^R^_)+b[6]+76029189&4294967295,I=D+(w<<23&4294967295|w>>>9),w=_+(I^D^R)+b[9]+3654602809&4294967295,_=I+(w<<4&4294967295|w>>>28),w=R+(_^I^D)+b[12]+3873151461&4294967295,R=_+(w<<11&4294967295|w>>>21),w=D+(R^_^I)+b[15]+530742520&4294967295,D=R+(w<<16&4294967295|w>>>16),w=I+(D^R^_)+b[2]+3299628645&4294967295,I=D+(w<<23&4294967295|w>>>9),w=_+(D^(I|~R))+b[0]+4096336452&4294967295,_=I+(w<<6&4294967295|w>>>26),w=R+(I^(_|~D))+b[7]+1126891415&4294967295,R=_+(w<<10&4294967295|w>>>22),w=D+(_^(R|~I))+b[14]+2878612391&4294967295,D=R+(w<<15&4294967295|w>>>17),w=I+(R^(D|~_))+b[5]+4237533241&4294967295,I=D+(w<<21&4294967295|w>>>11),w=_+(D^(I|~R))+b[12]+1700485571&4294967295,_=I+(w<<6&4294967295|w>>>26),w=R+(I^(_|~D))+b[3]+2399980690&4294967295,R=_+(w<<10&4294967295|w>>>22),w=D+(_^(R|~I))+b[10]+4293915773&4294967295,D=R+(w<<15&4294967295|w>>>17),w=I+(R^(D|~_))+b[1]+2240044497&4294967295,I=D+(w<<21&4294967295|w>>>11),w=_+(D^(I|~R))+b[8]+1873313359&4294967295,_=I+(w<<6&4294967295|w>>>26),w=R+(I^(_|~D))+b[15]+4264355552&4294967295,R=_+(w<<10&4294967295|w>>>22),w=D+(_^(R|~I))+b[6]+2734768916&4294967295,D=R+(w<<15&4294967295|w>>>17),w=I+(R^(D|~_))+b[13]+1309151649&4294967295,I=D+(w<<21&4294967295|w>>>11),w=_+(D^(I|~R))+b[4]+4149444226&4294967295,_=I+(w<<6&4294967295|w>>>26),w=R+(I^(_|~D))+b[11]+3174756917&4294967295,R=_+(w<<10&4294967295|w>>>22),w=D+(_^(R|~I))+b[2]+718787259&4294967295,D=R+(w<<15&4294967295|w>>>17),w=I+(R^(D|~_))+b[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+R&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var I=_-this.blockSize,b=this.B,D=this.h,R=0;R<_;){if(D==0)for(;R<=I;)i(this,C,R),R+=this.blockSize;if(typeof C=="string"){for(;R<_;)if(b[D++]=C.charCodeAt(R++),D==this.blockSize){i(this,b),D=0;break}}else for(;R<_;)if(b[D++]=C[R++],D==this.blockSize){i(this,b),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var I=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=I&255,I/=256;for(this.u(C),C=Array(16),_=I=0;4>_;++_)for(var b=0;32>b;b+=8)C[I++]=this.g[_]>>>b&255;return C};function o(C,_){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=_(C)}function s(C,_){this.h=_;for(var I=[],b=!0,D=C.length-1;0<=D;D--){var R=C[D]|0;b&&R==_||(I[D]=R,b=!1)}this.g=I}var a={};function u(C){return-128<=C&&128>C?o(C,function(_){return new s([_|0],0>_?-1:0)}):new s([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return M(l(-C));for(var _=[],I=1,b=0;C>=I;b++)_[b]=C/I|0,I*=4294967296;return new s(_,0)}function h(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return M(h(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(_,8)),b=p,D=0;D<C.length;D+=8){var R=Math.min(8,C.length-D),w=parseInt(C.substring(D,D+R),_);8>R?(R=l(Math.pow(_,R)),b=b.j(R).add(l(w))):(b=b.j(I),b=b.add(l(w)))}return b}var p=u(0),m=u(1),v=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-M(this).m();for(var C=0,_=1,I=0;I<this.g.length;I++){var b=this.i(I);C+=(0<=b?b:4294967296+b)*_,_*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(E(this))return"0";if(N(this))return"-"+M(this).toString(C);for(var _=l(Math.pow(C,6)),I=this,b="";;){var D=he(I,_).g;I=B(I,D.j(_));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=D,E(I))return R+b;for(;6>R.length;)R="0"+R;b=R+b}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function E(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function N(C){return C.h==-1}n.l=function(C){return C=B(this,C),N(C)?-1:E(C)?0:1};function M(C){for(var _=C.g.length,I=[],b=0;b<_;b++)I[b]=~C.g[b];return new s(I,~C.h).add(m)}n.abs=function(){return N(this)?M(this):this},n.add=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],b=0,D=0;D<=_;D++){var R=b+(this.i(D)&65535)+(C.i(D)&65535),w=(R>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);b=w>>>16,R&=65535,w&=65535,I[D]=w<<16|R}return new s(I,I[I.length-1]&-2147483648?-1:0)};function B(C,_){return C.add(M(_))}n.j=function(C){if(E(this)||E(C))return p;if(N(this))return N(C)?M(this).j(M(C)):M(M(this).j(C));if(N(C))return M(this.j(M(C)));if(0>this.l(v)&&0>C.l(v))return l(this.m()*C.m());for(var _=this.g.length+C.g.length,I=[],b=0;b<2*_;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<C.g.length;D++){var R=this.i(b)>>>16,w=this.i(b)&65535,Qr=C.i(D)>>>16,wc=C.i(D)&65535;I[2*b+2*D]+=w*wc,J(I,2*b+2*D),I[2*b+2*D+1]+=R*wc,J(I,2*b+2*D+1),I[2*b+2*D+1]+=w*Qr,J(I,2*b+2*D+1),I[2*b+2*D+2]+=R*Qr,J(I,2*b+2*D+2)}for(b=0;b<_;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=_;b<2*_;b++)I[b]=0;return new s(I,0)};function J(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function X(C,_){this.g=C,this.h=_}function he(C,_){if(E(_))throw Error("division by zero");if(E(C))return new X(p,p);if(N(C))return _=he(M(C),_),new X(M(_.g),M(_.h));if(N(_))return _=he(C,M(_)),new X(M(_.g),_.h);if(30<C.g.length){if(N(C)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var I=m,b=_;0>=b.l(C);)I=ht(I),b=ht(b);var D=De(I,1),R=De(b,1);for(b=De(b,2),I=De(I,2);!E(b);){var w=R.add(b);0>=w.l(C)&&(D=D.add(I),R=w),b=De(b,1),I=De(I,1)}return _=B(C,D.j(_)),new X(D,_)}for(D=p;0<=C.l(_);){for(I=Math.max(1,Math.floor(C.m()/_.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),R=l(I),w=R.j(_);N(w)||0<w.l(C);)I-=b,R=l(I),w=R.j(_);E(R)&&(R=m),D=D.add(R),C=B(C,w)}return new X(D,C)}n.A=function(C){return he(this,C).h},n.and=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)&C.i(b);return new s(I,this.h&C.h)},n.or=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)|C.i(b);return new s(I,this.h|C.h)},n.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),I=[],b=0;b<_;b++)I[b]=this.i(b)^C.i(b);return new s(I,this.h^C.h)};function ht(C){for(var _=C.g.length+1,I=[],b=0;b<_;b++)I[b]=C.i(b)<<1|C.i(b-1)>>>31;return new s(I,C.h)}function De(C,_){var I=_>>5;_%=32;for(var b=C.g.length-I,D=[],R=0;R<b;R++)D[R]=0<_?C.i(R+I)>>>_|C.i(R+I+1)<<32-_:C.i(R+I);return new s(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,OI=dN.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Ii=dN.Integer=s}).apply(typeof lN<"u"?lN:typeof self<"u"?self:typeof window<"u"?window:{});var hp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ei={};var FI,e6,xa,LI,ul,fp,VI,UI,jI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof hp=="object"&&hp];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function E(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,x){for(var j=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)j[Le-2]=arguments[Le];return d.prototype[T].apply(g,j)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,x=g.length||0;c.length=T+x;for(let j=0;j<x;j++)c[T+j]=g[j]}else c.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function J(c){return/^[\s\xa0]*$/.test(c)}function X(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function he(c){return he[" "](c),c}he[" "]=function(){};var ht=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function De(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function C(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let x=0;x<I.length;x++)f=I[x],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function R(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Zg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Qr{constructor(){this.h=this.g=null}add(d,f){let g=wc.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var wc=new B(()=>new f1,c=>c.reset());class f1{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ic,Ec=!1,Zg=new Qr,V0=()=>{let c=a.Promise.resolve(void 0);Ic=()=>{c.then(p1)}};var p1=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){R(f)}var d=wc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ec=!1};function xi(){this.s=this.s,this.C=this.C}xi.prototype.s=!1,xi.prototype.ma=function(){this.s||(this.s=!0,this.N())},xi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ft(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Ft.prototype.h=function(){this.defaultPrevented=!0};var g1=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function bc(c,d){if(Ft.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ht){e:{try{he(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:m1[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&bc.aa.h.call(this)}}E(bc,Ft);var m1={2:"touch",3:"pen",4:"mouse"};bc.prototype.h=function(){bc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Cc="closure_listenable_"+(1e6*Math.random()|0),v1=0;function y1(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++v1,this.da=this.fa=!1}function Zl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Jl(c){this.src=c,this.g={},this.h=0}Jl.prototype.add=function(c,d,f,g,T){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var j=Xg(c,d,g,T);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new y1(d,this.src,x,!!g,T),d.fa=f,c.push(d)),d};function Jg(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=T)&&Array.prototype.splice.call(g,T,1),x&&(Zl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Xg(c,d,f,g){for(var T=0;T<c.length;++T){var x=c[T];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return T}return-1}var em="closure_lm_"+(1e6*Math.random()|0),tm={};function U0(c,d,f,g,T){if(g&&g.once)return B0(c,d,f,g,T);if(Array.isArray(d)){for(var x=0;x<d.length;x++)U0(c,d[x],f,g,T);return null}return f=om(f),c&&c[Cc]?c.K(d,f,l(g)?!!g.capture:!!g,T):j0(c,d,f,!1,g,T)}function j0(c,d,f,g,T,x){if(!d)throw Error("Invalid event type");var j=l(T)?!!T.capture:!!T,Le=rm(c);if(Le||(c[em]=Le=new Jl(c)),f=Le.add(d,f,g,j,x),f.proxy)return f;if(g=_1(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)g1||(T=j),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(H0(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function _1(){function c(f){return d.call(c.src,c.listener,f)}let d=w1;return c}function B0(c,d,f,g,T){if(Array.isArray(d)){for(var x=0;x<d.length;x++)B0(c,d[x],f,g,T);return null}return f=om(f),c&&c[Cc]?c.L(d,f,l(g)?!!g.capture:!!g,T):j0(c,d,f,!0,g,T)}function $0(c,d,f,g,T){if(Array.isArray(d))for(var x=0;x<d.length;x++)$0(c,d[x],f,g,T);else g=l(g)?!!g.capture:!!g,f=om(f),c&&c[Cc]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=Xg(x,f,g,T),-1<f&&(Zl(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=rm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Xg(d,f,g,T)),(f=-1<c?d[c]:null)&&nm(f))}function nm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Cc])Jg(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(H0(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=rm(d))?(Jg(f,c),f.h==0&&(f.src=null,d[em]=null)):Zl(c)}}}function H0(c){return c in tm?tm[c]:tm[c]="on"+c}function w1(c,d){if(c.da)c=!0;else{d=new bc(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&nm(c),c=f.call(g,d)}return c}function rm(c){return c=c[em],c instanceof Jl?c:null}var im="__closure_events_fn_"+(1e9*Math.random()>>>0);function om(c){return typeof c=="function"?c:(c[im]||(c[im]=function(d){return c.handleEvent(d)}),c[im])}function Lt(){xi.call(this),this.i=new Jl(this),this.M=this,this.F=null}E(Lt,xi),Lt.prototype[Cc]=!0,Lt.prototype.removeEventListener=function(c,d,f,g){$0(this,c,d,f,g)};function Zt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Ft(d,c);else if(d instanceof Ft)d.target=d.target||c;else{var T=d;d=new Ft(g,c),b(d,T)}if(T=!0,f)for(var x=f.length-1;0<=x;x--){var j=d.g=f[x];T=Xl(j,g,!0,d)&&T}if(j=d.g=c,T=Xl(j,g,!0,d)&&T,T=Xl(j,g,!1,d)&&T,f)for(x=0;x<f.length;x++)j=d.g=f[x],T=Xl(j,g,!1,d)&&T}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Zl(f[g]);delete c.g[d],c.h--}}this.F=null},Lt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Lt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Xl(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,x=0;x<d.length;++x){var j=d[x];if(j&&!j.da&&j.capture==f){var Le=j.listener,Nt=j.ha||j.src;j.fa&&Jg(c.i,j),T=Le.call(Nt,g)!==!1&&T}}return T&&!g.defaultPrevented}function z0(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function q0(c){c.g=z0(()=>{c.g=null,c.i&&(c.i=!1,q0(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class I1 extends xi{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:q0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dc(c){xi.call(this),this.h=c,this.g={}}E(Dc,xi);var G0=[];function W0(c){De(c.g,function(d,f){this.g.hasOwnProperty(f)&&nm(d)},c),c.g={}}Dc.prototype.N=function(){Dc.aa.N.call(this),W0(this)},Dc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sm=a.JSON.stringify,E1=a.JSON.parse,b1=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function am(){}am.prototype.h=null;function K0(c){return c.h||(c.h=c.i())}function Q0(){}var Tc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cm(){Ft.call(this,"d")}E(cm,Ft);function um(){Ft.call(this,"c")}E(um,Ft);var Do={},Y0=null;function ed(){return Y0=Y0||new Lt}Do.La="serverreachability";function Z0(c){Ft.call(this,Do.La,c)}E(Z0,Ft);function Sc(c){let d=ed();Zt(d,new Z0(d))}Do.STAT_EVENT="statevent";function J0(c,d){Ft.call(this,Do.STAT_EVENT,c),this.stat=d}E(J0,Ft);function Jt(c){let d=ed();Zt(d,new J0(d,c))}Do.Ma="timingevent";function X0(c,d){Ft.call(this,Do.Ma,c),this.size=d}E(X0,Ft);function Ac(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Rc(){this.g=!0}Rc.prototype.xa=function(){this.g=!1};function C1(c,d,f,g,T,x){c.info(function(){if(c.g)if(x)for(var j="",Le=x.split("&"),Nt=0;Nt<Le.length;Nt++){var Se=Le[Nt].split("=");if(1<Se.length){var Vt=Se[0];Se=Se[1];var Ut=Vt.split("_");j=2<=Ut.length&&Ut[1]=="type"?j+(Vt+"="+Se+"&"):j+(Vt+"=redacted&")}}else j=null;else j=x;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+j})}function D1(c,d,f,g,T,x,j){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+x+" "+j})}function Ms(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+S1(c,f)+(g?" "+g:"")})}function T1(c,d){c.info(function(){return"TIMEOUT: "+d})}Rc.prototype.info=function(){};function S1(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var x=T[0];if(x!="noop"&&x!="stop"&&x!="close")for(var j=1;j<T.length;j++)T[j]=""}}}}return sm(f)}catch{return d}}var td={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lm;function nd(){}E(nd,am),nd.prototype.g=function(){return new XMLHttpRequest},nd.prototype.i=function(){return{}},lm=new nd;function Ni(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Dc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tC}function tC(){this.i=null,this.g="",this.h=!1}var nC={},dm={};function hm(c,d,f){c.L=1,c.v=sd(Yr(d)),c.m=f,c.P=!0,rC(c,null)}function rC(c,d){c.F=Date.now(),rd(c),c.A=Yr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),vC(f.i,"t",g),c.C=0,f=c.j.J,c.h=new tC,c.g=OC(c.j,f?d:null,!c.m),0<c.O&&(c.M=new I1(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(G0[0]=T.toString()),T=G0);for(var x=0;x<T.length;x++){var j=U0(f,T[x],g||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Sc(),C1(c.i,c.u,c.A,c.l,c.R,c.m)}Ni.prototype.ca=function(c){c=c.target;let d=this.M;d&&Zr(c)==3?d.j():this.Y(c)},Ni.prototype.Y=function(c){try{if(c==this.g)e:{let Ut=Zr(this.g);var d=this.g.Ba();let Ps=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||CC(this.g)))){this.J||Ut!=4||d==7||(d==8||0>=Ps?Sc(3):Sc(2)),fm(this);var f=this.g.Z();this.X=f;t:if(iC(this)){var g=CC(this.g);c="";var T=g.length,x=Zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){To(this),Mc(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(x&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,D1(this.i,this.u,this.A,this.l,this.R,Ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,Nt=this.g;if((Le=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!J(Le)){var Se=Le;break t}}Se=null}if(f=Se)Ms(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pm(this,f);else{this.o=!1,this.s=3,Jt(12),To(this),Mc(this);break e}}if(this.P){f=!0;let zn;for(;!this.J&&this.C<j.length;)if(zn=A1(this,j),zn==dm){Ut==4&&(this.s=4,Jt(14),f=!1),Ms(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==nC){this.s=4,Jt(15),Ms(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Ms(this.i,this.l,zn,null),pm(this,zn);if(iC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||j.length!=0||this.h.h||(this.s=1,Jt(16),f=!1),this.o=this.o&&f,!f)Ms(this.i,this.l,j,"[Invalid Chunked Response]"),To(this),Mc(this);else if(0<j.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),wm(Vt),Vt.M=!0,Jt(11))}}else Ms(this.i,this.l,j,null),pm(this,j);Ut==4&&To(this),this.o&&!this.J&&(Ut==4?xC(this.j,this):(this.o=!1,rd(this)))}else q1(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),To(this),Mc(this)}}}catch{}finally{}};function iC(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function A1(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?dm:(f=Number(d.substring(f,g)),isNaN(f)?nC:(g+=1,g+f>d.length?dm:(d=d.slice(g,g+f),c.C=g+f,d)))}Ni.prototype.cancel=function(){this.J=!0,To(this)};function rd(c){c.S=Date.now()+c.I,oC(c,c.I)}function oC(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ac(m(c.ba,c),d)}function fm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ni.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(T1(this.i,this.A),this.L!=2&&(Sc(),Jt(17)),To(this),this.s=2,Mc(this)):oC(this,this.S-c)};function Mc(c){c.j.G==0||c.J||xC(c.j,c)}function To(c){fm(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,W0(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function pm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||gm(f.h,c))){if(!c.K&&gm(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)dd(f),ud(f);else break e;_m(f),Jt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ac(m(f.Za,f),6e3));if(1>=cC(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ao(f,11)}else if((c.K||f.g==c)&&dd(f),!J(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let Se=T[d];if(f.T=Se[0],Se=Se[1],f.G==2)if(Se[0]=="c"){f.K=Se[1],f.ia=Se[2];let Vt=Se[3];Vt!=null&&(f.la=Vt,f.j.info("VER="+f.la));let Ut=Se[4];Ut!=null&&(f.Aa=Ut,f.j.info("SVER="+f.Aa));let Ps=Se[5];Ps!=null&&typeof Ps=="number"&&0<Ps&&(g=1.5*Ps,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let zn=c.g;if(zn){let fd=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fd){var x=g.h;x.g||fd.indexOf("spdy")==-1&&fd.indexOf("quic")==-1&&fd.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(mm(x,x.h),x.h=null))}if(g.D){let Im=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Im&&(g.ya=Im,We(g.I,g.D,Im))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var j=c;if(g.qa=kC(g,g.J?g.ia:null,g.W),j.K){uC(g.h,j);var Le=j,Nt=g.L;Nt&&(Le.I=Nt),Le.B&&(fm(Le),rd(Le)),g.g=j}else RC(g);0<f.i.length&&ld(f)}else Se[0]!="stop"&&Se[0]!="close"||Ao(f,7);else f.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Ao(f,7):ym(f):Se[0]!="noop"&&f.l&&f.l.ta(Se),f.v=0)}}Sc(4)}catch{}}var R1=class{constructor(c,d){this.g=c,this.map=d}};function sC(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aC(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function cC(c){return c.h?1:c.g?c.g.size:0}function gm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function mm(c,d){c.g?c.g.add(d):c.h=d}function uC(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}sC.prototype.cancel=function(){if(this.i=lC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function lC(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function M1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function x1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function dC(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=x1(c),g=M1(c),T=g.length,x=0;x<T;x++)d.call(void 0,g[x],f&&f[x],c)}var hC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function N1(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var x=c[f].substring(0,g);T=c[f].substring(g+1)}else x=c[f];d(x,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function So(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof So){this.h=c.h,id(this,c.j),this.o=c.o,this.g=c.g,od(this,c.s),this.l=c.l;var d=c.i,f=new Pc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),fC(this,f),this.m=c.m}else c&&(d=String(c).match(hC))?(this.h=!1,id(this,d[1]||"",!0),this.o=xc(d[2]||""),this.g=xc(d[3]||"",!0),od(this,d[4]),this.l=xc(d[5]||"",!0),fC(this,d[6]||"",!0),this.m=xc(d[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}So.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Nc(d,pC,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Nc(d,pC,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Nc(f,f.charAt(0)=="/"?O1:k1,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Nc(f,L1)),c.join("")};function Yr(c){return new So(c)}function id(c,d,f){c.j=f?xc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function od(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function fC(c,d,f){d instanceof Pc?(c.i=d,V1(c.i,c.h)):(f||(d=Nc(d,F1)),c.i=new Pc(d,c.h))}function We(c,d,f){c.i.set(d,f)}function sd(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function xc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Nc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,P1),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function P1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var pC=/[#\/\?@]/g,k1=/[#\?:]/g,O1=/[#\?]/g,F1=/[#\?@]/g,L1=/#/g;function Pc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Pi(c){c.g||(c.g=new Map,c.h=0,c.i&&N1(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Pc.prototype,n.add=function(c,d){Pi(this),this.i=null,c=xs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function gC(c,d){Pi(c),d=xs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function mC(c,d){return Pi(c),d=xs(c,d),c.g.has(d)}n.forEach=function(c,d){Pi(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},n.na=function(){Pi(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let x=0;x<T.length;x++)f.push(d[g])}return f},n.V=function(c){Pi(this);let d=[];if(typeof c=="string")mC(this,c)&&(d=d.concat(this.g.get(xs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Pi(this),this.i=null,c=xs(this,c),mC(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function vC(c,d,f){gC(c,d),0<f.length&&(c.i=null,c.g.set(xs(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var T=x;j[g]!==""&&(T+="="+encodeURIComponent(String(j[g]))),c.push(T)}}return this.i=c.join("&")};function xs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function V1(c,d){d&&!c.j&&(Pi(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(gC(this,g),vC(this,T,f))},c)),c.j=d}function U1(c,d){let f=new Rc;if(a.Image){let g=new Image;g.onload=v(ki,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(ki,f,"TestLoadImage: error",!1,d,g),g.onabort=v(ki,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(ki,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function j1(c,d){let f=new Rc,g=new AbortController,T=setTimeout(()=>{g.abort(),ki(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(x=>{clearTimeout(T),x.ok?ki(f,"TestPingServer: ok",!0,d):ki(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),ki(f,"TestPingServer: error",!1,d)})}function ki(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function B1(){this.g=new b1}function $1(c,d,f){let g=f||"";try{dC(c,function(T,x){let j=T;l(T)&&(j=sm(T)),d.push(g+x+"="+encodeURIComponent(j))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function kc(c){this.l=c.Ub||null,this.j=c.eb||!1}E(kc,am),kc.prototype.g=function(){return new ad(this.l,this.j)},kc.prototype.i=function(c){return function(){return c}}({});function ad(c,d){Lt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(ad,Lt),n=ad.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Fc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Fc(this)),this.g&&(this.readyState=3,Fc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yC(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function yC(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Oc(this):Fc(this),this.readyState==3&&yC(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Oc(this))},n.Qa=function(c){this.g&&(this.response=c,Oc(this))},n.ga=function(){this.g&&Oc(this)};function Oc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Fc(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Fc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ad.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function _C(c){let d="";return De(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function vm(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=_C(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):We(c,d,f))}function et(c){Lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(et,Lt);var H1=/^https?$/i,z1=["POST","PUT"];n=et.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lm.g(),this.v=this.o?K0(this.o):K0(lm),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){wC(this,x);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(z1,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,j]of f)this.g.setRequestHeader(x,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bC(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){wC(this,x)}};function wC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,IC(c),cd(c)}function IC(c){c.A||(c.A=!0,Zt(c,"complete"),Zt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Zt(this,"complete"),Zt(this,"abort"),cd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cd(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?EC(this):this.bb())},n.bb=function(){EC(this)};function EC(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Zr(c)!=4||c.Z()!=2)){if(c.u&&Zr(c)==4)z0(c.Ea,0,c);else if(Zt(c,"readystatechange"),Zr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=j===0){var T=String(c.D).match(hC)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!H1.test(T?T.toLowerCase():"")}f=g}if(f)Zt(c,"complete"),Zt(c,"success");else{c.m=6;try{var x=2<Zr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",IC(c)}}finally{cd(c)}}}}function cd(c,d){if(c.g){bC(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Zt(c,"ready");try{f.onreadystatechange=g}catch{}}}function bC(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Zr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Zr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),E1(d)}};function CC(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function q1(c){let d={};c=(c.g&&2<=Zr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(J(c[g]))continue;var f=D(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[T]||[];d[T]=x,x.push(f)}C(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function DC(c){this.Aa=0,this.i=[],this.j=new Rc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lc("baseRetryDelayMs",5e3,c),this.cb=Lc("retryDelaySeedMs",1e4,c),this.Wa=Lc("forwardChannelMaxRetries",2,c),this.wa=Lc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new sC(c&&c.concurrentRequestLimit),this.Da=new B1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=DC.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Jt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=kC(this,null,this.W),ld(this)};function ym(c){if(TC(c),c.G==3){var d=c.U++,f=Yr(c.I);if(We(f,"SID",c.K),We(f,"RID",d),We(f,"TYPE","terminate"),Vc(c,f),d=new Ni(c,c.j,d),d.L=2,d.v=sd(Yr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=OC(d.j,null),d.g.ea(d.v)),d.F=Date.now(),rd(d)}PC(c)}function ud(c){c.g&&(wm(c),c.g.cancel(),c.g=null)}function TC(c){ud(c),c.u&&(a.clearTimeout(c.u),c.u=null),dd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ld(c){if(!aC(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ic||V0(),Ec||(Ic(),Ec=!0),Zg.add(d,c),c.B=0}}function G1(c,d){return cC(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ac(m(c.Ga,c,d),NC(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Ni(this,this.j,c),x=this.o;if(this.S&&(x?(x=_(x),b(x,this.S)):x=this.S),this.m!==null||this.O||(T.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=AC(this,T,d),f=Yr(this.I),We(f,"RID",c),We(f,"CVER",22),this.D&&We(f,"X-HTTP-Session-Id",this.D),Vc(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(_C(x)))+"&"+d:this.m&&vm(f,this.m,x)),mm(this.h,T),this.Ua&&We(f,"TYPE","init"),this.P?(We(f,"$req",d),We(f,"SID","null"),T.T=!0,hm(T,f,null)):hm(T,f,d),this.G=2}}else this.G==3&&(c?SC(this,c):this.i.length==0||aC(this.h)||SC(this))};function SC(c,d){var f;d?f=d.l:f=c.U++;let g=Yr(c.I);We(g,"SID",c.K),We(g,"RID",f),We(g,"AID",c.T),Vc(c,g),c.m&&c.o&&vm(g,c.m,c.o),f=new Ni(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=AC(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),mm(c.h,f),hm(f,g,d)}function Vc(c,d){c.H&&De(c.H,function(f,g){We(d,g,f)}),c.l&&dC({},function(f,g){We(d,g,f)})}function AC(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let x=-1;for(;;){let j=["count="+f];x==-1?0<f?(x=T[0].g,j.push("ofs="+x)):x=0:j.push("ofs="+x);let Le=!0;for(let Nt=0;Nt<f;Nt++){let Se=T[Nt].g,Vt=T[Nt].map;if(Se-=x,0>Se)x=Math.max(0,T[Nt].g-100),Le=!1;else try{$1(Vt,j,"req"+Se+"_")}catch{g&&g(Vt)}}if(Le){g=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function RC(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ic||V0(),Ec||(Ic(),Ec=!0),Zg.add(d,c),c.v=0}}function _m(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ac(m(c.Fa,c),NC(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,MC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ac(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jt(10),ud(this),MC(this))};function wm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function MC(c){c.g=new Ni(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Yr(c.qa);We(d,"RID","rpc"),We(d,"SID",c.K),We(d,"AID",c.T),We(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(d,"TO",c.ja),We(d,"TYPE","xmlhttp"),Vc(c,d),c.m&&c.o&&vm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=sd(Yr(d)),f.m=null,f.P=!0,rC(f,c)}n.Za=function(){this.C!=null&&(this.C=null,ud(this),_m(this),Jt(19))};function dd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function xC(c,d){var f=null;if(c.g==d){dd(c),wm(c),c.g=null;var g=2}else if(gm(c.h,d))f=d.D,uC(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=ed(),Zt(g,new X0(g,f)),ld(c)}else RC(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&G1(c,d)||g==2&&_m(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:Ao(c,5);break;case 4:Ao(c,10);break;case 3:Ao(c,6);break;default:Ao(c,2)}}}function NC(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ao(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new So(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||id(g,"https"),sd(g),T?U1(g.toString(),f):j1(g.toString(),f)}else Jt(2);c.G=0,c.l&&c.l.sa(d),PC(c),TC(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function PC(c){if(c.G=0,c.ka=[],c.l){let d=lC(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function kC(c,d,f){var g=f instanceof So?Yr(f):new So(f);if(g.g!="")d&&(g.g=d+"."+g.g),od(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var x=new So(null);g&&id(x,g),d&&(x.g=d),T&&od(x,T),f&&(x.l=f),g=x}return f=c.D,d=c.ya,f&&d&&We(g,f,d),We(g,"VER",c.la),Vc(c,g),g}function OC(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new et(new kc({eb:f})):new et(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function FC(){}n=FC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function hd(){}hd.prototype.g=function(c,d){return new _n(c,d)};function _n(c,d){Lt.call(this),this.g=new DC(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!J(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!J(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ns(this)}E(_n,Lt),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){ym(this.g)},_n.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=sm(c),c=f);d.i.push(new R1(d.Ya++,c)),d.G==3&&ld(d)},_n.prototype.N=function(){this.g.l=null,delete this.j,ym(this.g),delete this.g,_n.aa.N.call(this)};function LC(c){cm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}E(LC,cm);function VC(){um.call(this),this.status=1}E(VC,um);function Ns(c){this.g=c}E(Ns,FC),Ns.prototype.ua=function(){Zt(this.g,"a")},Ns.prototype.ta=function(c){Zt(this.g,new LC(c))},Ns.prototype.sa=function(c){Zt(this.g,new VC)},Ns.prototype.ra=function(){Zt(this.g,"b")},hd.prototype.createWebChannel=hd.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,jI=Ei.createWebChannelTransport=function(){return new hd},UI=Ei.getStatEventTarget=function(){return ed()},VI=Ei.Event=Do,fp=Ei.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},td.NO_ERROR=0,td.TIMEOUT=8,td.HTTP_ERROR=6,ul=Ei.ErrorCode=td,eC.COMPLETE="complete",LI=Ei.EventType=eC,Q0.EventType=Tc,Tc.OPEN="a",Tc.CLOSE="b",Tc.ERROR="c",Tc.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,xa=Ei.WebChannel=Q0,e6=Ei.FetchXmlHttpFactory=kc,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,FI=Ei.XhrIo=et}).apply(typeof hp<"u"?hp:typeof self<"u"?self:typeof window<"u"?window:{});var hN="@firebase/firestore",fN="4.7.11";var Rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");var Ja="11.6.1";var ws=new xr("@firebase/firestore");function Na(){return ws.logLevel}function q(n,...e){if(ws.logLevel<=we.DEBUG){let t=e.map(Nb);ws.debug(`Firestore (${Ja}): ${n}`,...t)}}function bi(n,...e){if(ws.logLevel<=we.ERROR){let t=e.map(Nb);ws.error(`Firestore (${Ja}): ${n}`,...t)}}function ja(n,...e){if(ws.logLevel<=we.WARN){let t=e.map(Nb);ws.warn(`Firestore (${Ja}): ${n}`,...t)}}function Nb(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,iP(n,r,t)}function iP(n,e,t){let r=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bi(r),new Error(r)}function Pe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||iP(e,i,r)}function ae(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends on{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ur=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var wp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rt.UNAUTHENTICATED))}shutdown(){}},GI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},WI=class{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ur,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>y(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ur)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new wp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new Rt(e)}},KI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},QI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new KI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ip=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},YI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pe(this.o===void 0,3512);let r=o=>{o.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ip(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ip(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function t6(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function oP(){return new TextEncoder}var Ep=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=t6(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ve(n,e){return n<e?-1:n>e?1:0}function ZI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ve(r,i);{let o=oP(),s=n6(o.encode(pN(n,t)),o.encode(pN(e,t)));return s!==0?s:ve(r,i)}}t+=r>65535?2:1}return ve(n.length,e.length)}function pN(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function n6(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ve(n[t],e[t]);return ve(n.length,e.length)}function Ba(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var gN=-62135596800,mN=1e6,Xe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*mN);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gN)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mN}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-gN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Xe(0,0))}static max(){return new n(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var vN="__name__",bp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ve(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):ZI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ii.fromString(e.substring(4,e.length-2))}},Ze=class n extends bp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},r6=/^[_a-zA-Z][_a-zA-Z0-9]*$/,An=class n extends bp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return r6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vN}static keyField(){return new n([vN])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new $(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new $(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Y=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ze.fromString(e))}static fromName(e){return new n(Ze.fromString(e).popFirst(5))}static empty(){return new n(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ze(e.slice()))}};var pl=-1,JI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};JI.UNKNOWN_ID=-1;function i6(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new Xe(t+1,0):new Xe(t,r));return new Is(i,Y.empty(),e)}function o6(n){return new Is(n.readTime,n.key,pl)}var Is=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),Y.empty(),pl)}static max(){return new n(le.max(),Y.empty(),pl)}};function s6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:ve(n.largestBatchId,e.largestBatchId))}var a6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",XI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xa(n){return y(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==a6)throw n;q("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function c6(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ec(n){return n.name==="IndexedDbTransactionError"}var Pb=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),kb=-1;function rg(n){return n==null}function gl(n){return n===0&&1/n==-1/0}function u6(n){return typeof n=="number"&&Number.isInteger(n)&&!gl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var sP="";function l6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=yN(e)),e=d6(n.get(t),e);return yN(e)}function d6(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case sP:t+="";break;default:t+=o}}return t}function yN(n){return n+sP+""}var h6="remoteDocuments",aP="owner";var cP="mutationQueues";var uP="mutations";var lP="documentMutations",f6="remoteDocumentsV14";var dP="remoteDocumentGlobal";var hP="targets";var fP="targetDocuments";var pP="targetGlobal",gP="collectionParents";var mP="clientMetadata";var vP="bundles";var yP="namedQueries";var p6="indexConfiguration";var g6="indexState";var m6="indexEntries";var _P="documentOverlays";var v6="globals";var y6=[cP,uP,lP,h6,hP,aP,pP,fP,mP,dP,gP,vP,yP],die=[...y6,_P],_6=[cP,uP,lP,f6,hP,aP,pP,fP,mP,dP,gP,vP,yP,_P],w6=_6,I6=[...w6,p6,g6,m6];var hie=[...I6,v6];function _N(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function wo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var it=class n{constructor(e,t){this.comparator=e,this.root=t||Vr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fa(this.root,e,this.comparator,!0)}},Fa=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Vr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}};Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1;Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Vr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Mt=class n{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cp(this.data.getIterator())}getIteratorFrom(e){return new Cp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Cp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Hn=class n{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new n([])}unionWith(e){let t=new Mt(An.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Dp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Yt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Dp("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Yt.EMPTY_BYTE_STRING=new Yt("");var E6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(n){if(Pe(!!n,39018),typeof n=="string"){let e=0,t=E6.exec(n);if(Pe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(n.seconds),nanos:Ye(n.nanos)}}function Ye(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Di(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}var IP="server_timestamp",EP="__type__",bP="__previous_value__",CP="__local_write_time__";function ig(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[EP])===null||t===void 0?void 0:t.stringValue)===IP}function og(n){let e=n.mapValue.fields[bP];return ig(e)?og(e):e}function ml(n){let e=Ci(n.mapValue.fields[CP].timestampValue);return new Xe(e.seconds,e.nanos)}var eE=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Tp="(default)",Sp=class n{constructor(e,t){this.projectId=e,this.database=t||Tp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Tp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ob="__type__",DP="__max__",pp={mapValue:{fields:{__type__:{stringValue:DP}}}},Fb="__vector__",$a="value";function fo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ig(n)?4:SP(n)?9007199254740991:TP(n)?10:11:ne(28295,{value:n})}function $r(n,e){if(n===e)return!0;let t=fo(n);if(t!==fo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ml(n).isEqual(ml(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Ci(i.timestampValue),a=Ci(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Di(i.bytesValue).isEqual(Di(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ye(i.geoPointValue.latitude)===Ye(o.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ye(i.integerValue)===Ye(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ye(i.doubleValue),a=Ye(o.doubleValue);return s===a?gl(s)===gl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ba(n.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(_N(s)!==_N(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!$r(s[u],a[u])))return!1;return!0}(n,e);default:return ne(52216,{left:n})}}function vl(n,e){return(n.values||[]).find(t=>$r(t,e))!==void 0}function Ha(n,e){if(n===e)return 0;let t=fo(n),r=fo(e);if(t!==r)return ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ve(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ye(o.integerValue||o.doubleValue),u=Ye(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return wN(n.timestampValue,e.timestampValue);case 4:return wN(ml(n),ml(e));case 5:return ZI(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Di(o),u=Di(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ve(a[l],u[l]);if(h!==0)return h}return ve(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ve(Ye(o.latitude),Ye(s.latitude));return a!==0?a:ve(Ye(o.longitude),Ye(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return IN(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p[$a])===null||a===void 0?void 0:a.arrayValue,E=(u=m[$a])===null||u===void 0?void 0:u.arrayValue,N=ve(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=E?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:IN(v,E)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===pp.mapValue&&s===pp.mapValue)return 0;if(o===pp.mapValue)return 1;if(s===pp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ZI(u[p],h[p]);if(m!==0)return m;let v=Ha(a[u[p]],l[h[p]]);if(v!==0)return v}return ve(u.length,h.length)}(n.mapValue,e.mapValue);default:throw ne(23264,{Pe:t})}}function wN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ve(n,e);let t=Ci(n),r=Ci(e),i=ve(t.seconds,r.seconds);return i!==0?i:ve(t.nanos,r.nanos)}function IN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ha(t[i],r[i]);if(o)return o}return ve(t.length,r.length)}function za(n){return tE(n)}function tE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ci(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Di(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Y.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=tE(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${tE(t.fields[s])}`;return i+"}"}(n.mapValue):ne(61005,{value:n})}function vp(n){switch(fo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=og(n);return e?16+vp(e):16;case 5:return 2*n.stringValue.length;case 6:return Di(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+vp(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return wo(r.fields,(o,s)=>{i+=o.length+vp(s)}),i}(n.mapValue);default:throw ne(13486,{value:n})}}function Ap(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nE(n){return!!n&&"integerValue"in n}function Lb(n){return!!n&&"arrayValue"in n}function EN(n){return!!n&&"nullValue"in n}function bN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yp(n){return!!n&&"mapValue"in n}function TP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Ob])===null||t===void 0?void 0:t.stringValue)===Fb}function dl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return wo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DP}var pie={mapValue:{fields:{[Ob]:{stringValue:Fb},[$a]:{arrayValue:{}}}}};var Sn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(t)}setAll(e){let t=An.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=dl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());yp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];yp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){wo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(dl(this.value))}};function AP(n){let e=[];return wo(n.fields,(t,r)=>{let i=new An([t]);if(yp(r)){let o=AP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Hn(e)}var lr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),Sn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var po=class{constructor(e,t){this.position=e,this.inclusive=t}};function CN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Y.comparator(Y.fromName(s.referenceValue),t.key):r=Ha(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function DN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$r(n.position[t],e.position[t]))return!1;return!0}var Es=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function b6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Rp=class{},_t=class n extends Rp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new iE(e,t,r):t==="array-contains"?new aE(e,r):t==="in"?new cE(e,r):t==="not-in"?new uE(e,r):t==="array-contains-any"?new lE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new oE(e,r):new sE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ha(t,this.value)):t!==null&&fo(this.value)===fo(t)&&this.matchesComparison(Ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},dr=class n extends Rp{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return RP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function RP(n){return n.op==="and"}function MP(n){return C6(n)&&RP(n)}function C6(n){for(let e of n.filters)if(e instanceof dr)return!1;return!0}function rE(n){if(n instanceof _t)return n.field.canonicalString()+n.op.toString()+za(n.value);if(MP(n))return n.filters.map(e=>rE(e)).join(",");{let e=n.filters.map(t=>rE(t)).join(",");return`${n.op}(${e})`}}function xP(n,e){return n instanceof _t?function(r,i){return i instanceof _t&&r.op===i.op&&r.field.isEqual(i.field)&&$r(r.value,i.value)}(n,e):n instanceof dr?function(r,i){return i instanceof dr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&xP(s,i.filters[a]),!0):!1}(n,e):void ne(19439)}function NP(n){return n instanceof _t?function(t){return`${t.field.canonicalString()} ${t.op} ${za(t.value)}`}(n):n instanceof dr?function(t){return t.op.toString()+" {"+t.getFilters().map(NP).join(" ,")+"}"}(n):"Filter"}var iE=class extends _t{constructor(e,t,r){super(e,t,r),this.key=Y.fromName(r.referenceValue)}matches(e){let t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}},oE=class extends _t{constructor(e,t){super(e,"in",t),this.keys=PP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},sE=class extends _t{constructor(e,t){super(e,"not-in",t),this.keys=PP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function PP(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Y.fromName(r.referenceValue))}var aE=class extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Lb(t)&&vl(t.arrayValue,this.value)}},cE=class extends _t{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&vl(this.value.arrayValue,t)}},uE=class extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vl(this.value.arrayValue,t)}},lE=class extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Lb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vl(this.value.arrayValue,r))}};var dE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function TN(n,e=null,t=[],r=[],i=null,o=null,s=null){return new dE(n,e,t,r,i,o,s)}function Vb(n){let e=ae(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>rE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),rg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>za(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>za(r)).join(",")),e.Ie=t}return e.Ie}function Ub(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!b6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DN(n.startAt,e.startAt)&&DN(n.endAt,e.endAt)}function hE(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Hr=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function D6(n,e,t,r,i,o,s,a){return new Hr(n,e,t,r,i,o,s,a)}function sg(n){return new Hr(n)}function SN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jb(n){return n.collectionGroup!==null}function La(n){let e=ae(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Mt(An.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Es(o,r))}),t.has(An.keyField().canonicalString())||e.Ee.push(new Es(An.keyField(),r))}return e.Ee}function Ur(n){let e=ae(n);return e.de||(e.de=T6(e,La(n))),e.de}function T6(n,e){if(n.limitType==="F")return TN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Es(i.field,o)});let t=n.endAt?new po(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new po(n.startAt.position,n.startAt.inclusive):null;return TN(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function fE(n,e){let t=n.filters.concat([e]);return new Hr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function pE(n,e,t){return new Hr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ag(n,e){return Ub(Ur(n),Ur(e))&&n.limitType===e.limitType}function kP(n){return`${Vb(Ur(n))}|lt:${n.limitType}`}function Pa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>NP(i)).join(", ")}]`),rg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>za(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>za(i)).join(",")),`Target(${r})`}(Ur(n))}; limitType=${n.limitType})`}function cg(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Y.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of La(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=CN(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,La(r),i)||r.endAt&&!function(s,a,u){let l=CN(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,La(r),i))}(n,e)}function S6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function OP(n){return(e,t)=>{let r=!1;for(let i of La(n)){let o=A6(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function A6(n,e,t){let r=n.field.isKeyField()?Y.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ha(u,l):ne(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:n.dir})}}var Ti=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return wP(this.inner)}size(){return this.innerSize}};var R6=new it(Y.comparator);function Si(){return R6}var FP=new it(Y.comparator);function ll(...n){let e=FP;for(let t of n)e=e.insert(t.key,t);return e}function LP(n){let e=FP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function vs(){return hl()}function VP(){return hl()}function hl(){return new Ti(n=>n.toString(),(n,e)=>n.isEqual(e))}var M6=new it(Y.comparator),x6=new Mt(Y.comparator);function be(...n){let e=x6;for(let t of n)e=e.add(t);return e}var N6=new Mt(ve);function P6(){return N6}function Bb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gl(e)?"-0":e}}function UP(n){return{integerValue:""+n}}function jP(n,e){return u6(e)?UP(e):Bb(n,e)}var qa=class{constructor(){this._=void 0}};function k6(n,e,t){return n instanceof Ga?function(i,o){let s={fields:{[EP]:{stringValue:IP},[CP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ig(o)&&(o=og(o)),o&&(s.fields[bP]=o),{mapValue:s}}(t,e):n instanceof go?$P(n,e):n instanceof mo?HP(n,e):function(i,o){let s=BP(i,o),a=AN(s)+AN(i.Re);return nE(s)&&nE(i.Re)?UP(a):Bb(i.serializer,a)}(n,e)}function O6(n,e,t){return n instanceof go?$P(n,e):n instanceof mo?HP(n,e):t}function BP(n,e){return n instanceof bs?function(r){return nE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ga=class extends qa{},go=class extends qa{constructor(e){super(),this.elements=e}};function $P(n,e){let t=zP(e);for(let r of n.elements)t.some(i=>$r(i,r))||t.push(r);return{arrayValue:{values:t}}}var mo=class extends qa{constructor(e){super(),this.elements=e}};function HP(n,e){let t=zP(e);for(let r of n.elements)t=t.filter(i=>!$r(i,r));return{arrayValue:{values:t}}}var bs=class extends qa{constructor(e,t){super(),this.serializer=e,this.Re=t}};function AN(n){return Ye(n.integerValue||n.doubleValue)}function zP(n){return Lb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var yl=class{constructor(e,t){this.field=e,this.transform=t}};function F6(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof go&&i instanceof go||r instanceof mo&&i instanceof mo?Ba(r.elements,i.elements,$r):r instanceof bs&&i instanceof bs?$r(r.Re,i.Re):r instanceof Ga&&i instanceof Ga}(n.transform,e.transform)}var gE=class{constructor(e,t){this.version=e,this.transformResults=t}},jr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _p(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Wa=class{};function qP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _l(n.key,jr.none()):new Cs(n.key,n.data,jr.none());{let t=n.data,r=Sn.empty(),i=new Mt(An.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new zr(n.key,r,new Hn(i.toArray()),jr.none())}}function L6(n,e,t){n instanceof Cs?function(i,o,s){let a=i.value.clone(),u=MN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof zr?function(i,o,s){if(!_p(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=MN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(GP(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function fl(n,e,t,r){return n instanceof Cs?function(o,s,a,u){if(!_p(o.precondition,s))return a;let l=o.value.clone(),h=xN(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof zr?function(o,s,a,u){if(!_p(o.precondition,s))return a;let l=xN(o.fieldTransforms,u,s),h=s.data;return h.setAll(GP(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return _p(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function V6(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=BP(r.transform,i||null);o!=null&&(t===null&&(t=Sn.empty()),t.set(r.field,o))}return t||null}function RN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ba(r,i,(o,s)=>F6(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Cs=class extends Wa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},zr=class extends Wa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function GP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function MN(n,e,t){let r=new Map;Pe(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,O6(s,a,t[i]))}return r}function xN(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,k6(o,s,e))}return r}var _l=class extends Wa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},mE=class extends Wa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var vE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&L6(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=fl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=fl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=VP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=qP(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,(t,r)=>RN(t,r))&&Ba(this.baseMutations,e.baseMutations,(t,r)=>RN(t,r))}},yE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return M6}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var _E=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var wE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var vt,Ce;function U6(n){switch(n){case k.OK:return ne(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return ne(15467,{code:n})}}function WP(n){if(n===void 0)return bi("GRPC error has no .code"),k.UNKNOWN;switch(n){case vt.OK:return k.OK;case vt.CANCELLED:return k.CANCELLED;case vt.UNKNOWN:return k.UNKNOWN;case vt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case vt.INTERNAL:return k.INTERNAL;case vt.UNAVAILABLE:return k.UNAVAILABLE;case vt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case vt.NOT_FOUND:return k.NOT_FOUND;case vt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case vt.ABORTED:return k.ABORTED;case vt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case vt.DATA_LOSS:return k.DATA_LOSS;default:return ne(39323,{code:n})}}(Ce=vt||(vt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var NN=null;var j6=new Ii([4294967295,4294967295],0);function PN(n){let e=oP().encode(n),t=new OI;return t.update(e),new Uint8Array(t.digest())}function kN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ii([t,r],0),new Ii([i,o],0)]}var IE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ys(`Invalid padding: ${t}`);if(r<0)throw new ys(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ys(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ys(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ii.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(Ii.fromNumber(r)));return i.compare(j6)===1&&(i=new Ii([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=PN(e),[r,i]=kN(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=PN(e),[r,i]=kN(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ys=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Mp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,wl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new it(ve),Si(),be())}},wl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,be(),be(),be())}};var Va=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},xp=class{constructor(e,t){this.targetId=e,this.Ce=t}},Np=class{constructor(e,t,r=Yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Pp=class{constructor(){this.Fe=0,this.Me=ON(),this.xe=Yt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=be(),t=be(),r=be();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:o})}}),new wl(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=ON()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Pe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},EE=class{constructor(e){this.ze=e,this.je=new Map,this.He=Si(),this.Je=gp(),this.Ye=gp(),this.Ze=new it(ve)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(hE(o))if(r===0){let s=new Y(o.path);this.tt(t,s,lr.newNoDocument(s,le.min()))}else Pe(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),u=a?this.lt(a,e,s):1;if(u!==0){this.st(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,l)}NN?.ht(function(h,p,m,v,E){var N,M,B,J,X,he;let ht={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},De=p.unchangedNames;return De&&(ht.bloomFilter={applied:E===0,hashCount:(N=De?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(J=(B=(M=De?.bits)===null||M===void 0?void 0:M.bitmap)===null||B===void 0?void 0:B.length)!==null&&J!==void 0?J:0,padding:(he=(X=De?.bits)===null||X===void 0?void 0:X.padding)!==null&&he!==void 0?he:0,mightContain:C=>{var _;return(_=v?.mightContain(C))!==null&&_!==void 0&&_}}),ht}(s,e.Ce,this.ze.Pt(),a,u))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Di(r).toUint8Array()}catch(u){if(u instanceof Dp)return ja("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new IE(s,i,o)}catch(u){return ja(u instanceof ys?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&hE(a.target)){let u=new Y(a.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,lr.newNoDocument(u,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=be();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new Mp(e,t,this.Ze,this.He,r);return this.He=Si(),this.Je=gp(),this.Ye=gp(),this.Ze=new it(ve),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Pp,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Mt(ve),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Mt(ve),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Pp),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function gp(){return new it(Y.comparator)}function ON(){return new it(Y.comparator)}var B6={asc:"ASCENDING",desc:"DESCENDING"},$6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H6={and:"AND",or:"OR"},bE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function CE(n,e){return n.useProto3Json||rg(e)?e:{value:e}}function kp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function z6(n,e){return kp(n,e.toTimestamp())}function Br(n){return Pe(!!n,49232),le.fromTimestamp(function(t){let r=Ci(t);return new Xe(r.seconds,r.nanos)}(n))}function $b(n,e){return DE(n,e).canonicalString()}function DE(n,e){let t=function(i){return new Ze(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function QP(n){let e=Ze.fromString(n);return Pe(ek(e),10190,{key:e.toString()}),e}function TE(n,e){return $b(n.databaseId,e.path)}function BI(n,e){let t=QP(e);if(t.get(1)!==n.databaseId.projectId)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(ZP(t))}function YP(n,e){return $b(n.databaseId,e)}function q6(n){let e=QP(n);return e.length===4?Ze.emptyPath():ZP(e)}function SE(n){return new Ze(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZP(n){return Pe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function FN(n,e,t){return{name:TE(n,e),fields:t.value.mapValue.fields}}function G6(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Pe(h===void 0||typeof h=="string",58123),Yt.fromBase64String(h||"")):(Pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Yt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?k.UNKNOWN:WP(l.code);return new $(h,l.message||"")}(s);t=new Np(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=BI(n,r.document.name),o=Br(r.document.updateTime),s=r.document.createTime?Br(r.document.createTime):le.min(),a=new Sn({mapValue:{fields:r.document.fields}}),u=lr.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Va(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=BI(n,r.document),o=r.readTime?Br(r.readTime):le.min(),s=lr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Va([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=BI(n,r.document),o=r.removedTargetIds||[];t=new Va([],o,i,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new wE(i,o),a=r.targetId;t=new xp(a,s)}}return t}function W6(n,e){let t;if(e instanceof Cs)t={update:FN(n,e.key,e.value)};else if(e instanceof _l)t={delete:TE(n,e.key)};else if(e instanceof zr)t={update:FN(n,e.key,e.data),updateMask:nG(e.fieldMask)};else{if(!(e instanceof mE))return ne(16599,{ft:e.type});t={verify:TE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ga)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof go)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof mo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof bs)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw ne(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:z6(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne(27497)}(n,e.precondition)),t}function K6(n,e){return n&&n.length>0?(Pe(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Br(i.updateTime):Br(o);return s.isEqual(le.min())&&(s=Br(o)),new gE(s,i.transformResults||[])}(t,e))):[]}function Q6(n,e){return{documents:[YP(n,e.path)]}}function Y6(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=YP(n,i);let o=function(l){if(l.length!==0)return XP(dr.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ka(m.field),direction:X6(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=CE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:t,parent:i}}function Z6(n){let e=q6(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Pe(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=JP(p);return m instanceof dr&&MP(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(E){return new Es(Oa(E.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,rg(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new po(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new po(v,m)}(t.endAt)),D6(e,i,s,o,a,"F",u,l)}function J6(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Oa(t.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Oa(t.unaryFilter.field);return _t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Oa(t.unaryFilter.field);return _t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Oa(t.unaryFilter.field);return _t.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(n):n.fieldFilter!==void 0?function(t){return _t.create(Oa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return dr.create(t.compositeFilter.filters.map(r=>JP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(t.compositeFilter.op))}(n):ne(30097,{filter:n})}function X6(n){return B6[n]}function eG(n){return $6[n]}function tG(n){return H6[n]}function ka(n){return{fieldPath:n.canonicalString()}}function Oa(n){return An.fromServerFormat(n.fieldPath)}function XP(n){return n instanceof _t?function(t){if(t.op==="=="){if(bN(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NAN"}};if(EN(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bN(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NAN"}};if(EN(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(t.field),op:eG(t.op),value:t.value}}}(n):n instanceof dr?function(t){let r=t.getFilters().map(i=>XP(i));return r.length===1?r[0]:{compositeFilter:{op:tG(t.op),filters:r}}}(n):ne(54877,{filter:n})}function nG(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ek(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Il=class n{constructor(e,t,r,i,o=le.min(),s=le.min(),a=Yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var AE=class{constructor(e){this.wt=e}};function rG(n){let e=Z6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?pE(e,e.limit,"L"):e}var Op=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Ye(e.integerValue));else if("doubleValue"in e){let r=Ye(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),gl(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=Ci(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(Di(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?SP(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):TP(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):ne(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=$a,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(Ye(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),Y.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};Op.Wt=new Op;var RE=class{constructor(){this.yn=new ME}addToCollectionParentIndex(e,t){return this.yn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Is.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},ME=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Mt(Ze.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mt(Ze.comparator)).toArray()}};var gie=new Uint8Array(0);var LN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tk=41943040,$n=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(tk,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);var El=class n{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new n(0)}static ir(){return new n(-1)}};var VN="LruGarbageCollector",iG=1048576;function UN([n,e],[t,r]){let i=ve(n,t);return i===0?ve(e,r):i}var xE=class{constructor(e){this.cr=e,this.buffer=new Mt(UN),this.lr=0}hr(){return++this.lr}Pr(e){let t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();UN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},NE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){q(VN,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Tr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ec(t)?q(VN,"Ignoring IndexedDB error during garbage collection: ",t):yield Xa(t)}yield this.Ir(3e5)}))}},PE=class{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(Pb.le);let r=new xE(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(LN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LN):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Na()<=we.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function oG(n,e){return new PE(n,e)}var kE=class{constructor(){this.changes=new Ti(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var OE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var FE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&fl(r.mutation,i,Hn.empty(),Xe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=be()){let i=vs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ll();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=vs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,be()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Si(),s=hl(),a=function(){return hl()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof zr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),fl(h.mutation,l,h.mutation.getFieldMask(),Xe.now())):s.set(l.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new OE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=hl(),i=new it((s,a)=>s-a),o=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Hn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||be()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=VP();h.forEach(m=>{if(!o.has(m)){let v=qP(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(vs()),a=pl,u=o;return s.next(l=>V.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,be())).next(h=>({batchId:a,changes:LP(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next(r=>{let i=ll();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ll();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,u=>{let l=function(p,m){return new Hr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,lr.newInvalidDocument(h)))});let a=ll();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&fl(h.mutation,l,Hn.empty(),Xe.now()),cg(t,l)&&(a=a.insert(u,l))}),a})}};var LE=class{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return V.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Br(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:rG(i.bundledQuery),readTime:Br(i.readTime)}}(t)),V.resolve()}};var VE=class{constructor(){this.overlays=new it(Y.comparator),this.Or=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=vs();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Or.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=vs(),o=t.length+1,s=new Y(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new it((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=vs(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=vs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return V.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new _E(t,r));let o=this.Or.get(t);o===void 0&&(o=be(),this.Or.set(t,o)),this.Or.set(t,o.add(r.key))}};var UE=class{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var bl=class{constructor(){this.Nr=new Mt(yt.Br),this.Lr=new Mt(yt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){let r=new yt(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new yt(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){let t=new Y(new Ze([])),r=new yt(t,e),i=new yt(t,e+1),o=[];return this.Lr.forEachInRange([r,i],s=>{this.Qr(s),o.push(s.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){let t=new Y(new Ze([])),r=new yt(t,e),i=new yt(t,e+1),o=be();return this.Lr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new yt(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},yt=class{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Y.comparator(e.key,t.key)||ve(e.Gr,t.Gr)}static kr(e,t){return ve(e.Gr,t.Gr)||Y.comparator(e.key,t.key)}};var jE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Mt(yt.Br)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new vE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.zr=this.zr.add(new yt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Hr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?kb:this.Jn-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new yt(t,0),i=new yt(t,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([r,i],s=>{let a=this.jr(s.Gr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mt(ve);return t.forEach(i=>{let o=new yt(i,0),s=new yt(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,s],a=>{r=r.add(a.Gr)})}),V.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;Y.isDocumentKey(o)||(o=o.child(""));let s=new yt(new Y(o),0),a=new Mt(ve);return this.zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Gr)),!0)},s),V.resolve(this.Jr(a))}Jr(e){let t=[];return e.forEach(r=>{let i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Pe(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return V.forEach(t.mutations,i=>{let o=new yt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){let r=new yt(t,0),i=this.zr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){let t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var BE=class{constructor(e){this.Zr=e,this.docs=function(){return new it(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():lr.newInvalidDocument(t))}getEntries(e,t){let r=Si();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():lr.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Si(),s=t.path,a=new Y(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||s6(o6(h),r)<=0||(i.has(h.key)||cg(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ne(9500)}Xr(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $E(this)}getSize(e){return V.resolve(this.size)}},$E=class extends kE{constructor(e){super(),this.vr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}};var HE=class{constructor(e){this.persistence=e,this.ei=new Ti(t=>Vb(t),Ub),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.ti=0,this.ni=new bl,this.targetCount=0,this.ri=El.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),V.resolve()}ar(e){this.ei.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ri=new El(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.ar(t),V.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ei.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.ei.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ni.Wr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.ni.containsKey(t))}};var Fp=class{constructor(e,t){this.ii={},this.overlays={},this.si=new Pb(0),this.oi=!1,this.oi=!0,this._i=new UE,this.referenceDelegate=e(this),this.ai=new HE(this),this.indexManager=new RE,this.remoteDocumentCache=function(i){return new BE(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new AE(t),this.ci=new LE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new VE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new jE(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){q("MemoryPersistence","Starting transaction:",e);let i=new zE(this.si.next());return this.referenceDelegate.li(),r(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,t){return V.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}},zE=class extends XI{constructor(e){super(),this.currentSequenceNumber=e}},qE=class n{constructor(e){this.persistence=e,this.Ti=new bl,this.Ii=null}static Ei(e){return new n(e)}get di(){if(this.Ii)return this.Ii;throw ne(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),V.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.di,r=>{let i=Y.fromPath(r);return this.Ai(e,i).next(o=>{o||t.removeEntry(i,le.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return V.or([()=>V.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}},Lp=class n{constructor(e,t){this.persistence=e,this.Ri=new Ti(r=>l6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=oG(this,t)}static Ei(e,t){return new n(e,t)}li(){}hi(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return V.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(o=>o?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,s=>this.gr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),V.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vp(e.data.value)),t}gr(e,t,r){return V.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.Ri.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var GE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=be(),i=be();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var WE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var KE=class{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return PM()?8:c6(At())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Vs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new WE;return this.fs(e,t,s).next(a=>{if(o.result=a,this.Is)return this.gs(e,t,s,a.size)})}).next(()=>o.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(Na()<=we.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Pa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),V.resolve()):(Na()<=we.DEBUG&&q("QueryEngine","Query:",Pa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Na()<=we.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Pa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ur(t))):V.resolve())}Rs(e,t){if(SN(t))return V.resolve(null);let r=Ur(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=pE(t,null,"F"),r=Ur(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=be(...o);return this.As.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ps(t,a);return this.ys(t,l,s,u.readTime)?this.Rs(e,pE(t,null,"F")):this.ws(e,l,t,u)}))})))}Vs(e,t,r,i){return SN(t)||i.isEqual(le.min())?V.resolve(null):this.As.getDocuments(e,r).next(o=>{let s=this.ps(t,o);return this.ys(t,s,r,i)?V.resolve(null):(Na()<=we.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pa(t)),this.ws(e,s,t,i6(i,pl)).next(a=>a))})}ps(e,t){let r=new Mt(OP(e));return t.forEach((i,o)=>{cg(e,o)&&(r=r.add(o))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,t,r){return Na()<=we.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Pa(t)),this.As.getDocumentsMatchingQuery(e,t,Is.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Hb="LocalStore",sG=3e8,QE=class{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new it(ve),this.Ds=new Ti(o=>Vb(o),Ub),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FE(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}};function aG(n,e,t,r){return new QE(n,e,t,r)}function nk(n,e){return y(this,null,function*(){let t=ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=be();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ms:l,removedBatchIds:s,addedBatchIds:a}))})})})}function cG(n,e){let t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=V.resolve();return m.forEach(E=>{v=v.next(()=>h.getEntry(u,E)).next(N=>{let M=l.docVersions.get(E);Pe(M!==null,48541),N.version.compareTo(M)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=be();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function rk(n){let e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function uG(n,e){let t=ae(n),r=e.snapshotVersion,i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.ai.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.ai.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Yt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,M,B){return N.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=sG?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,v,h)&&a.push(t.ai.updateTargetData(o,v))});let u=Si(),l=be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(lG(o,s,e.documentUpdates).next(h=>{u=h.xs,l=h.Os})),!r.isEqual(le.min())){let h=t.ai.getLastRemoteSnapshotVersion(o).next(p=>t.ai.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ss=i,o))}function lG(n,e,t){let r=be(),i=be();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Si();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):q(Hb,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{xs:s,Os:i}})}function dG(n,e){let t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=kb),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hG(n,e){let t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.ai.allocateTargetId(r).next(s=>(i=new Il(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}function YE(n,e,t){return y(this,null,function*(){let r=ae(n),i=r.Ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ec(s))throw s;q(Hb,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)})}function jN(n,e,t){let r=ae(n),i=le.min(),o=be();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=ae(u),m=p.Ds.get(h);return m!==void 0?V.resolve(p.Ss.get(m)):p.ai.getTargetData(l,h)}(r,s,Ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.bs.getDocumentsMatchingQuery(s,e,t?i:le.min(),t?o:be())).next(a=>(fG(r,S6(e),a),{documents:a,Ns:o})))}function fG(n,e,t){let r=n.vs.get(e)||le.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.vs.set(e,r)}var Vp=class{constructor(){this.activeTargetIds=P6()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ZE=class{constructor(){this.So=new Vp,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Vp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var JE=class{vo(e){}shutdown(){}};var BN="ConnectivityMonitor",Up=class{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){q(BN,"Network connectivity changed: AVAILABLE");for(let e of this.Oo)e(0)}xo(){q(BN,"Network connectivity changed: UNAVAILABLE");for(let e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var mp=null;function XE(){return mp===null?mp=function(){return 268435456+Math.round(2147483648*Math.random())}():mp++,"0x"+mp.toString(16)}var $I="RestConnection",pG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},eb=class{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===Tp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,o){let s=XE(),a=this.$o(e,t.toUriEncodedString());q($I,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(u,i,o),this.Ko(e,a,u,r).then(l=>(q($I,`Received RPC '${e}' ${s}: `,l),l),l=>{throw ja($I,`RPC '${e}' ${s} failed with error: `,l,"url: ",a,"request:",r),l})}Wo(e,t,r,i,o,s){return this.Qo(e,t,r,i,o)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}$o(e,t){let r=pG[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}};var tb=class{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}};var Kt="WebChannelConnection",nb=class extends eb{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i){let o=XE();return new Promise((s,a)=>{let u=new FI;u.setWithCredentials(!0),u.listenOnce(LI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ul.NO_ERROR:let h=u.getResponseJson();q(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case ul.TIMEOUT:q(Kt,`RPC '${e}' ${o} timed out`),a(new $(k.DEADLINE_EXCEEDED,"Request time out"));break;case ul.HTTP_ERROR:let p=u.getStatus();if(q(Kt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let E=function(M){let B=M.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(B)>=0?B:k.UNKNOWN}(v.status);a(new $(E,v.message))}else a(new $(k.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(k.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{s_:e,streamId:o,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{q(Kt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);q(Kt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}a_(e,t,r){let i=XE(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=jI(),a=UI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");q(Kt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,v=!1,E=new tb({Go:M=>{v?q(Kt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(q(Kt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),q(Kt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},zo:()=>p.close()}),N=(M,B,J)=>{M.listen(B,X=>{try{J(X)}catch(he){setTimeout(()=>{throw he},0)}})};return N(p,xa.EventType.OPEN,()=>{v||(q(Kt,`RPC '${e}' stream ${i} transport opened.`),E.t_())}),N(p,xa.EventType.CLOSE,()=>{v||(v=!0,q(Kt,`RPC '${e}' stream ${i} transport closed`),E.r_())}),N(p,xa.EventType.ERROR,M=>{v||(v=!0,ja(Kt,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),E.r_(new $(k.UNAVAILABLE,"The operation could not be completed")))}),N(p,xa.EventType.MESSAGE,M=>{var B;if(!v){let J=M.data[0];Pe(!!J,16349);let X=J,he=X?.error||((B=X[0])===null||B===void 0?void 0:B.error);if(he){q(Kt,`RPC '${e}' stream ${i} received error:`,he);let ht=he.status,De=function(I){let b=vt[I];if(b!==void 0)return WP(b)}(ht),C=he.message;De===void 0&&(De=k.INTERNAL,C="Unknown error status: "+ht+" with message "+he.message),v=!0,E.r_(new $(De,C)),p.close()}else q(Kt,`RPC '${e}' stream ${i} received:`,J),E.i_(J)}}),N(a,VI.STAT_EVENT,M=>{M.stat===fp.PROXY?q(Kt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===fp.NOPROXY&&q(Kt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.n_()},0),E}};function HI(){return typeof document<"u"?document:null}function ug(n){return new bE(n,!0)}var jp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();let t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}};var $N="PersistentStream",Bp=class{constructor(e,t,r,i,o,s,a,u){this.bi=e,this.R_=r,this.V_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new jp(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}stop(){return y(this,null,function*(){this.w_()&&(yield this.close(0))})}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){return y(this,null,function*(){if(this.b_())return this.close(0)})}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,t){return y(this,null,function*(){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(bi(t.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Zo(t)})}O_(){}auth(){this.state=1;let e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{let i=new $(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){let r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(()=>y(this,null,function*(){this.state=0,this.start()}))}L_(e){return q($N,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(q($N,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},rb=class extends Bp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();let t=G6(this.serializer,e),r=function(o){if(!("targetChange"in o))return le.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?Br(s.readTime):le.min()}(e);return this.listener.Q_(t,r)}U_(e){let t={};t.database=SE(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=hE(u)?{documents:Q6(o,u)}:{query:Y6(o,u).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=KP(o,s.resumeToken);let l=CE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(le.min())>0){a.readTime=kp(o,s.snapshotVersion.toTimestamp());let l=CE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=J6(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){let t={};t.database=SE(this.serializer),t.removeTarget=e,this.F_(t)}},ib=class extends Bp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();let t=K6(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.j_(r,t)}H_(){let e={};e.database=SE(this.serializer),this.F_(e)}G_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>W6(this.serializer,r))};this.F_(t)}};var ob=class{},sb=class extends ob{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Qo(e,DE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(k.UNKNOWN,o.toString())})}Wo(e,t,r,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,DE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(k.UNKNOWN,s.toString())})}terminate(){this.J_=!0,this.connection.terminate()}},ab=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(bi(t),this.ea=!1):q("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}};var Ds="RemoteStore",cb=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(s=>{r.enqueueAndForget(()=>y(this,null,function*(){Ts(this)&&(q(Ds,"Restarting streams for network reachability change."),yield function(u){return y(this,null,function*(){let l=ae(u);l.aa.add(4),yield Nl(l),l.la.set("Unknown"),l.aa.delete(4),yield lg(l)})}(this))}))}),this.la=new ab(r,i)}};function lg(n){return y(this,null,function*(){if(Ts(n))for(let e of n.ua)yield e(!0)})}function Nl(n){return y(this,null,function*(){for(let e of n.ua)yield e(!1)})}function ik(n,e){let t=ae(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Wb(t)?Gb(t):tc(t).b_()&&qb(t,e))}function zb(n,e){let t=ae(n),r=tc(t);t._a.delete(e),r.b_()&&ok(t,e),t._a.size===0&&(r.b_()?r.v_():Ts(t)&&t.la.set("Unknown"))}function qb(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}tc(n).U_(e)}function ok(n,e){n.ha.Ke(e),tc(n).K_(e)}function Gb(n){n.ha=new EE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),tc(n).start(),n.la.ta()}function Wb(n){return Ts(n)&&!tc(n).w_()&&n._a.size>0}function Ts(n){return ae(n).aa.size===0}function sk(n){n.ha=void 0}function gG(n){return y(this,null,function*(){n.la.set("Online")})}function mG(n){return y(this,null,function*(){n._a.forEach((e,t)=>{qb(n,e)})})}function vG(n,e){return y(this,null,function*(){sk(n),Wb(n)?(n.la.ia(e),Gb(n)):n.la.set("Unknown")})}function yG(n,e,t){return y(this,null,function*(){if(n.la.set("Online"),e instanceof Np&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i._a.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i._a.delete(a),i.ha.removeTarget(a))})}(n,e)}catch(r){q(Ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $p(n,r)}else if(e instanceof Va?n.ha.Xe(e):e instanceof xp?n.ha.ot(e):n.ha.nt(e),!t.isEqual(le.min()))try{let r=yield rk(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.ha.It(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o._a.get(l);h&&o._a.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o._a.get(u);if(!h)return;o._a.set(u,h.withResumeToken(Yt.EMPTY_BYTE_STRING,h.snapshotVersion)),ok(o,u);let p=new Il(h.target,u,l,h.sequenceNumber);qb(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){q(Ds,"Failed to raise snapshot:",r),yield $p(n,r)}})}function $p(n,e,t){return y(this,null,function*(){if(!ec(e))throw e;n.aa.add(1),yield Nl(n),n.la.set("Offline"),t||(t=()=>rk(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){q(Ds,"Retrying IndexedDB access"),yield t(),n.aa.delete(1),yield lg(n)}))})}function ak(n,e){return e().catch(t=>$p(n,t,e))}function dg(n){return y(this,null,function*(){let e=ae(n),t=vo(e),r=e.oa.length>0?e.oa[e.oa.length-1].batchId:kb;for(;_G(e);)try{let i=yield dG(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,wG(e,i)}catch(i){yield $p(e,i)}ck(e)&&uk(e)})}function _G(n){return Ts(n)&&n.oa.length<10}function wG(n,e){n.oa.push(e);let t=vo(n);t.b_()&&t.W_&&t.G_(e.mutations)}function ck(n){return Ts(n)&&!vo(n).w_()&&n.oa.length>0}function uk(n){vo(n).start()}function IG(n){return y(this,null,function*(){vo(n).H_()})}function EG(n){return y(this,null,function*(){let e=vo(n);for(let t of n.oa)e.G_(t.mutations)})}function bG(n,e,t){return y(this,null,function*(){let r=n.oa.shift(),i=yE.from(r,e,t);yield ak(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dg(n)})}function CG(n,e){return y(this,null,function*(){e&&vo(n).W_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return U6(s)&&s!==k.ABORTED}(i.code)){let o=r.oa.shift();vo(r).D_(),yield ak(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield dg(r)}})}(n,e)),ck(n)&&uk(n)})}function HN(n,e){return y(this,null,function*(){let t=ae(n);t.asyncQueue.verifyOperationInProgress(),q(Ds,"RemoteStore received new credentials");let r=Ts(t);t.aa.add(3),yield Nl(t),r&&t.la.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),yield lg(t)})}function DG(n,e){return y(this,null,function*(){let t=ae(n);e?(t.aa.delete(2),yield lg(t)):e||(t.aa.add(2),yield Nl(t),t.la.set("Unknown"))})}function tc(n){return n.Pa||(n.Pa=function(t,r,i){let o=ae(t);return o.Y_(),new rb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:gG.bind(null,n),Jo:mG.bind(null,n),Zo:vG.bind(null,n),Q_:yG.bind(null,n)}),n.ua.push(e=>y(this,null,function*(){e?(n.Pa.D_(),Wb(n)?Gb(n):n.la.set("Unknown")):(yield n.Pa.stop(),sk(n))}))),n.Pa}function vo(n){return n.Ta||(n.Ta=function(t,r,i){let o=ae(t);return o.Y_(),new ib(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:IG.bind(null,n),Zo:CG.bind(null,n),z_:EG.bind(null,n),j_:bG.bind(null,n)}),n.ua.push(e=>y(this,null,function*(){e?(n.Ta.D_(),yield dg(n)):(yield n.Ta.stop(),n.oa.length>0&&(q(Ds,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))}))),n.Ta}var ub=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Kb(n,e){if(bi("AsyncQueue",`${e}: ${n}`),ec(n))return new $(k.UNAVAILABLE,`${e}: ${n}`);throw n}var Hp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Y.comparator(t.key,r.key):(t,r)=>Y.comparator(t.key,r.key),this.keyedMap=ll(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var zp=class{constructor(){this.Ia=new it(Y.comparator)}track(e){let t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):ne(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){let e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}},Ka=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Hp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ag(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var lb=class{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}},db=class{constructor(){this.queries=zN(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){let i=ae(t),o=i.queries;i.queries=zN(),o.forEach((s,a)=>{for(let u of a.Ra)u.onError(r)})})(this,new $(k.ABORTED,"Firestore shutting down"))}};function zN(){return new Ti(n=>kP(n),ag)}function Qb(n,e){return y(this,null,function*(){let t=ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Va()&&e.ma()&&(r=2):(o=new lb,r=e.ma()?0:1);try{switch(r){case 0:o.Aa=yield t.onListen(i,!0);break;case 1:o.Aa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Kb(s,`Initialization of query '${Pa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Ra.push(e),e.ga(t.onlineState),o.Aa&&e.pa(o.Aa)&&Zb(t)})}function Yb(n,e){return y(this,null,function*(){let t=ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Ra.indexOf(e);s>=0&&(o.Ra.splice(s,1),o.Ra.length===0?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function TG(n,e){let t=ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Ra)a.pa(i)&&(r=!0);s.Aa=i}}r&&Zb(t)}function SG(n,e,t){let r=ae(n),i=r.queries.get(e);if(i)for(let o of i.Ra)o.onError(t);r.queries.delete(e)}function Zb(n){n.fa.forEach(e=>{e.next()})}var hb,qN;(qN=hb||(hb={})).ya="default",qN.Cache="cache";var Cl=class{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;let r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;let t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==hb.Cache}};var qp=class{constructor(e){this.key=e}},Gp=class{constructor(e){this.key=e}},fb=class{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=be(),this.mutatedKeys=be(),this.Ua=OP(e),this.Ka=new Hp(this.Ua)}get Wa(){return this.qa}Ga(e,t){let r=t?t.za:new zp,i=t?t.Ka:this.Ka,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=cg(this.query,p)?p:null,E=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),M=!1;m&&v?m.data.isEqual(v.data)?E!==N&&(r.track({type:3,doc:v}),M=!0):this.ja(m,v)||(r.track({type:2,doc:v}),M=!0,(u&&this.Ua(v,u)>0||l&&this.Ua(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),M=!0):m&&!v&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(v?(s=s.add(v),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ka:s,za:r,ys:a,mutatedKeys:o}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;let s=e.za.da();s.sort((h,p)=>function(v,E){let N=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:M})}};return N(v)-N(E)}(h.type,p.type)||this.Ua(h.doc,p.doc)),this.Ha(r),i=i!=null&&i;let a=t&&!i?this.Ja():[],u=this.$a.size===0&&this.current&&!i?1:0,l=u!==this.Qa;return this.Qa=u,s.length!==0||l?{snapshot:new Ka(this.query,e.Ka,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new zp,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];let e=this.$a;this.$a=be(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});let t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new Gp(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new qp(r))}),t}Xa(e){this.qa=e.Ns,this.$a=be();let t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ka.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}},Jb="SyncEngine",pb=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},gb=class{constructor(e){this.key=e,this.tu=!1}},mb=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new Ti(a=>kP(a),ag),this.iu=new Map,this.su=new Set,this.ou=new it(Y.comparator),this._u=new Map,this.au=new bl,this.uu={},this.cu=new Map,this.lu=El.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}};function AG(n,e,t=!0){return y(this,null,function*(){let r=gk(n),i,o=r.ru.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=yield lk(r,e,t,!0),i})}function RG(n,e){return y(this,null,function*(){let t=gk(n);yield lk(t,e,!0,!1)})}function lk(n,e,t,r){return y(this,null,function*(){let i=yield hG(n.localStore,Ur(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield MG(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&ik(n.remoteStore,i),a})}function MG(n,e,t,r,i){return y(this,null,function*(){n.Pu=(p,m,v)=>function(N,M,B,J){return y(this,null,function*(){let X=M.view.Ga(B);X.ys&&(X=yield jN(N.localStore,M.query,!1).then(({documents:C})=>M.view.Ga(C,X)));let he=J&&J.targetChanges.get(M.targetId),ht=J&&J.targetMismatches.get(M.targetId)!=null,De=M.view.applyChanges(X,N.isPrimaryClient,he,ht);return WN(N,M.targetId,De.Ya),De.snapshot})}(n,p,m,v);let o=yield jN(n.localStore,e,!0),s=new fb(e,o.Ns),a=s.Ga(o.documents),u=wl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);WN(n,t,l.Ya);let h=new pb(e,t,s);return n.ru.set(e,h),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),l.snapshot})}function xG(n,e,t){return y(this,null,function*(){let r=ae(n),i=r.ru.get(e),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter(s=>!ag(s,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield YE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zb(r.remoteStore,i.targetId),vb(r,i.targetId)}).catch(Xa))):(vb(r,i.targetId),yield YE(r.localStore,i.targetId,!0))})}function NG(n,e){return y(this,null,function*(){let t=ae(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zb(t.remoteStore,r.targetId))})}function PG(n,e,t){return y(this,null,function*(){let r=jG(n);try{let i=yield function(s,a){let u=ae(s),l=Xe.now(),h=a.reduce((v,E)=>v.add(E.key),be()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let E=Si(),N=be();return u.Cs.getEntries(v,h).next(M=>{E=M,E.forEach((B,J)=>{J.isValidDocument()||(N=N.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,E)).next(M=>{p=M;let B=[];for(let J of a){let X=V6(J,p.get(J.key).overlayedDocument);X!=null&&B.push(new zr(J.key,X,AP(X.value.mapValue),jr.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,B,a)}).next(M=>{m=M;let B=M.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(v,M.batchId,B)})}).then(()=>({batchId:m.batchId,changes:LP(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.uu[s.currentUser.toKey()];l||(l=new it(ve)),l=l.insert(a,u),s.uu[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Pl(r,i.changes),yield dg(r.remoteStore)}catch(i){let o=Kb(i,"Failed to persist write");t.reject(o)}})}function dk(n,e){return y(this,null,function*(){let t=ae(n);try{let r=yield uG(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t._u.get(o);s&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.tu=!0:i.modifiedDocuments.size>0?Pe(s.tu,14607):i.removedDocuments.size>0&&(Pe(s.tu,42227),s.tu=!1))}),yield Pl(t,r,e)}catch(r){yield Xa(r)}})}function GN(n,e,t){let r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ru.forEach((o,s)=>{let a=s.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=ae(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.Ra)m.ga(a)&&(l=!0)}),l&&Zb(u)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kG(n,e,t){return y(this,null,function*(){let r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r._u.get(e),o=i&&i.key;if(o){let s=new it(Y.comparator);s=s.insert(o,lr.newNoDocument(o,le.min()));let a=be().add(o),u=new Mp(le.min(),new Map,new it(ve),s,a);yield dk(r,u),r.ou=r.ou.remove(o),r._u.delete(e),Xb(r)}else yield YE(r.localStore,e,!1).then(()=>vb(r,e,t)).catch(Xa)})}function OG(n,e){return y(this,null,function*(){let t=ae(n),r=e.batch.batchId;try{let i=yield cG(t.localStore,e);fk(t,r,null),hk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pl(t,i)}catch(i){yield Xa(i)}})}function FG(n,e,t){return y(this,null,function*(){let r=ae(n);try{let i=yield function(s,a){let u=ae(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Pe(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);fk(r,e,t),hk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pl(r,i)}catch(i){yield Xa(i)}})}function hk(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function fk(n,e,t){let r=ae(n),i=r.uu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function vb(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||pk(n,r)})}function pk(n,e){n.su.delete(e.path.canonicalString());let t=n.ou.get(e);t!==null&&(zb(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),Xb(n))}function WN(n,e,t){for(let r of t)r instanceof qp?(n.au.addReference(r.key,e),LG(n,r)):r instanceof Gp?(q(Jb,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||pk(n,r.key)):ne(19791,{Iu:r})}function LG(n,e){let t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(q(Jb,"New document in limbo: "+t),n.su.add(r),Xb(n))}function Xb(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){let e=n.su.values().next().value;n.su.delete(e);let t=new Y(Ze.fromString(e)),r=n.lu.next();n._u.set(r,new gb(t)),n.ou=n.ou.insert(t,r),ik(n.remoteStore,new Il(Ur(sg(t.path)),r,"TargetPurposeLimboResolution",Pb.le))}}function Pl(n,e,t){return y(this,null,function*(){let r=ae(n),i=[],o=[],s=[];r.ru.isEmpty()||(r.ru.forEach((a,u)=>{s.push(r.Pu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=GE.Ps(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.nu.Q_(i),yield function(u,l){return y(this,null,function*(){let h=ae(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(l,m=>V.forEach(m.ls,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>V.forEach(m.hs,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!ec(p))throw p;q(Hb,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.Ss.get(m),E=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(E);h.Ss=h.Ss.insert(m,N)}}})}(r.localStore,o))})}function VG(n,e){return y(this,null,function*(){let t=ae(n);if(!t.currentUser.isEqual(e)){q(Jb,"User change. New user:",e.toKey());let r=yield nk(t.localStore,e);t.currentUser=e,function(o,s){o.cu.forEach(a=>{a.forEach(u=>{u.reject(new $(k.CANCELLED,s))})}),o.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pl(t,r.Ms)}})}function UG(n,e){let t=ae(n),r=t._u.get(e);if(r&&r.tu)return be().add(r.key);{let i=be(),o=t.iu.get(e);if(!o)return i;for(let s of o){let a=t.ru.get(s);i=i.unionWith(a.view.Wa)}return i}}function gk(n){let e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kG.bind(null,e),e.nu.Q_=TG.bind(null,e.eventManager),e.nu.Tu=SG.bind(null,e.eventManager),e}function jG(n){let e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FG.bind(null,e),e}var mk=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=ug(t.databaseInfo.databaseId),this.sharedClientState=this.Au(t),this.persistence=this.Ru(t),yield this.persistence.start(),this.localStore=this.Vu(t),this.gcScheduler=this.mu(t,this.localStore),this.indexBackfillerScheduler=this.fu(t,this.localStore)})}mu(t,r){return null}fu(t,r){return null}Vu(t){return aG(this.persistence,new KE,t.initialUser,this.serializer)}Ru(t){return new Fp(qE.Ei,this.serializer)}Au(t){return new ZE}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),yb=class extends mk{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Pe(this.persistence.referenceDelegate instanceof Lp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new NE(r,e.asyncQueue,t)}Ru(e){let t=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new Fp(r=>Lp.Ei(r,t),this.serializer)}};var BG=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>GN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=VG.bind(null,this.syncEngine),yield DG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new db}()}createDatastore(t){let r=ug(t.databaseInfo.databaseId),i=function(s){return new nb(s)}(t.databaseInfo);return function(s,a,u,l){return new sb(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new cb(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>GN(this.syncEngine,r,0),function(){return Up.C()?new Up:new JE}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new mb(o,s,a,u,l,h);return p&&(m.hu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(o){return y(this,null,function*(){let s=ae(o);q(Ds,"RemoteStore shutting down."),s.aa.add(5),yield Nl(s),s.ca.shutdown(),s.la.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Dl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var yo="FirestoreClient",_b=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Rt.UNAUTHENTICATED,this.clientId=Ep.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>y(this,null,function*(){q(yo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(q(yo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Kb(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function zI(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),q(yo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield nk(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function KN(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield $G(n);q(yo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>HN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>HN(e.remoteStore,i)),n._onlineComponents=e})}function $G(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q(yo,"Using user provided OfflineComponentProvider");try{yield zI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ja("Error using user provided cache. Falling back to memory cache: "+t),yield zI(n,new mk)}}else q(yo,"Using default OfflineComponentProvider"),yield zI(n,new yb(void 0));return n._offlineComponents})}function vk(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(q(yo,"Using user provided OnlineComponentProvider"),yield KN(n,n._uninitializedComponentsProvider._online)):(q(yo,"Using default OnlineComponentProvider"),yield KN(n,new BG))),n._onlineComponents})}function HG(n){return vk(n).then(e=>e.syncEngine)}function Wp(n){return y(this,null,function*(){let e=yield vk(n),t=e.eventManager;return t.onListen=AG.bind(null,e.syncEngine),t.onUnlisten=xG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NG.bind(null,e.syncEngine),t})}function zG(n,e,t={}){let r=new ur;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,u,l){let h=new Dl({next:m=>{h.yu(),s.enqueueAndForget(()=>Yb(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new $(k.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new $(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Cl(sg(a.path),h,{includeMetadataChanges:!0,Fa:!0});return Qb(o,p)}(yield Wp(n),n.asyncQueue,e,t,r)})),r.promise}function qG(n,e,t={}){let r=new ur;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,u,l){let h=new Dl({next:m=>{h.yu(),s.enqueueAndForget(()=>Yb(o,p)),m.fromCache&&u.source==="server"?l.reject(new $(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Cl(a,h,{includeMetadataChanges:!0,Fa:!0});return Qb(o,p)}(yield Wp(n),n.asyncQueue,e,t,r)})),r.promise}function yk(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var QN=new Map;function _k(n,e,t){if(!t)throw new $(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GG(n,e,t,r){if(e===!0&&r===!0)throw new $(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YN(n){if(!Y.isDocumentKey(n))throw new $(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZN(n){if(Y.isDocumentKey(n))throw new $(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne(12329,{type:typeof n})}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=hg(n);throw new $(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var wk="firestore.googleapis.com",JN=!0,Kp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wk,this.ssl=JN}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:JN;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iG)throw new $(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Qa=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qI;switch(r.type){case"firstParty":return new QI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=QN.get(t);r&&(q("ComponentProvider","Removing Datastore"),QN.delete(t),r.terminate())}(this),Promise.resolve()}};function Ik(n,e,t,r={}){var i;let o=(n=gn(n,Qa))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;o.host!==wk&&o.host!==a&&ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!Bn(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Rt.MOCK_USER;else{l=Bf(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new $(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Rt(p)}n._authCredentials=new GI(new wp(l,h))}}var qr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Qt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ho=class n extends qr{constructor(e,t,r){super(e,t,sg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Y(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Ek(n,e,...t){if(n=je(n),_k("collection","path",e),n instanceof Qa){let r=Ze.fromString(e,...t);return ZN(r),new ho(n,null,r)}{if(!(n instanceof Qt||n instanceof ho))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ze.fromString(e,...t));return ZN(r),new ho(n.firestore,null,r)}}function e0(n,e,...t){if(n=je(n),arguments.length===1&&(e=Ep.newId()),_k("doc","path",e),n instanceof Qa){let r=Ze.fromString(e,...t);return YN(r),new Qt(n,null,new Y(r))}{if(!(n instanceof Qt||n instanceof ho))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ze.fromString(e,...t));return YN(r),new Qt(n.firestore,n instanceof ho?n.converter:null,new Y(r))}}var XN="AsyncQueue",Qp=class{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new jp(this,"async_queue_retry"),this.ju=()=>{let r=HI();r&&q(XN,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;let t=HI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;let t=HI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});let t=new ur;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){return y(this,null,function*(){if(this.Qu.length!==0){try{yield this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!ec(e))throw e;q(XN,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}})}Yu(e){let t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,bi("INTERNAL UNHANDLED ERROR: ",eP(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);let i=ub.createAndSchedule(this,e,t,r,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&ne(47125,{ec:eP(this.Ku)})}verifyOperationInProgress(){}tc(){return y(this,null,function*(){let e;do e=this.Hu,yield e;while(e!==this.Hu)})}nc(e){for(let t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){let t=this.Uu.indexOf(e);this.Uu.splice(t,1)}};function eP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function tP(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var hr=class extends Qa{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Qp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qp(e),this._firestoreClient=void 0,yield e}})}};function bk(n,e){let t=typeof n=="object"?n:mi(),r=typeof n=="string"?n:e||Tp,i=no(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=jf("firestore");o&&Ik(i,...o)}return i}function fg(n){if(n._terminated)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||WG(n),n._firestoreClient}function WG(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new eE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,yk(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new _b(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Tl=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Yt.fromBase64String(e))}catch(t){throw new $(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ya=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var _o=class{constructor(e){this._methodName=e}};var Sl=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}};var Al=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var KG=/^__.*__$/,wb=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cs(e,this.data,t,this.fieldTransforms)}},Yp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Ck(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{oc:n})}}var Zp=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this._c(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Xp(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(Ck(this.oc)&&KG.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}},Ib=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ug(e)}dc(e,t,r,i=!1){return new Zp({oc:e,methodName:t,Ec:r,path:An.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function kl(n){let e=n._freezeSettings(),t=ug(n._databaseId);return new Ib(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Dk(n,e,t,r,i,o={}){let s=n.dc(o.merge||o.mergeFields?2:0,e,t,i);t0("Data must be an object, but it was:",s,r);let a=Ak(r,s),u,l;if(o.merge)u=new Hn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Db(e,p,t);if(!s.contains(m))throw new $(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Mk(h,m)||h.push(m)}u=new Hn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new wb(new Sn(a),u,l)}var Jp=class n extends _o{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Tk(n,e,t){return new Zp({oc:3,Ec:e.settings.Ec,methodName:n._methodName,cc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Eb=class n extends _o{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){let t=Tk(this,e,!0),r=this.Ac.map(o=>Ss(o,t)),i=new go(r);return new yl(e.path,i)}isEqual(e){return e instanceof n&&Bn(this.Ac,e.Ac)}},bb=class n extends _o{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){let t=Tk(this,e,!0),r=this.Ac.map(o=>Ss(o,t)),i=new mo(r);return new yl(e.path,i)}isEqual(e){return e instanceof n&&Bn(this.Ac,e.Ac)}},Cb=class n extends _o{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){let t=new bs(e.serializer,jP(e.serializer,this.Rc));return new yl(e.path,t)}isEqual(e){return e instanceof n&&this.Rc===e.Rc}};function QG(n,e,t,r){let i=n.dc(1,e,t);t0("Data must be an object, but it was:",i,r);let o=[],s=Sn.empty();wo(r,(u,l)=>{let h=n0(e,u,t);l=je(l);let p=i.hc(h);if(l instanceof Jp)o.push(h);else{let m=Ss(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Hn(o);return new Yp(s,a,i.fieldTransforms)}function YG(n,e,t,r,i,o){let s=n.dc(1,e,t),a=[Db(e,r,t)],u=[i];if(o.length%2!=0)throw new $(k.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Db(e,o[m])),u.push(o[m+1]);let l=[],h=Sn.empty();for(let m=a.length-1;m>=0;--m)if(!Mk(l,a[m])){let v=a[m],E=u[m];E=je(E);let N=s.hc(v);if(E instanceof Jp)l.push(v);else{let M=Ss(E,N);M!=null&&(l.push(v),h.set(v,M))}}let p=new Hn(l);return new Yp(h,p,s.fieldTransforms)}function Sk(n,e,t,r=!1){return Ss(t,n.dc(r?4:3,e))}function Ss(n,e){if(Rk(n=je(n)))return t0("Unsupported field value:",e,n),Ak(n,e);if(n instanceof _o)return function(r,i){if(!Ck(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Ss(a,i.Pc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Xe.fromDate(r);return{timestampValue:kp(i.serializer,o)}}if(r instanceof Xe){let o=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kp(i.serializer,o)}}if(r instanceof Sl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tl)return{bytesValue:KP(i.serializer,r._byteString)};if(r instanceof Qt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Tc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$b(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Al)return function(s,a){return{mapValue:{fields:{[Ob]:{stringValue:Fb},[$a]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Tc("VectorValues must only contain numeric values.");return Bb(a.serializer,l)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${hg(r)}`)}(n,e)}function Ak(n,e){let t={};return wP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wo(n,(r,i)=>{let o=Ss(i,e.uc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Rk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof Sl||n instanceof Tl||n instanceof Qt||n instanceof _o||n instanceof Al)}function t0(n,e,t){if(!Rk(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=hg(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function Db(n,e,t){if((e=je(e))instanceof Ya)return e._internalPath;if(typeof e=="string")return n0(n,e);throw Xp("Field path arguments must be of type string or ",n,!1,void 0,t)}var ZG=new RegExp("[~\\*/\\[\\]]");function n0(n,e,t){if(e.search(ZG)>=0)throw Xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ya(...e.split("."))._internalPath}catch{throw Xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new $(k.INVALID_ARGUMENT,a+n+u)}function Mk(n,e){return n.some(t=>t.isEqual(e))}var Rl=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Tb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(pg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Tb=class extends Rl{data(){return super.data()}};function pg(n,e){return typeof e=="string"?n0(n,e):e instanceof Ya?e._internalPath:e._delegate._internalPath}function xk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ml=class{},Za=class extends Ml{};function Nk(n,e,...t){let r=[];e instanceof Ml&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Sb).length,a=o.filter(u=>u instanceof eg).length;if(s>1||s>0&&a>0)throw new $(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var eg=class n extends Za{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Vk(e._query,t),new qr(e.firestore,e.converter,fE(e._query,t))}_parse(e){let t=kl(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){rP(p,h);let E=[];for(let N of p)E.push(nP(u,o,N));m={arrayValue:{values:E}}}else m=nP(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||rP(p,h),m=Sk(a,s,p,h==="in"||h==="not-in");return _t.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Pk(n,e,t){let r=e,i=pg("where",n);return eg._create(i,r,t)}var Sb=class n extends Ml{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:dr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Vk(s,u),s=fE(s,u)}(e._query,t),new qr(e.firestore,e.converter,fE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Ab=class n extends Za{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new $(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Es(o,s)}(e._query,this._field,this._direction);return new qr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Hr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function kk(n,e="asc"){let t=e,r=pg("orderBy",n);return Ab._create(r,t)}var Rb=class n extends Za{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Lk(e,this.type,this._docOrFields,this._inclusive);return new qr(e.firestore,e.converter,function(i,o){return new Hr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Ok(...n){return Rb._create("startAt",n,!0)}var Mb=class n extends Za{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Lk(e,this.type,this._docOrFields,this._inclusive);return new qr(e.firestore,e.converter,function(i,o){return new Hr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Fk(...n){return Mb._create("endAt",n,!0)}function Lk(n,e,t,r){if(t[0]=je(t[0]),t[0]instanceof Rl)return function(o,s,a,u,l){if(!u)throw new $(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of La(o))if(p.field.isKeyField())h.push(Ap(s,u.key));else{let m=u.data.field(p.field);if(ig(m))throw new $(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new $(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new po(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=kl(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new $(k.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let E=0;E<h.length;E++){let N=h[E];if(m[E].field.isKeyField()){if(typeof N!="string")throw new $(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof N}`);if(!jb(s)&&N.indexOf("/")!==-1)throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${N}' contains a slash.`);let M=s.path.child(Ze.fromString(N));if(!Y.isDocumentKey(M))throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let B=new Y(M);v.push(Ap(a,B))}else{let M=Sk(u,l,N);v.push(M)}}return new po(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function nP(n,e,t){if(typeof(t=je(t))=="string"){if(t==="")throw new $(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jb(e)&&t.indexOf("/")!==-1)throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ze.fromString(t));if(!Y.isDocumentKey(r))throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ap(n,new Y(r))}if(t instanceof Qt)return Ap(n,t._key);throw new $(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hg(t)}.`)}function rP(n,e){if(!Array.isArray(n)||n.length===0)throw new $(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vk(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new $(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var xb=class{convertValue(e,t="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return wo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[$a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ye(s.doubleValue));return new Al(o)}convertGeoPoint(e){return new Sl(Ye(e.latitude),Ye(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=og(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){let t=Ci(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ze.fromString(e);Pe(ek(r),9688,{name:e});let i=new Sp(r.get(1),r.get(3)),o=new Y(r.popFirst(5));return i.isEqual(t)||bi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Uk(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var _s=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},tg=class extends Rl{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ua(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(pg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ua=class extends tg{data(e={}){return super.data(e)}},ng=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _s(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ua(this._firestore,this._userDataWriter,r.key,r,new _s(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ua(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _s(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ua(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _s(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:JG(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function JG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:n})}}function jk(n){n=gn(n,Qt);let e=gn(n.firestore,hr);return zG(fg(e),n._key).then(t=>Gk(e,n,t))}var xl=class extends xb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tl(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}};function Bk(n){n=gn(n,qr);let e=gn(n.firestore,hr),t=fg(e),r=new xl(e);return xk(n._query),qG(t,n._query).then(i=>new ng(e,r,n,i))}function $k(n,e,t){n=gn(n,Qt);let r=gn(n.firestore,hr),i=Uk(n.converter,e,t);return gg(r,[Dk(kl(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,jr.none())])}function Hk(n,e,t,...r){n=gn(n,Qt);let i=gn(n.firestore,hr),o=kl(i),s;return s=typeof(e=je(e))=="string"||e instanceof Ya?YG(o,"updateDoc",n._key,e,t,r):QG(o,"updateDoc",n._key,e),gg(i,[s.toMutation(n._key,jr.exists(!0))])}function zk(n){return gg(gn(n.firestore,hr),[new _l(n._key,jr.none())])}function qk(n,e){let t=gn(n.firestore,hr),r=e0(n),i=Uk(n.converter,e);return gg(t,[Dk(kl(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,jr.exists(!1))]).then(()=>r)}function r0(n,...e){var t,r,i;n=je(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||tP(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(tP(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Qt)l=gn(n.firestore,hr),h=sg(n._key.path),u={next:p=>{e[s]&&e[s](Gk(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=gn(n,qr);l=gn(p.firestore,hr),h=p._query;let m=new xl(l);u={next:v=>{e[s]&&e[s](new ng(l,m,p,v))},error:e[s+1],complete:e[s+2]},xk(n._query)}return function(m,v,E,N){let M=new Dl(N),B=new Cl(v,M,E);return m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Qb(yield Wp(m),B)})),()=>{M.yu(),m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Yb(yield Wp(m),B)}))}}(fg(l),h,a,u)}function gg(n,e){return function(r,i){let o=new ur;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return PG(yield HG(r),i,o)})),o.promise}(fg(n),e)}function Gk(n,e,t){let r=t.docs.get(e._key),i=new xl(n);return new tg(n,i,e._key,r,new _s(t.hasPendingWrites,t.fromCache),e.converter)}function Ol(...n){return new Eb("arrayUnion",n)}function Fl(...n){return new bb("arrayRemove",n)}function Wk(n){return new Cb("increment",n)}(function(e,t=!0){(function(i){Ja=i})(Pr),Tn(new kt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new hr(new WI(r.getProvider("auth-internal")),new YI(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sp(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Be(hN,fN,e),Be(hN,fN,"esm2017")})();var mg=function(){return mg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},mg.apply(this,arguments)};var t9={includeMetadataChanges:!1};function Kk(n,e){return e===void 0&&(e=t9),new ye(function(t){var r=r0(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Qk(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:mg(mg({},r),(t={},t[e.idField]=n.id,t))}function Yk(n){return Kk(n,{includeMetadataChanges:!0}).pipe(oe(function(e){return e.docs}))}function Zk(n,e){return e===void 0&&(e={}),Yk(n).pipe(oe(function(t){return t.map(function(r){return Qk(r,e)})}))}var bt=class{constructor(e){return e}},Jk="firestore",i0=class{constructor(){return ro(Jk)}};var o0=new z("angularfire2.firestore-instances");function n9(n,e){let t=ds(Jk,n,e);return t&&new bt(t)}function r9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new bt(r)}}var i9={provide:i0,deps:[[new Ct,o0]]},o9={provide:bt,useFactory:n9,deps:[[new Ct,o0],sr]};function Xk(n,...e){return Be("angularfire",kr.full,"fst"),kn([o9,i9,{provide:o0,useFactory:r9(n),multi:!0,deps:[Te,rt,Or,vi,[new Ct,ms],[new Ct,oo],...e]}])}var Ll=Ne(Zk,!0);var eO=Ne(qk,!0,2);var mn=Ne(Ek,!0,2);var tO=Ne(zk,!0,2);var xt=Ne(e0,!0,2);var nO=Ne(Fk,!0,2);var Io=Ne(jk,!0);var Eo=Ne(Bk,!0);var rO=Ne(bk,!0);var s0=Ne(Wk,!0,2);var vg=Ne(kk,!0,2),vn=Ne(Nk,!0,2);var iO=Ne($k,!0,2);var oO=Ne(Ok,!0,2);var Gr=Ne(Hk,!0,2);var Ai=Ne(Pk,!0,2);var hO="firebasestorage.googleapis.com",fO="storageBucket",s9=2*60*1e3,a9=10*60*1e3;var ot=class n extends on{constructor(e,t,r=0){super(a0(e),`Firebase Storage: ${t} (${a0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return a0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},dt=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(dt||{});function a0(n){return"storage/"+n}function f0(){let n="An unknown error occurred, please check the error payload for server response.";return new ot(dt.UNKNOWN,n)}function c9(n){return new ot(dt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function u9(n){return new ot(dt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function l9(){let n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ot(dt.UNAUTHENTICATED,n)}function d9(){return new ot(dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function h9(n){return new ot(dt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function f9(){return new ot(dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function p9(){return new ot(dt.CANCELED,"User canceled the upload/download.")}function g9(n){return new ot(dt.INVALID_URL,"Invalid URL '"+n+"'.")}function m9(n){return new ot(dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function v9(){return new ot(dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fO+"' property when initializing the app?")}function y9(){return new ot(dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _9(){return new ot(dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function w9(n){return new ot(dt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function c0(n){return new ot(dt.INVALID_ARGUMENT,n)}function pO(){return new ot(dt.APP_DELETED,"The Firebase app was deleted.")}function I9(n){return new ot(dt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ul(n,e){return new ot(dt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Vl(n){throw new ot(dt.INTERNAL_ERROR,"Internal error: "+n)}var fr=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw m9(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(he){he.path_=decodeURIComponent(he.path)}let h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),E={bucket:1,path:3},N=t===hO?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",B=new RegExp(`^https?://${N}/${i}/${M}`,"i"),X=[{regex:a,indices:u,postModify:o},{regex:v,indices:E,postModify:l},{regex:B,indices:{bucket:1,path:2},postModify:l}];for(let he=0;he<X.length;he++){let ht=X[he],De=ht.regex.exec(e);if(De){let C=De[ht.indices.bucket],_=De[ht.indices.path];_||(_=""),r=new n(C,_),ht.postModify(r);break}}if(r==null)throw g9(e);return r}},u0=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function E9(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let l=!1;function h(...M){l||(l=!0,e.apply(null,M))}function p(M){i=setTimeout(()=>{i=null,n(v,u())},M)}function m(){o&&clearTimeout(o)}function v(M,...B){if(l){m();return}if(M){m(),h.call(null,M,...B);return}if(u()||s){m(),h.call(null,M,...B);return}r<64&&(r*=2);let X;a===1?(a=2,X=0):X=(r+Math.random())*1e3,p(X)}let E=!1;function N(M){E||(E=!0,m(),!l&&(i!==null?(M||(a=2),clearTimeout(i),p(0)):M||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,N(!0)},t),N}function b9(n){n(!1)}function C9(n){return n!==void 0}function D9(n){return typeof n=="object"&&!Array.isArray(n)}function p0(n){return typeof n=="string"||n instanceof String}function sO(n){return g0()&&n instanceof Blob}function g0(){return typeof Blob<"u"}function aO(n,e,t,r){if(r<e)throw c0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw c0(`Invalid value for '${n}'. Expected ${t} or less.`)}function m0(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function gO(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var ic=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(ic||{});function T9(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var l0=class{constructor(e,t,r,i,o,s,a,u,l,h,p,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,E)=>{this.resolve_=v,this.reject_=E,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new rc(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===ic.NO_ERROR,u=o.getStatus();if(!a||T9(u,this.additionalRetryCodes_)&&this.retry){let h=o.getErrorCode()===ic.ABORT;r(!1,new rc(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new rc(l,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());C9(u)?o(u):o()}catch(u){s(u)}else if(a!==null){let u=f0();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){let u=this.appDelete_?pO():p9();s(u)}else{let u=f9();s(u)}};this.canceled_?t(!1,new rc(!1,null,!0)):this.backoffId_=E9(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&b9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},rc=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function S9(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function A9(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function R9(n,e){e&&(n["X-Firebase-GMPID"]=e)}function M9(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function x9(n,e,t,r,i,o,s=!0){let a=gO(n.urlParams),u=n.url+a,l=Object.assign({},n.headers);return R9(l,e),S9(l,t),A9(l,o),M9(l,r),new l0(u,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function N9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function P9(...n){let e=N9();if(e!==void 0){let t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(g0())return new Blob(n);throw new ot(dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function k9(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function O9(n){if(typeof atob>"u")throw w9("base-64");return atob(n)}var Wr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},jl=class{constructor(e,t){this.data=e,this.contentType=t||null}};function F9(n,e){switch(n){case Wr.RAW:return new jl(mO(e));case Wr.BASE64:case Wr.BASE64URL:return new jl(vO(n,e));case Wr.DATA_URL:return new jl(V9(e),U9(e))}throw f0()}function mO(n){let e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{let o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function L9(n){let e;try{e=decodeURIComponent(n)}catch{throw Ul(Wr.DATA_URL,"Malformed data URL.")}return mO(e)}function vO(n,e){switch(n){case Wr.BASE64:{let i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Ul(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wr.BASE64URL:{let i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Ul(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=O9(e)}catch(i){throw i.message.includes("polyfill")?i:Ul(n,"Invalid character found")}let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}var _g=class{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ul(Wr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;r!=null&&(this.base64=j9(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function V9(n){let e=new _g(n);return e.base64?vO(Wr.BASE64,e.rest):L9(e.rest)}function U9(n){return new _g(n).contentType}function j9(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}var wg=class n{constructor(e,t){let r=0,i="";sO(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(sO(this.data_)){let r=this.data_,i=k9(r,e,t);return i===null?null:new n(i)}else{let r=new Uint8Array(this.data_.buffer,e,t-e);return new n(r,!0)}}static getBlob(...e){if(g0()){let t=e.map(r=>r instanceof n?r.data_:r);return new n(P9.apply(null,t))}else{let t=e.map(s=>p0(s)?F9(Wr.RAW,s).data:s.data_),r=0;t.forEach(s=>{r+=s.byteLength});let i=new Uint8Array(r),o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new n(i,!0)}}uploadData(){return this.data_}};function yO(n){let e;try{e=JSON.parse(n)}catch{return null}return D9(e)?e:null}function B9(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function $9(n,e){let t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function _O(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function H9(n,e){return e}var Ot=class{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||H9}},yg=null;function z9(n){return!p0(n)||n.length<2?n:_O(n)}function wO(){if(yg)return yg;let n=[];n.push(new Ot("bucket")),n.push(new Ot("generation")),n.push(new Ot("metageneration")),n.push(new Ot("name","fullPath",!0));function e(o,s){return z9(s)}let t=new Ot("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}let i=new Ot("size");return i.xform=r,n.push(i),n.push(new Ot("timeCreated")),n.push(new Ot("updated")),n.push(new Ot("md5Hash",null,!0)),n.push(new Ot("cacheControl",null,!0)),n.push(new Ot("contentDisposition",null,!0)),n.push(new Ot("contentEncoding",null,!0)),n.push(new Ot("contentLanguage",null,!0)),n.push(new Ot("contentType",null,!0)),n.push(new Ot("metadata","customMetadata",!0)),yg=n,yg}function q9(n,e){function t(){let r=n.bucket,i=n.fullPath,o=new fr(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function G9(n,e,t){let r={};r.type="file";let i=t.length;for(let o=0;o<i;o++){let s=t[o];r[s.local]=s.xform(r,e[s.server])}return q9(r,n),r}function IO(n,e,t){let r=yO(e);return r===null?null:G9(n,r,t)}function W9(n,e,t,r){let i=yO(e);if(i===null||!p0(i.downloadTokens))return null;let o=i.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(l=>{let h=n.bucket,p=n.fullPath,m="/b/"+s(h)+"/o/"+s(p),v=m0(m,t,r),E=gO({alt:"media",token:l});return v+E})[0]}function K9(n,e){let t={},r=e.length;for(let i=0;i<r;i++){let o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}var Ig=class{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function EO(n){if(!n)throw f0()}function Q9(n,e){function t(r,i){let o=IO(n,i,e);return EO(o!==null),o}return t}function Y9(n,e){function t(r,i){let o=IO(n,i,e);return EO(o!==null),W9(o,i,n.host,n._protocol)}return t}function bO(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=d9():i=l9():t.getStatus()===402?i=u9(n.bucket):t.getStatus()===403?i=h9(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Z9(n){let e=bO(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=c9(n.path)),o.serverResponse=i.serverResponse,o}return t}function J9(n,e,t){let r=e.fullServerUrl(),i=m0(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,a=new Ig(i,o,Y9(n,t),s);return a.errorHandler=Z9(e),a}function X9(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function e5(n,e,t){let r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=X9(null,e)),r}function t5(n,e,t,r,i){let o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let X="";for(let he=0;he<2;he++)X=X+Math.random().toString().slice(2);return X}let u=a();s["Content-Type"]="multipart/related; boundary="+u;let l=e5(e,r,i),h=K9(l,t),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+u+"--",v=wg.getBlob(p,r,m);if(v===null)throw y9();let E={name:l.fullPath},N=m0(o,n.host,n._protocol),M="POST",B=n.maxUploadRetryTime,J=new Ig(N,M,Q9(n,t),B);return J.urlParams=E,J.headers=s,J.body=v.uploadData(),J.errorHandler=bO(e),J}var xoe=256*1024;var cO=null,d0=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ic.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ic.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ic.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Vl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(let o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Vl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Vl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Vl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Vl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},h0=class extends d0{initXhr(){this.xhr_.responseType="text"}};function CO(){return cO?cO():new h0}var oc=class n{constructor(e,t){this._service=e,t instanceof fr?this._location=t:this._location=fr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _O(this._location.path)}get storage(){return this._service}get parent(){let e=B9(this._location.path);if(e===null)return null;let t=new fr(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw I9(e)}};function n5(n,e,t){n._throwIfRoot("uploadBytes");let r=t5(n.storage,n._location,wO(),new wg(e,!0),t);return n.storage.makeRequestWithTokens(r,CO).then(i=>({metadata:i,ref:n}))}function r5(n){n._throwIfRoot("getDownloadURL");let e=J9(n.storage,n._location,wO());return n.storage.makeRequestWithTokens(e,CO).then(t=>{if(t===null)throw _9();return t})}function i5(n,e){let t=$9(n._location.path,e),r=new fr(n._location.bucket,t);return new oc(n.storage,r)}function o5(n){return/^[A-Za-z]+:\/\//.test(n)}function s5(n,e){return new oc(n,e)}function DO(n,e){if(n instanceof Bl){let t=n;if(t._bucket==null)throw v9();let r=new oc(t,t._bucket);return e!=null?DO(r,e):r}else return e!==void 0?i5(n,e):n}function a5(n,e){if(e&&o5(e)){if(n instanceof Bl)return s5(n,e);throw c0("To use ref(service, url), the first argument must be a Storage instance.")}else return DO(n,e)}function uO(n,e){let t=e?.[fO];return t==null?null:fr.makeFromBucketSpec(t,n)}function c5(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Bf(i,n.app.options.projectId))}var Bl=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=hO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=s9,this._maxUploadRetryTime=a9,this._requests=new Set,i!=null?this._bucket=fr.makeFromBucketSpec(i,this._host):this._bucket=uO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fr.makeFromBucketSpec(this._url,e):this._bucket=uO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){if(Wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oc(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new u0(pO());{let s=x9(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},lO="@firebase/storage",dO="0.13.7";var TO="storage";function Eg(n,e,t){return n=je(n),n5(n,e,t)}function bg(n){return n=je(n),r5(n)}function Cg(n,e){return n=je(n),a5(n,e)}function Dg(n=mi(),e){n=je(n);let r=no(n,TO).getImmediate({identifier:e}),i=jf("storage");return i&&SO(r,...i),r}function SO(n,e,t,r={}){c5(n,e,t,r)}function u5(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Bl(t,r,i,e,Pr)}function l5(){Tn(new kt(TO,u5,"PUBLIC").setMultipleInstances(!0)),Be(lO,dO,""),Be(lO,dO,"esm2017")}l5();var As=class{constructor(e){return e}},AO="storage",v0=class{constructor(){return ro(AO)}};var y0=new z("angularfire2.storage-instances");function d5(n,e){let t=ds(AO,n,e);return t&&new As(t)}function h5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new As(r)}}var f5={provide:v0,deps:[[new Ct,y0]]},p5={provide:As,useFactory:d5,deps:[[new Ct,y0],sr]};function RO(n,...e){return Be("angularfire",kr.full,"gcs"),kn([p5,f5,{provide:y0,useFactory:h5(n),multi:!0,deps:[Te,rt,Or,vi,[new Ct,ms],[new Ct,oo],...e]}])}var MO=Ne(bg,!0);var xO=Ne(Dg,!0);var NO=Ne(Cg,!0,2);var PO=Ne(Eg,!0);var kO={apiKey:"AIzaSyA-vOAil8Kyd-2Yq8xVsuL7eBByy6zixNY",authDomain:"dish-dash-csci313.firebaseapp.com",projectId:"dish-dash-csci313",storageBucket:"dish-dash-csci313.firebasestorage.app",messagingSenderId:"48170304064",appId:"1:48170304064:web:c06ffebc02012d4a4cd5a5",measurementId:"G-KCCXKK6K1E"};var st=class n{constructor(e,t){this.auth=e;this.firestore=t;this.auth.onAuthStateChanged(r=>{r?this.getUserData(r.uid).then(i=>{this.currentUserSubject.next(i)}):this.currentUserSubject.next(null)})}DEFAULT_PROFILE_PICTURE="https://t4.ftcdn.net/jpg/00/72/27/13/240_F_72271347_Upeb6J6n9PkS8kqEUpZltIkLlboW5B1P.jpg";currentUserSubject=new Ve(null);currentUser$=this.currentUserSubject.asObservable();createUserData(e,t){return y(this,null,function*(){let r={uid:e.uid,email:e.email,username:t,createdAt:Xe.now(),lastLogin:Xe.now(),profilePicture:this.DEFAULT_PROFILE_PICTURE},i=xt(this.firestore,`users/${e.uid}`);yield iO(i,r)})}getUserData(e){return y(this,null,function*(){let t=xt(this.firestore,`users/${e}`),r=yield Io(t);if(r.exists()){let i=r.data();return i.profilePicture=i.profilePicture||this.DEFAULT_PROFILE_PICTURE,i}return null})}updateLastLogin(e){return y(this,null,function*(){let t=xt(this.firestore,`users/${e}`);yield Gr(t,{lastLogin:new Date})})}getCurrentUser(){return this.currentUserSubject.value}signOut(){return y(this,null,function*(){yield this.auth.signOut(),this.currentUserSubject.next(null),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),document.cookie.split(";").forEach(e=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),window.location.reload()})}getProfilePicture(e){return e&&e.profilePicture?e.profilePicture:"assets/default-avatar.png"}getUserByUsername(e){let t=mn(this.firestore,"users"),r=vn(t,Ai("username","==",e));return Ae(Eo(r)).pipe(oe(i=>{if(i.empty)return null;let o=i.docs[0];return ie(U({},o.data()),{uid:o.id})}),Xt(i=>(console.error("Error fetching user by username:",i),Q(null))))}getCurrentUserSync(){return this.currentUserSubject.value}uploadProfilePicture(e){return y(this,null,function*(){let t=Dg(),r=this.getCurrentUser()?.uid;if(!r)throw new Error("No user logged in");let i=`profilePictures/${r}/${e.name}`,o=Cg(t,i);return yield Eg(o,e),yield bg(o)})}updateProfilePicture(e,t){return y(this,null,function*(){let r=xt(this.firestore,`users/${e}`);yield Gr(r,{profilePicture:t})})}static \u0275fac=function(t){return new(t||n)(Z(cr),Z(bt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var yn=class n{firestore=F(bt);userService=F(st);savedRecipesSubject=new Ve([]);savedRecipes$=this.savedRecipesSubject.asObservable();likedRecipesSubject=new Ve([]);likedRecipes$=this.likedRecipesSubject.asObservable();loadSavedRecipes(){return y(this,null,function*(){let e=this.userService.getCurrentUser();if(!e){this.savedRecipesSubject.next([]);return}try{let i=(yield Io(xt(this.firestore,"users",e.uid))).data()?.savedRecipes||[];if(i.length===0){this.savedRecipesSubject.next([]);return}let o=mn(this.firestore,"recipes"),s=vn(o,Ai("__name__","in",i)),u=(yield Eo(s)).docs.map(l=>U({id:l.id},l.data()));this.savedRecipesSubject.next(u)}catch(t){console.error("Error loading saved recipes:",t),this.savedRecipesSubject.next([])}})}loadLikedRecipes(){return y(this,null,function*(){let e=this.userService.getCurrentUser();if(!e){this.likedRecipesSubject.next([]);return}try{let i=(yield Io(xt(this.firestore,"users",e.uid))).data()?.likedRecipes||[];if(i.length===0){this.likedRecipesSubject.next([]);return}let o=mn(this.firestore,"recipes"),s=vn(o,Ai("__name__","in",i)),u=(yield Eo(s)).docs.map(l=>U({id:l.id},l.data()));this.likedRecipesSubject.next(u)}catch(t){console.error("Error loading liked recipes:",t),this.likedRecipesSubject.next([])}})}toggleLike(e){return y(this,null,function*(){let t=this.userService.getCurrentUser();if(!t||!e.id)return!1;let r=xt(this.firestore,`recipes/${e.id}`),i=xt(this.firestore,`users/${t.uid}`),o=e.likedBy?.includes(t.uid);try{return yield Gr(r,{likes:s0(o?-1:1),likedBy:o?Fl(t.uid):Ol(t.uid)}),yield Gr(i,{likedRecipes:o?Fl(e.id):Ol(e.id)}),yield this.loadLikedRecipes(),!0}catch(s){return console.error("Error toggling like:",s),!1}})}toggleSave(e){return y(this,null,function*(){let t=this.userService.getCurrentUser();if(!t||!e.id)return!1;let r=xt(this.firestore,`recipes/${e.id}`),i=xt(this.firestore,`users/${t.uid}`),o=e.savedBy?.includes(t.uid);try{return yield Gr(r,{saves:s0(o?-1:1),savedBy:o?Fl(t.uid):Ol(t.uid)}),yield Gr(i,{savedRecipes:o?Fl(e.id):Ol(e.id)}),yield this.loadSavedRecipes(),!0}catch(s){return console.error("Error toggling save:",s),!1}})}isLikedByUser(e){let t=this.userService.getCurrentUser();return t?e.likedBy?.includes(t.uid)??!1:!1}isSavedByUser(e){let t=this.userService.getCurrentUser();return t?e.savedBy?.includes(t.uid)??!1:!1}getSavedRecipes(){return y(this,null,function*(){let e=this.userService.getCurrentUser();if(!e?.savedRecipes)return[];try{let t=mn(this.firestore,"recipes"),r=vn(t,Ai("__name__","in",e.savedRecipes));return(yield Eo(r)).docs.map(o=>U({id:o.id},o.data()))}catch(t){return console.error("Error fetching saved recipes:",t),[]}})}getSavedRecipes$(){return Ae(this.getSavedRecipes())}getLikedRecipes(){return y(this,null,function*(){let e=this.userService.getCurrentUser();if(!e?.savedRecipes)return[];try{let t=mn(this.firestore,"recipes"),r=vn(t,Ai("__name__","in",e.likedRecipes));return(yield Eo(r)).docs.map(o=>U({id:o.id},o.data()))}catch(t){return console.error("Error fetching liked recipes:",t),[]}})}getLikedRecipes$(){return Ae(this.getLikedRecipes())}getRecipeAuthor(e){return y(this,null,function*(){try{let t=yield Io(xt(this.firestore,"users",e));return t.exists()?ie(U({},t.data()),{uid:t.id}):null}catch(t){return console.error("Error fetching recipe author:",t),null}})}getRecipeCountByUser(e){return y(this,null,function*(){try{let t=mn(this.firestore,"recipes"),r=vn(t,Ai("userId","==",e));return(yield Eo(r)).size}catch(t){return console.error("Error getting recipe count:",t),0}})}getCreatedRecipesByUserId(e){let t=mn(this.firestore,"recipes"),r=vn(t,Ai("userId","==",e));return Ll(r,{idField:"id"})}deleteRecipe(e){let t=xt(this.firestore,"recipes",e);return tO(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var ac=class n{constructor(e){this.firestore=e}searchTerm=new Ve("");filterTerm=new Ve("");searchTerm$=this.searchTerm.asObservable();filterTerm$=this.filterTerm.asObservable();updateSearchTerm(e){this.searchTerm.next(e)}updateFilterTermDate(){this.filterTerm.next("date")}updateFilterTermCategory(){this.filterTerm.next("category")}resetFilterTerm(){this.filterTerm.next("")}static \u0275fac=function(t){return new(t||n)(Z(bt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var m5=n=>["/recipe",n],v5=(n,e)=>e.id;function y5(n,e){if(n&1){let t=ut();A(0,"div",2)(1,"img",4),ee("error",function(i){Me(t);let o=te();return xe(o.handleImageError(i))}),S(),A(2,"div",5)(3,"h3",6),O(4),S(),A(5,"div",7)(6,"button",8),ee("click",function(i){let o=Me(t).$implicit,s=te();return xe(s.toggleLike(o,i))}),K(7,"i",9),O(8),S(),A(9,"button",8),ee("click",function(i){let o=Me(t).$implicit,s=te();return xe(s.toggleSave(o,i))}),K(10,"i",9),O(11),S()()()()}if(n&2){let t=e.$implicit,r=te();G("routerLink",Ln(18,m5,t.id)),P(),G("src",t.imageUrl,Tt)("alt",t.name),P(3),ze(t.name),P(2),He("active",r.isLiked(t)),P(),He("bi-heart-fill",r.isLiked(t))("bi-heart",!r.isLiked(t)),P(),ke(" ",t.likes," "),P(),He("active",r.isSaved(t)),P(),He("bi-bookmark-fill",r.isSaved(t))("bi-bookmark",!r.isSaved(t)),P(),ke(" ",t.saves," ")}}function _5(n,e){n&1&&(A(0,"div",3)(1,"p"),O(2,"No recipes found. Be the first to add one!"),S()())}var Tg=class n{constructor(e,t,r,i){this.firestore=e;this.recipeService=t;this.userService=r;this.filterService=i;this.recipes$=Q([]),Po([this.filterService.searchTerm$,this.filterService.filterTerm$]).subscribe(([o,s])=>{this.fetchRecipes(o,s)})}recipes$;ngOnInit(){let e=mn(this.firestore,"recipes");this.recipes$=Ll(e,{idField:"id"}).pipe(oe(t=>t.map(r=>ie(U({},r),{likes:r.likes||0,saves:r.saves||0,likedBy:r.likedBy||[],savedBy:r.savedBy||[],imageUrl:r.imageUrl||"https://placehold.co/600x400/png?text=Recipe"}))),Xt(t=>(console.error("Error fetching recipes:",t),Q([]))))}fetchRecipes(e,t){console.log(e);let r=mn(this.firestore,"recipes"),i=vn(r);t==="date"?(console.log("Applying date filter"),i=vn(i,vg("createdAt","desc"))):t==="category"?(console.log("Applying category filter"),i=vn(i,vg("tags","desc"))):(console.log("Applying default filter: order by name"),i=vn(i,vg("name"),oO(e),nO(e+"\uF8FF"))),this.recipes$=Ll(i,{idField:"id"}).pipe(oe(o=>o.map(s=>ie(U({},s),{likes:s.likes||0,saves:s.saves||0,likedBy:s.likedBy||[],savedBy:s.savedBy||[],imageUrl:s.imageUrl||"https://placehold.co/600x400/png?text=Recipe"}))),Xt(o=>(console.error("Error fetching recipes:",o),Q([]))))}handleImageError(e){let t=e.target;t&&(t.src="https://placehold.co/600x400/png?text=Recipe")}toggleLike(e,t){return y(this,null,function*(){t.preventDefault(),t.stopPropagation(),this.userService.getCurrentUser()&&(yield this.recipeService.toggleLike(e))})}toggleSave(e,t){return y(this,null,function*(){t.preventDefault(),t.stopPropagation(),this.userService.getCurrentUser()&&(yield this.recipeService.toggleSave(e))})}isLiked(e){return this.recipeService.isLikedByUser(e)}isSaved(e){return this.recipeService.isSavedByUser(e)}static \u0275fac=function(t){return new(t||n)(L(bt),L(yn),L(st),L(ac))};static \u0275cmp=$e({type:n,selectors:[["app-home"]],decls:8,vars:3,consts:[[1,"home-recipes-container"],[1,"recipe-grid"],["role","button",1,"recipe-card",3,"routerLink"],[1,"no-recipes"],[1,"recipe-image",3,"error","src","alt"],[1,"recipe-info"],[1,"recipe-title"],[1,"recipe-stats"],[1,"stat-btn",3,"click"],[1,"bi"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"h2"),O(2,"Home"),S(),A(3,"div",1),Cr(4,y5,12,20,"div",2,v5,!1,_5,3,0,"div",3),er(7,"async"),S()()),t&2&&(P(4),Dr(Ki(7,1,r.recipes$)))},dependencies:[mt,fi,rn,Gt],styles:[".home-recipes-container[_ngcontent-%COMP%]{padding:2rem;max-width:1800px;margin:0 auto}h2[_ngcontent-%COMP%]{margin-bottom:2rem;font-family:Playfair Display,serif;color:#333}.recipe-grid[_ngcontent-%COMP%]{columns:3;column-gap:2rem;width:100%}.recipe-card[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:2rem;position:relative;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px #0000001a;transition:transform .2s ease;display:inline-block;width:100%;cursor:pointer}.recipe-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.recipe-image[_ngcontent-%COMP%]{width:100%;display:block;object-fit:cover}.recipe-info[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:1.5rem;background:linear-gradient(transparent,#000c)}.recipe-title[_ngcontent-%COMP%]{color:#fff;margin:0 0 .75rem;font-size:1.5rem}.recipe-stats[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.stat[_ngcontent-%COMP%]{color:#ccc;font-size:1.1rem;display:flex;align-items:center;gap:.5rem}.stat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.stat-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ccc;font-size:1.1rem;display:flex;align-items:center;gap:.5rem;padding:.5rem;cursor:pointer;transition:all .2s ease}.stat-btn[_ngcontent-%COMP%]:hover{color:#fff;transform:scale(1.1)}.stat-btn.active[_ngcontent-%COMP%]{color:#ff4081}.stat-btn.active.bi-bookmark-fill[_ngcontent-%COMP%], button.stat-btn[_ngcontent-%COMP%]:has(.bi-bookmark-fill).active{color:#ffc107}.stat-btn.active[_ngcontent-%COMP%]   .bi-bookmark-fill[_ngcontent-%COMP%]{color:#ffc107}.stat-btn.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop .3s ease}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}@media (max-width: 1200px){.recipe-grid[_ngcontent-%COMP%]{columns:2}}@media (max-width: 768px){.recipe-grid[_ngcontent-%COMP%]{columns:1}}"]})};var Kr=class n{constructor(e){this.firestore=e}getRecipeById(e){return y(this,null,function*(){try{console.log("Fetching recipe with ID:",e);let t=xt(this.firestore,"recipes",e),r=yield Io(t);if(!r.exists())return console.log("No recipe found with ID:",e),null;let i=r.data();return console.log("Recipe data from Firestore:",i),U({id:r.id},i)}catch(t){throw console.error("Error in getRecipeById:",t),t}})}static \u0275fac=function(t){return new(t||n)(Z(bt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function w5(n,e){if(n&1&&(A(0,"span",22),O(1),S()),n&2){let t=e.$implicit;P(),ze(t)}}function I5(n,e){if(n&1&&(A(0,"div",20),Ee(1,w5,2,1,"span",21),S()),n&2){let t=te(2);P(),G("ngForOf",t.recipe.tags)}}function E5(n,e){if(n&1&&K(0,"img",23),n&2){let t=te(2);G("src",t.recipe.imageUrl,Tt)("alt",t.recipe.name)}}function b5(n,e){if(n&1&&(A(0,"li"),O(1),S()),n&2){let t=e.$implicit;P(),p_(" ",t.quantity," ",t.unit," ",t.name," ")}}function C5(n,e){if(n&1&&(A(0,"li"),O(1),S()),n&2){let t=e.$implicit;P(),ze(t)}}function D5(n,e){if(n&1){let t=ut();A(0,"button",24),ee("click",function(){Me(t);let i=te(2);return xe(i.editRecipe())}),O(1," Edit Recipe "),S()}}function T5(n,e){if(n&1){let t=ut();A(0,"button",25),ee("click",function(){Me(t);let i=te(2);return xe(i.deleteRecipe())}),O(1," Delete Recipe "),S()}}function S5(n,e){if(n&1){let t=ut();A(0,"div",3)(1,"div",4)(2,"div",5)(3,"h1",6),O(4),S(),A(5,"div",7),ee("click",function(i){Me(t);let o=te();return xe(o.navigateToAuthorProfile(i))}),K(6,"img",8),A(7,"span",9),O(8),S()(),Ee(9,I5,2,1,"div",10),A(10,"p",11),O(11),S()(),A(12,"div",12),Ee(13,E5,1,2,"img",13),S()(),A(14,"div",14)(15,"div",15)(16,"h2"),O(17,"Ingredients"),S(),A(18,"ul"),Ee(19,b5,2,3,"li",16),S()(),A(20,"div",17)(21,"h2"),O(22,"Instructions"),S(),A(23,"ol"),Ee(24,C5,2,1,"li",16),S()()(),K(25,"hr"),Ee(26,D5,2,0,"button",18)(27,T5,2,0,"button",19),S()}if(n&2){let t,r=te();P(4),ze(r.recipe.name),P(2),G("src",r.getAuthorProfilePicture(),Tt)("alt",r.author==null?null:r.author.username),P(2),ze(r.author==null?null:r.author.username),P(),G("ngIf",r.recipe.tags&&r.recipe.tags.length>0),P(2),ze(r.recipe.description),P(2),G("ngIf",r.recipe.imageUrl),P(6),G("ngForOf",r.recipe.ingredients),P(5),G("ngForOf",r.recipe.directions),P(2),On(r.canEdit()?26:-1),P(),On((t=r.canDelete())?27:-1,t)}}function A5(n,e){n&1&&(A(0,"div",26),O(1,"Loading recipe..."),S())}function R5(n,e){if(n&1&&(A(0,"div",27),O(1),S()),n&2){let t=te();P(),ke(" ",t.error,`
`)}}var Sg=class n{constructor(e,t,r,i,o){this.route=e;this.router=t;this.firebaseService=r;this.recipeService=i;this.userService=o}recipe=null;author=null;loading=!0;error=null;ngOnInit(){this.route.params.subscribe(e=>{let t=e.id;if(!t){this.router.navigate(["/home"]);return}this.loadRecipe(t)})}loadRecipe(e){return y(this,null,function*(){try{this.loading=!0,this.error=null;let t=yield this.firebaseService.getRecipeById(e);if(!t)throw new Error("Recipe not found");this.recipe=t,this.recipe.userId&&(this.author=yield this.recipeService.getRecipeAuthor(this.recipe.userId))}catch(t){console.error("Error loading recipe:",t),this.error="Failed to load recipe",this.router.navigate(["/home"])}finally{this.loading=!1}})}getAuthorProfilePicture(){return this.userService.getProfilePicture(this.author)}navigateToAuthorProfile(e){e.preventDefault(),e.stopPropagation(),this.author?.username&&this.router.navigate(["/profile",this.author.username])}anDelete(){return this.userService.getCurrentUserSync()?.uid===this.recipe?.userId}canDelete(){return this.userService.getCurrentUserSync()?.uid===this.recipe?.userId}deleteRecipe(){return y(this,null,function*(){if(!(!this.recipe?.id||!confirm("Are you sure you want to delete this recipe?")))try{yield this.recipeService.deleteRecipe(this.recipe.id),this.router.navigate(["/profile",this.author?.username||""])}catch(t){console.error("Failed to delete recipe:",t),alert("Error deleting recipe")}})}canEdit(){return this.userService.getCurrentUserSync()?.uid===this.recipe?.userId}editRecipe(){this.recipe?.id&&this.router.navigate(["/edit-recipe",this.recipe.id])}static \u0275fac=function(t){return new(t||n)(L(qt),L(Ke),L(Kr),L(yn),L(st))};static \u0275cmp=$e({type:n,selectors:[["app-recipe"]],features:[Xn([Kr])],decls:3,vars:3,consts:[["class","recipe-container",4,"ngIf"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[1,"recipe-container"],[1,"recipe-header-grid"],[1,"recipe-info"],[1,"recipe-title"],[1,"recipe-author",2,"cursor","pointer",3,"click"],[1,"author-avatar",3,"src","alt"],[1,"author-name"],["class","tags",4,"ngIf"],[1,"recipe-description"],[1,"recipe-image-container"],["class","recipe-image",3,"src","alt",4,"ngIf"],[1,"recipe-content"],[1,"ingredients-section"],[4,"ngFor","ngForOf"],[1,"instructions-section"],["type","button",1,"btn","btn-info"],["type","button",1,"btn","btn-danger"],[1,"tags"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],[1,"recipe-image",3,"src","alt"],["type","button",1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"loading"],[1,"error"]],template:function(t,r){t&1&&Ee(0,S5,28,11,"div",0)(1,A5,2,0,"div",1)(2,R5,2,1,"div",2),t&2&&(G("ngIf",r.recipe),P(),G("ngIf",r.loading),P(),G("ngIf",r.error))},dependencies:[mt,ga,hi,rn],styles:[".recipe-container[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:1rem}.recipe-header-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-bottom:3rem;align-items:start}.recipe-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;height:100%}.recipe-title[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-weight:700;font-size:2.5rem;color:#222;margin:0}.recipe-description[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.6;color:#666}.recipe-image-container[_ngcontent-%COMP%]{width:100%;border-radius:12px;box-shadow:0 4px 6px #0000001a}.recipe-image[_ngcontent-%COMP%]{width:100%;height:auto;display:block;border-radius:12px}.tags[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.tag[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:.25rem .75rem;border-radius:1rem;font-size:.875rem;color:#666}.recipe-content[_ngcontent-%COMP%]{margin-top:2rem;border-top:1px solid #eee;padding-top:2rem}.ingredients-section[_ngcontent-%COMP%], .instructions-section[_ngcontent-%COMP%]{margin-bottom:2rem}h2[_ngcontent-%COMP%]{font-family:Playfair Display,serif;font-weight:600;font-size:1.75rem;color:#333;margin-bottom:1rem}ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%]{padding-left:1.5rem}li[_ngcontent-%COMP%]{margin:.75rem 0;line-height:1.5}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{text-align:center;padding:2rem;font-size:1.2rem}.error[_ngcontent-%COMP%]{color:#dc3545}.recipe-author[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin:.5rem 0;transition:opacity .2s ease}.recipe-author[_ngcontent-%COMP%]:hover{opacity:.8}.author-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;object-fit:cover}.author-name[_ngcontent-%COMP%]{font-size:.95rem;color:#666;font-weight:500}button[_ngcontent-%COMP%]{margin:5px}@media (max-width: 768px){.recipe-header-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.recipe-title[_ngcontent-%COMP%]{font-size:2rem}.recipe-image-container[_ngcontent-%COMP%]{order:-1}}"]})};var zO=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(L(ci),L(In))};static \u0275dir=Qe({type:n})}return n})(),qO=(()=>{class n extends zO{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jo(n)))(i||n)}})();static \u0275dir=Qe({type:n,features:[hn]})}return n})(),Gl=new z("");var M5={provide:Gl,useExisting:Yn(()=>Co),multi:!0};function x5(){let n=Un()?Un().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var N5=new z(""),Co=(()=>{class n extends zO{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!x5())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(L(ci),L(In),L(N5,8))};static \u0275dir=Qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ee("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Xn([M5]),hn]})}return n})();function C0(n){return n==null||D0(n)===0}function D0(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var dc=new z(""),hc=new z(""),P5=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Je=class{static min(e){return k5(e)}static max(e){return O5(e)}static required(e){return F5(e)}static requiredTrue(e){return L5(e)}static email(e){return V5(e)}static minLength(e){return U5(e)}static maxLength(e){return j5(e)}static pattern(e){return B5(e)}static nullValidator(e){return GO()}static compose(e){return JO(e)}static composeAsync(e){return e1(e)}};function k5(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function O5(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function F5(n){return C0(n.value)?{required:!0}:null}function L5(n){return n.value===!0?null:{required:!0}}function V5(n){return C0(n.value)||P5.test(n.value)?null:{email:!0}}function U5(n){return e=>{let t=e.value?.length??D0(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function j5(n){return e=>{let t=e.value?.length??D0(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function B5(n){if(!n)return GO;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(C0(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function GO(n){return null}function WO(n){return n!=null}function KO(n){return Wi(n)?Ae(n):n}function QO(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function YO(n,e){return e.map(t=>t(n))}function $5(n){return!n.validate}function ZO(n){return n.map(e=>$5(e)?e:t=>e.validate(t))}function JO(n){if(!n)return null;let e=n.filter(WO);return e.length==0?null:function(t){return QO(YO(t,e))}}function XO(n){return n!=null?JO(ZO(n)):null}function e1(n){if(!n)return null;let e=n.filter(WO);return e.length==0?null:function(t){let r=YO(t,e).map(KO);return Jm(r).pipe(oe(QO))}}function t1(n){return n!=null?e1(ZO(n)):null}function LO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function n1(n){return n._rawValidators}function r1(n){return n._rawAsyncValidators}function _0(n){return n?Array.isArray(n)?n:[n]:[]}function Rg(n,e){return Array.isArray(n)?n.includes(e):n===e}function VO(n,e){let t=_0(e);return _0(n).forEach(i=>{Rg(t,i)||t.push(i)}),t}function UO(n,e){return _0(e).filter(t=>!Rg(n,t))}var Mg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=XO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=t1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Rn=class extends Mg{name;get formDirective(){return null}get path(){return null}},Mi=class extends Mg{_parent=null;name=null;valueAccessor=null},xg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},H5={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},rae=ie(U({},H5),{"[class.ng-submitted]":"isSubmitted"}),fc=(()=>{class n extends xg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(L(Mi,2))};static \u0275dir=Qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&He("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[hn]})}return n})(),pc=(()=>{class n extends xg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(L(Rn,10))};static \u0275dir=Qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&He("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[hn]})}return n})();var $l="VALID",Ag="INVALID",cc="PENDING",Hl="DISABLED",bo=class{},Ng=class extends bo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},zl=class extends bo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},ql=class extends bo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},uc=class extends bo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},w0=class extends bo{source;constructor(e){super(),this.source=e}},I0=class extends bo{source;constructor(e){super(),this.source=e}};function T0(n){return(Vg(n)?n.validators:n)||null}function z5(n){return Array.isArray(n)?XO(n):n||null}function S0(n,e){return(Vg(e)?e.asyncValidators:n)||null}function q5(n){return Array.isArray(n)?t1(n):n||null}function Vg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function i1(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new W(1e3,"");if(!r[t])throw new W(1001,"")}function o1(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new W(1002,"")})}var lc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Vn(this.statusReactive)}set status(e){Vn(()=>this.statusReactive.set(e))}_status=pa(()=>this.statusReactive());statusReactive=ha(void 0);get valid(){return this.status===$l}get invalid(){return this.status===Ag}get pending(){return this.status==cc}get disabled(){return this.status===Hl}get enabled(){return this.status!==Hl}errors;get pristine(){return Vn(this.pristineReactive)}set pristine(e){Vn(()=>this.pristineReactive.set(e))}_pristine=pa(()=>this.pristineReactive());pristineReactive=ha(!0);get dirty(){return!this.pristine}get touched(){return Vn(this.touchedReactive)}set touched(e){Vn(()=>this.touchedReactive.set(e))}_touched=pa(()=>this.touchedReactive());touchedReactive=ha(!1);get untouched(){return!this.touched}_events=new at;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(VO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(VO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(UO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(UO(e,this._rawAsyncValidators))}hasValidator(e){return Rg(this._rawValidators,e)}hasAsyncValidator(e){return Rg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ie(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ql(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ql(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ie(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new zl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new zl(!0,r))}markAsPending(e={}){this.status=cc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ie(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Hl,this.errors=null,this._forEachChild(i=>{i.disable(ie(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ng(this.value,r)),this._events.next(new uc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$l,this._forEachChild(r=>{r.enable(ie(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$l||this.status===cc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ng(this.value,t)),this._events.next(new uc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ie(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hl:$l}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=cc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=KO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new uc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Hl:this.errors?Ag:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cc)?cc:this._anyControlsHaveStatus(Ag)?Ag:$l}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new zl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ql(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=z5(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=q5(this._rawAsyncValidators)}},Pg=class extends lc{constructor(e,t,r){super(T0(t),S0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){o1(this,!0,e),Object.keys(e).forEach(r=>{i1(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var E0=class extends Pg{};var Wl=new z("",{providedIn:"root",factory:()=>Ug}),Ug="always";function jg(n,e){return[...e.path,n]}function kg(n,e,t=Ug){A0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),W5(n,e),Q5(n,e),K5(n,e),G5(n,e)}function Og(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Lg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Fg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function G5(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function A0(n,e){let t=n1(n);e.validator!==null?n.setValidators(LO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=r1(n);e.asyncValidator!==null?n.setAsyncValidators(LO(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Fg(e._rawValidators,i),Fg(e._rawAsyncValidators,i)}function Lg(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=n1(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=r1(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Fg(e._rawValidators,r),Fg(e._rawAsyncValidators,r),t}function W5(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&s1(n,e)})}function K5(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&s1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function s1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Q5(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Y5(n,e){n==null,A0(n,e)}function Z5(n,e){return Lg(n,e)}function R0(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function J5(n){return Object.getPrototypeOf(n.constructor)===qO}function X5(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function M0(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Co?t=o:J5(o)?r=o:i=o}),i||r||t||null}function eW(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function jO(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function BO(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Rs=class extends lc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(T0(t),S0(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(BO(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){jO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){jO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){BO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var tW=n=>n instanceof Rs,nW=(()=>{class n extends Rn{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return jg(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jo(n)))(i||n)}})();static \u0275dir=Qe({type:n,standalone:!1,features:[hn]})}return n})();var rW={provide:Mi,useExisting:Yn(()=>x0)},$O=Promise.resolve(),x0=(()=>{class n extends Mi{_changeDetectorRef;callSetDisabledState;control=new Rs;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new nt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=M0(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),R0(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){kg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){$O.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&es(r);$O.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?jg(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(L(Rn,9),L(dc,10),L(hc,10),L(Gl,10),L(ui,8),L(Wl,8))};static \u0275dir=Qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Xn([rW]),hn,Jn]})}return n})();var gc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),iW={provide:Gl,useExisting:Yn(()=>N0),multi:!0},N0=(()=>{class n extends qO{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jo(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ee("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Xn([iW]),hn]})}return n})();var P0=new z(""),oW={provide:Mi,useExisting:Yn(()=>k0)},k0=(()=>{class n extends Mi{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new nt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=M0(this,i)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&Og(r,this,!1),kg(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}R0(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Og(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(L(dc,10),L(hc,10),L(Gl,10),L(P0,8),L(Wl,8))};static \u0275dir=Qe({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[Xn([oW]),hn,Jn]})}return n})(),sW={provide:Rn,useExisting:Yn(()=>mc)},mc=(()=>{class n extends Rn{callSetDisabledState;get submitted(){return Vn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=pa(()=>this._submittedReactive());_submittedReactive=ha(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new nt;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Lg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return kg(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Og(t.control||null,t,!1),eW(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),X5(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new w0(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new I0(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Og(r||null,t),tW(i)&&(kg(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Y5(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&Z5(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){A0(this.form,this),this._oldForm&&Lg(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(L(dc,10),L(hc,10),L(Wl,8))};static \u0275dir=Qe({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ee("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Xn([sW]),hn,Jn]})}return n})(),aW={provide:Rn,useExisting:Yn(()=>Bg)},Bg=(()=>{class n extends nW{name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){a1(this._parent)}static \u0275fac=function(r){return new(r||n)(L(Rn,13),L(dc,10),L(hc,10))};static \u0275dir=Qe({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[Xn([aW]),hn]})}return n})(),cW={provide:Rn,useExisting:Yn(()=>$g)},$g=(()=>{class n extends Rn{_parent;name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){a1(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return jg(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)(L(Rn,13),L(dc,10),L(hc,10))};static \u0275dir=Qe({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[Xn([cW]),hn]})}return n})();function a1(n){return!(n instanceof Bg)&&!(n instanceof mc)&&!(n instanceof $g)}var uW={provide:Mi,useExisting:Yn(()=>Kl)},Kl=(()=>{class n extends Mi{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new nt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=M0(this,o)}ngOnChanges(t){this._added||this._setUpControl(),R0(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return jg(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(L(Rn,13),L(dc,10),L(hc,10),L(Gl,10),L(P0,8))};static \u0275dir=Qe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Xn([uW]),hn,Jn]})}return n})();var c1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Ir({})}return n})(),b0=class extends lc{constructor(e,t,r){super(T0(t),S0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){o1(this,!1,e),e.forEach((r,i)=>{i1(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function HO(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Hg=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return HO(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Pg(i,o)}record(t,r=null){let i=this._reduceControls(t);return new E0(i,r)}control(t,r,i){let o={};return this.useNonNullable?(HO(r)?o=r:(o.validators=r,o.asyncValidators=i),new Rs(t,ie(U({},o),{nonNullable:!0}))):new Rs(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new b0(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Rs)return t;if(t instanceof lc)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var u1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Wl,useValue:t.callSetDisabledState??Ug}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Ir({imports:[c1]})}return n})(),vc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:P0,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Wl,useValue:t.callSetDisabledState??Ug}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=br({type:n});static \u0275inj=Ir({imports:[c1]})}return n})();var F0=n=>({"is-invalid":n});function lW(n,e){n&1&&(A(0,"div"),O(1," Email is required "),S())}function dW(n,e){n&1&&(A(0,"div"),O(1," Email must be valid "),S())}function hW(n,e){if(n&1&&(A(0,"div",21),Ee(1,lW,2,0,"div",22)(2,dW,2,0,"div",22),S()),n&2){let t=te();P(),G("ngIf",t.f.email.errors.required),P(),G("ngIf",t.f.email.errors.email)}}function fW(n,e){n&1&&(A(0,"div"),O(1," Username is required "),S())}function pW(n,e){n&1&&(A(0,"div"),O(1," Username must be at least 3 characters "),S())}function gW(n,e){n&1&&(A(0,"div"),O(1," Username can only contain letters, numbers, underscores and hyphens "),S())}function mW(n,e){if(n&1&&(A(0,"div",21),Ee(1,fW,2,0,"div",22)(2,pW,2,0,"div",22)(3,gW,2,0,"div",22),S()),n&2){let t=te(2);P(),G("ngIf",t.f.username.errors.required),P(),G("ngIf",t.f.username.errors.minlength),P(),G("ngIf",t.f.username.errors.pattern)}}function vW(n,e){if(n&1&&(A(0,"div",8)(1,"label",23),O(2,"Username"),S(),K(3,"input",24),Ee(4,mW,4,3,"div",11),S()),n&2){let t=te();P(3),G("ngClass",Ln(2,F0,t.submitted&&t.f.username.errors)),P(),G("ngIf",t.submitted&&t.f.username.errors)}}function yW(n,e){n&1&&(A(0,"div"),O(1," Password is required "),S())}function _W(n,e){n&1&&(A(0,"div"),O(1," Password must be at least 6 characters "),S())}function wW(n,e){n&1&&(A(0,"div"),O(1," Password must contain at least one letter and one number "),S())}function IW(n,e){n&1&&(A(0,"div"),O(1," Password must contain at least one letter, one number, and one special character "),S())}function EW(n,e){if(n&1&&(A(0,"div",21),Ee(1,yW,2,0,"div",22)(2,_W,2,0,"div",22)(3,wW,2,0,"div",22)(4,IW,2,0,"div",22),S()),n&2){let t=te();P(),G("ngIf",t.f.password.errors.required),P(),G("ngIf",t.f.password.errors.minlength),P(),G("ngIf",t.f.password.errors.pattern),P(),G("ngIf",t.f.password.errors.pattern)}}function bW(n,e){n&1&&K(0,"span",25)}function CW(n,e){if(n&1&&(A(0,"div",26),O(1),S()),n&2){let t=te();P(),ke(" ",t.error," ")}}var zg=class n{constructor(e,t,r){this.formBuilder=e;this.router=t;this.userService=r}auth=F(cr);userSubscription;authForm;isLoginMode=!0;loading=!1;submitted=!1;error="";ngOnInit(){console.log("LoginComponent initialized"),this.initForm(),this.userSubscription=this.userService.currentUser$.subscribe(e=>{e&&this.router.navigate(["/home"])})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}get f(){return this.authForm.controls}initForm(){this.authForm=this.formBuilder.group({email:["",[Je.required,Je.email]],password:["",[Je.required,Je.minLength(6),Je.pattern(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/)]],username:[""]}),this.updateFormValidators()}updateFormValidators(){let e=this.f.username;this.isLoginMode?e.clearValidators():e.setValidators([Je.required,Je.minLength(3),Je.pattern(/^[a-zA-Z0-9_-]*$/)]),e.updateValueAndValidity()}onSwitchMode(){this.isLoginMode=!this.isLoginMode,this.updateFormValidators(),this.error=""}onSubmit(){return y(this,null,function*(){if(this.submitted=!0,!this.authForm.invalid){this.loading=!0,this.error="";try{this.isLoginMode?yield this.login():yield this.signUp(),this.router.navigate(["/home"])}catch(e){this.error=this.getFirebaseErrorMessage(e)}finally{this.loading=!1}}})}login(){return y(this,null,function*(){let{email:e,password:t}=this.authForm.value,r=yield uN(this.auth,e,t);yield this.userService.updateLastLogin(r.user.uid)})}signUp(){return y(this,null,function*(){let{email:e,password:t,username:r}=this.authForm.value;console.log("Attempting to sign up with:",{email:e,username:r,passwordLength:t?.length||0});try{let i=yield sN(this.auth,e,t);console.log("Firebase auth user created:",i.user.uid);try{yield this.userService.createUserData(i.user,r),console.log("User data created in Firestore")}catch(o){throw console.error("Error creating user data:",o),yield i.user.delete(),new Error("Failed to create user profile")}}catch(i){throw console.error("Sign up error:",i),i}})}getFirebaseErrorMessage(e){switch(console.error("Firebase error details:",e),e.code){case"auth/email-already-in-use":return"Email is already in use.";case"auth/invalid-email":return"Email address is invalid.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled. Please contact support.";case"auth/weak-password":return"Password is too weak. It must be at least 6 characters.";case"auth/user-disabled":return"This account has been disabled.";case"auth/user-not-found":case"auth/wrong-password":return"Invalid email or password.";default:return`An unexpected error occurred (${e.code}). Please try again.`}}static \u0275fac=function(t){return new(t||n)(L(Hg),L(Ke),L(st))};static \u0275cmp=$e({type:n,selectors:[["app-login"]],decls:28,vars:16,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","shadow"],[1,"card-header","bg-primary","text-white","text-center","py-3"],[1,"mb-0"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["class","mb-3",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control",3,"ngClass"],[1,"d-grid","mb-3"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"text-center"],["href","javascript:void(0)",3,"click"],[1,"invalid-feedback"],[4,"ngIf"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username","placeholder","Choose a username",1,"form-control",3,"ngClass"],[1,"spinner-border","spinner-border-sm","me-2"],[1,"alert","alert-danger","mb-3"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),O(6),S()(),A(7,"div",6)(8,"form",7),ee("ngSubmit",function(){return r.onSubmit()}),A(9,"div",8)(10,"label",9),O(11,"Email"),S(),K(12,"input",10),Ee(13,hW,3,2,"div",11),S(),Ee(14,vW,5,4,"div",12),A(15,"div",8)(16,"label",13),O(17,"Password"),S(),K(18,"input",14),Ee(19,EW,5,4,"div",11),S(),A(20,"div",15)(21,"button",16),Ee(22,bW,1,0,"span",17),O(23),S()(),Ee(24,CW,2,1,"div",18),A(25,"div",19)(26,"a",20),ee("click",function(){return r.onSwitchMode()}),O(27),S()()()()()()()()),t&2&&(P(6),ze(r.isLoginMode?"Login":"Sign Up"),P(2),G("formGroup",r.authForm),P(4),G("ngClass",Ln(12,F0,r.submitted&&r.f.email.errors)),P(),G("ngIf",r.submitted&&r.f.email.errors),P(),G("ngIf",!r.isLoginMode),P(4),G("ngClass",Ln(14,F0,r.submitted&&r.f.password.errors)),P(),G("ngIf",r.submitted&&r.f.password.errors),P(2),G("disabled",r.loading),P(),G("ngIf",r.loading),P(),ke(" ",r.isLoginMode?"Login":"Sign Up"," "),P(),G("ngIf",r.error),P(3),ke(" ",r.isLoginMode?"Create new account":"Login with existing account"," "))},dependencies:[mt,R_,hi,vc,gc,Co,fc,pc,mc,Kl],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:10px}.card-header[_ngcontent-%COMP%]{background-color:#ffb6c1;color:#fff;border-radius:10px 10px 0 0}.card-header.bg-primary[_ngcontent-%COMP%]{background-color:#ffb6c1!important}.btn-primary[_ngcontent-%COMP%]{background-color:#ffb6c1;border-color:#ffb6c1;border-radius:10px;padding:10px;font-weight:500}.btn-primary[_ngcontent-%COMP%]:hover{filter:brightness(.9);border-color:gray}.form-control[_ngcontent-%COMP%]:focus{border-color:#86b7fe;box-shadow:0 0 0 .25rem #0d6efd40}a[_ngcontent-%COMP%]{color:#ffb6c1;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var L0=()=>y(void 0,null,function*(){let n=F(cr),e=F(Ke);return new Promise(t=>{let r=cN(n,i=>{r(),i?(console.log("Auth guard: User is authenticated"),t(!0)):(console.log("Auth guard: User is not authenticated"),e.navigate(["/login"]),t(!1))})})});var yc=class n{isExpandedSource=new Ve(!0);isExpanded$=this.isExpandedSource.asObservable();toggleSidebar(){this.isExpandedSource.next(!this.isExpandedSource.value)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function DW(n,e){if(n&1){let t=ut();A(0,"div",10)(1,"a",22),K(2,"img",23),A(3,"span"),O(4),S()(),A(5,"ul",24)(6,"li",25)(7,"div",26),K(8,"img",23),A(9,"span",27),O(10),S()()(),A(11,"li")(12,"a",28),ee("click",function(){Me(t);let i=te();return xe(i.navigateToProfile())}),K(13,"i",29),O(14," My Profile "),S()(),A(15,"li")(16,"a",30),K(17,"i",31),O(18," New Recipe "),S()(),A(19,"li"),K(20,"hr",32),S(),A(21,"li")(22,"a",33),K(23,"i",34),O(24," Saved Recipes "),S()(),A(25,"li")(26,"a",35),K(27,"i",36),O(28," Liked Recipes "),S()(),A(29,"li"),K(30,"hr",32),S(),A(31,"li")(32,"a",37),K(33,"i",38),O(34," About Us "),S()(),A(35,"li")(36,"a",39),K(37,"i",40),O(38," Contact Us "),S()(),A(39,"li")(40,"a",28),ee("click",function(){Me(t);let i=te();return xe(i.signOut())}),K(41,"i",41),O(42," Sign Out "),S()()()()}if(n&2){let t=te();P(2),G("src",t.getProfilePicture(),Tt)("alt",t.user.username+"'s profile picture"),P(2),ze(t.user.username),P(4),G("src",t.getProfilePicture(),Tt)("alt",t.user.username),P(2),ze(t.user.username)}}function TW(n,e){n&1&&(A(0,"div")(1,"a",42),K(2,"i",43),A(3,"span"),O(4,"Sign in"),S()()())}var _c=class n{constructor(e,t,r,i,o){this.navService=e;this.userService=t;this.router=r;this.firestore=i;this.filterService=o;this.searchControl.valueChanges.pipe(Xm(300)).subscribe(s=>{this.filterService.updateSearchTerm(s??"")})}user=null;userSubscription;searchControl=new Rs("");ngOnInit(){this.userSubscription=this.userService.currentUser$.subscribe(e=>{this.user=e})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}toggleNav(){this.navService.toggleSidebar()}onFilterDate(e){e.target.checked?this.filterService.updateFilterTermDate():this.filterService.resetFilterTerm()}onFilterCategory(e){e.target.checked?this.filterService.updateFilterTermCategory():this.filterService.resetFilterTerm()}getProfilePicture(){return this.userService.getProfilePicture(this.user)}signOut(){return y(this,null,function*(){yield this.userService.signOut()})}navigateToProfile(){this.user?.username&&this.router.navigate(["/profile",this.user.username])}static \u0275fac=function(t){return new(t||n)(L(yc),L(st),L(Ke),L(bt),L(ac))};static \u0275cmp=$e({type:n,selectors:[["app-search"]],decls:28,vars:3,consts:[[1,"search-header"],[1,"d-flex","align-items-center"],["type","button","aria-label","Toggle navigation",1,"btn","btn-outline-secondary","me-2",3,"click"],[1,"bi","bi-list"],["routerLink","/",1,"text-decoration-none","text-dark"],[1,"fw-bold","fs-5"],[1,"col-6"],["role","search",1,"d-flex"],[1,"searchContainer"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2","search-bar","container-contents",3,"formControl"],[1,"dropdown"],["type","button","id","filterDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle","container-contents"],[1,"bi","bi-funnel"],["aria-labelledby","filterDropdown",1,"dropdown-menu","dropdown-menu-end","p-3",2,"min-width","200px"],[1,"form-check"],["type","checkbox","value","","id","filter1",1,"form-check-input",3,"change"],["for","filter1",1,"form-check-label"],["type","checkbox","value","","id","filter2",1,"form-check-input",3,"change"],["for","filter2",1,"form-check-label"],[1,"profile"],["class","dropdown",4,"ngIf"],[4,"ngIf"],["role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","d-flex","align-items-center","gap-2"],[1,"profile-img",3,"src","alt"],[1,"dropdown-menu","dropdown-menu-end","profile-dropdown"],[1,"dropdown-header"],[1,"d-flex","align-items-center","gap-2","p-2"],[1,"fw-bold"],[1,"dropdown-item","d-flex","align-items-center","gap-2",3,"click"],[1,"bi","bi-person"],["routerLink","/new-recipe",1,"dropdown-item","d-flex","align-items-center","gap-2"],[1,"bi","bi-plus-square"],[1,"dropdown-divider"],["routerLink","/saved",1,"dropdown-item","d-flex","align-items-center","gap-2"],[1,"bi","bi-bookmark"],["routerLink","/liked",1,"dropdown-item","d-flex","align-items-center","gap-2"],[1,"bi","bi-heart"],["routerLink","/about-us",1,"dropdown-item","d-flex","align-items-center","gap-2"],[1,"bi","bi-card-text"],["routerLink","/contact-us",1,"dropdown-item","d-flex","align-items-center","gap-2"],[1,"bi","bi-envelope-paper"],[1,"bi","bi-box-arrow-right"],["routerLink","/login",1,"sign-in-btn","d-flex","align-items-center","gap-2"],[1,"bi","bi-person",2,"font-size","1.2rem"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"button",2),ee("click",function(){return r.toggleNav()}),K(3,"i",3),S(),A(4,"a",4)(5,"span",5),O(6,"DishDash"),S()()(),A(7,"div",6)(8,"form",7)(9,"div",8),K(10,"input",9),A(11,"div",10)(12,"button",11),K(13,"i",12),S(),A(14,"ul",13)(15,"li")(16,"div",14)(17,"input",15),ee("change",function(o){return r.onFilterDate(o)}),S(),A(18,"label",16),O(19,"Filter by Date"),S()()(),A(20,"li")(21,"div",14)(22,"input",17),ee("change",function(o){return r.onFilterCategory(o)}),S(),A(23,"label",18),O(24,"Filter by Category"),S()()()()()()()(),A(25,"div",19),Ee(26,DW,43,6,"div",20)(27,TW,5,0,"div",21),S()()),t&2&&(P(10),G("formControl",r.searchControl),P(16),G("ngIf",r.user),P(),G("ngIf",!r.user))},dependencies:[mt,hi,rn,Gt,vc,gc,Co,fc,pc,k0],styles:[".search-bar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.searchContainer[_ngcontent-%COMP%]{width:900px;background-color:#fff;display:flex;margin:auto;border-radius:8px;border:1px solid #efefef}.container-contents[_ngcontent-%COMP%]{border:none}.profile[_ngcontent-%COMP%]{display:flex;align-items:center}.profile-img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;object-fit:cover}.search-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:.5rem 1rem}.search-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.8}.profile-dropdown[_ngcontent-%COMP%]{width:250px;padding:8px 0}.dropdown-item[_ngcontent-%COMP%]{padding:8px 16px}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.dropdown-header[_ngcontent-%COMP%]{padding:0;border-bottom:none}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.dropdown-item[_ngcontent-%COMP%]   .bi-chevron-right[_ngcontent-%COMP%]{font-size:.8rem}.sign-in-btn[_ngcontent-%COMP%]{border:1.5px solid lightpink;color:#fff;background:#ffb6c1;border-radius:2rem;padding:.4rem 1.2rem;font-weight:500;font-size:1rem;transition:background .2s,color .2s,border .2s;display:inline-flex;align-items:center;gap:.5rem}.sign-in-btn[_ngcontent-%COMP%]:hover{background:#ffb6c1;color:#fff;border-color:#ffb6c1;text-decoration:none}.sign-in-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}"]})};var SW=n=>["/recipe",n],AW=(n,e)=>e.id;function RW(n,e){n&1&&(A(0,"div",0),O(1,"Loading profile..."),S())}function MW(n,e){if(n&1&&(A(0,"div",1),O(1),S()),n&2){let t=te();P(),ze(t.error)}}function xW(n,e){if(n&1){let t=ut();A(0,"div",8)(1,"label",14),K(2,"i",15),O(3," Upload New Profile Picture "),S(),A(4,"input",16),ee("change",function(i){Me(t);let o=te(2);return xe(o.onProfilePictureSelected(i))}),S()()}}function NW(n,e){if(n&1){let t=ut();A(0,"div",12)(1,"img",17),ee("error",function(i){Me(t);let o=te(2);return xe(o.handleImageError(i))}),S(),A(2,"div",18)(3,"h3",19),O(4),S(),A(5,"div",20)(6,"button",21),ee("click",function(i){let o=Me(t).$implicit,s=te(2);return xe(s.toggleLike(o,i))}),K(7,"i",22),O(8),S(),A(9,"button",21),ee("click",function(i){let o=Me(t).$implicit,s=te(2);return xe(s.toggleSave(o,i))}),K(10,"i",22),O(11),S()()()()}if(n&2){let t=e.$implicit,r=te(2);G("routerLink",Ln(18,SW,t.id)),P(),G("src",t.imageUrl||"https://placehold.co/600x400/png?text=Recipe",Tt)("alt",t.name),P(3),ze(t.name),P(2),He("active",r.isLiked(t)),P(),He("bi-heart-fill",r.isLiked(t))("bi-heart",!r.isLiked(t)),P(),ke(" ",t.likes," "),P(),He("active",r.isSaved(t)),P(),He("bi-bookmark-fill",r.isSaved(t))("bi-bookmark",!r.isSaved(t)),P(),ke(" ",t.saves," ")}}function PW(n,e){n&1&&(A(0,"div",13)(1,"p"),O(2,"No recipes created yet."),S()())}function kW(n,e){if(n&1&&(A(0,"div",2)(1,"div",3)(2,"div",4),K(3,"img",5),S(),A(4,"div",6)(5,"div",7)(6,"div")(7,"h2"),O(8),S(),A(9,"h5"),O(10),er(11,"date"),S(),Ee(12,xW,5,0,"div",8),S()()()(),A(13,"div",9)(14,"h2"),O(15,"Details"),S(),A(16,"p")(17,"strong"),O(18,"Account creation date:"),S(),O(19),er(20,"date"),S(),A(21,"p")(22,"strong"),O(23,"Recipes created:"),S(),O(24),S(),A(25,"p")(26,"strong"),O(27,"Recipes saved:"),S(),O(28),S(),A(29,"p")(30,"strong"),O(31,"Recipes liked:"),S(),O(32),S()(),A(33,"div",10)(34,"div",9)(35,"h2"),O(36,"Created Recipes"),S(),A(37,"div",11),Cr(38,NW,12,20,"div",12,AW,!1,PW,3,0,"div",13),S()()()()),n&2){let t=te();P(3),G("src",t.getProfilePicture(),Tt)("alt",t.profileUser.username+"'s profile picture"),P(5),ze(t.profileUser.username),P(2),ke("Last online: ",v_(11,10,t.getLastOnlineDate(),"longDate"),""),P(2),On(t.isOwnProfile?12:-1),P(7),ke(" ",v_(20,13,t.getCreatedAtDate(),"longDate")," "),P(5),ke(" ",t.recipesCreated,""),P(4),ke(" ",t.recipesSaved,""),P(4),ke(" ",t.recipesLiked,""),P(6),Dr(t.createdRecipes)}}var Ql=class n{constructor(e,t,r,i){this.route=e;this.router=t;this.userService=r;this.recipeService=i}profileUser=null;isOwnProfile=!1;loading=!0;error=null;recipesCreated=0;recipesSaved=0;recipesLiked=0;rating=5;routeSubscription;userSubscription;createdRecipes=[];ngOnInit(){this.userSubscription=this.userService.currentUser$.subscribe(e=>{this.profileUser&&(this.isOwnProfile=e?.uid===this.profileUser.uid)}),this.routeSubscription=this.route.paramMap.subscribe(e=>{let t=e.get("username");if(!t){this.error="No username provided",console.error("Error loading profile: No username provided"),this.router.navigate(["/home"]);return}this.loading=!0,this.userService.getUserByUsername(t).subscribe({next:r=>{if(!r){this.error="User not found",console.error("Error loading profile: User not found"),this.router.navigate(["/home"]);return}this.profileUser=r;let i=this.userService.getCurrentUser();this.isOwnProfile=i?.uid===r.uid,this.loadUserStats(),this.loadUserRecipes(r.uid)},error:r=>{console.error("Error loading profile:",r),this.error="Error loading profile",this.router.navigate(["/home"])},complete:()=>{this.loading=!1}})})}loadUserRecipes(e){this.recipeService.getCreatedRecipesByUserId(e).subscribe({next:t=>{this.createdRecipes=t},error:t=>{console.error("Error loading created recipes:",t)}})}loadUserStats(){return y(this,null,function*(){this.profileUser&&(this.recipesCreated=yield this.recipeService.getRecipeCountByUser(this.profileUser.uid),this.recipesSaved=this.profileUser.savedRecipes?.length||0,this.recipesLiked=this.profileUser.likedRecipes?.length||0)})}onProfilePictureSelected(e){return y(this,null,function*(){let t=e.target;if(!t.files||t.files.length===0)return;let r=t.files[0];this.loading=!0;try{let i=yield this.userService.uploadProfilePicture(r);this.profileUser&&(yield this.userService.updateProfilePicture(this.profileUser.uid,i),this.profileUser.profilePicture=i)}catch(i){console.error("Error updating profile picture:",i),this.error="Failed to update profile picture"}finally{this.loading=!1}})}getProfilePicture(){return this.userService.getProfilePicture(this.profileUser)}getCreatedAtDate(){return this.profileUser?.createdAt instanceof Xe?this.profileUser.createdAt.toDate():null}getLastOnlineDate(){return this.profileUser?.lastLogin instanceof Xe?this.profileUser.lastLogin.toDate():null}handleImageError(e){let t=e.target;t&&(t.src="https://placehold.co/600x400/png?text=Recipe")}toggleLike(e,t){return y(this,null,function*(){t.preventDefault(),t.stopPropagation(),this.userService.getCurrentUser()&&(yield this.recipeService.toggleLike(e))})}toggleSave(e,t){return y(this,null,function*(){t.preventDefault(),t.stopPropagation(),this.userService.getCurrentUser()&&(yield this.recipeService.toggleSave(e))})}isLiked(e){return this.recipeService.isLikedByUser(e)}isSaved(e){return this.recipeService.isSavedByUser(e)}ngOnDestroy(){this.routeSubscription?.unsubscribe(),this.userSubscription?.unsubscribe()}static \u0275fac=function(t){return new(t||n)(L(qt),L(Ke),L(st),L(yn))};static \u0275cmp=$e({type:n,selectors:[["app-user-profile"]],decls:3,vars:1,consts:[[1,"loading"],[1,"error"],[1,"profile-container"],[1,"profile-header"],[1,"profile-pic-container"],[1,"profile-pic",3,"src","alt"],[1,"info-box"],[1,"rating"],[1,"profile-actions"],[1,"details-box"],[1,"recipe-section"],[1,"recipe-grid"],["role","button",1,"recipe-card",3,"routerLink"],[1,"no-recipes"],["for","profile-pic-upload",1,"upload-btn"],[1,"bi","bi-camera"],["id","profile-pic-upload","type","file","accept","image/*",2,"display","none",3,"change"],[1,"recipe-image",3,"error","src","alt"],[1,"recipe-info"],[1,"recipe-title"],[1,"recipe-stats"],[1,"stat-btn",3,"click"],[1,"bi"]],template:function(t,r){t&1&&Ee(0,RW,2,0,"div",0)(1,MW,2,1,"div",1)(2,kW,41,16,"div",2),t&2&&On(r.loading?0:r.error?1:r.profileUser?2:-1)},dependencies:[mt,M_,Gt],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;max-width:1000px;margin:auto;padding:2rem;font-family:Arial,serif}h2[_ngcontent-%COMP%]{margin-bottom:1rem;font-family:Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif;color:#333}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem}.profile-pic-container[_ngcontent-%COMP%]{position:relative;width:180px;height:180px}.profile-pic[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;filter:drop-shadow(0 0 .25rem black)}.rating[_ngcontent-%COMP%]{font-size:3.25rem;color:#000}.info-box[_ngcontent-%COMP%]{flex:1;padding:1rem;border-radius:12px;box-shadow:0 2px 8px #0000001a}.details-box[_ngcontent-%COMP%]{padding:1rem;background-color:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.recipe-section[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:space-between;flex-wrap:wrap}.recipe-box[_ngcontent-%COMP%]{flex:1;min-width:280px;padding:1rem;background-color:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#666;font-size:1.1rem}.error[_ngcontent-%COMP%]{color:#dc3545}.badge[_ngcontent-%COMP%]{margin-left:1rem;vertical-align:middle}.change-pic-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.profile-pic-container[_ngcontent-%COMP%]:hover   .change-pic-overlay[_ngcontent-%COMP%]{opacity:1}.change-pic-btn[_ngcontent-%COMP%]{color:#fff;background:#000000b3;padding:8px 16px;border-radius:20px;cursor:pointer;font-size:14px;transition:background .3s ease}.change-pic-btn[_ngcontent-%COMP%]:hover{background:#000000e6}.recipe-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-top:20px}.recipe-card[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;box-shadow:0 4px 6px #0000001a;transition:transform .2s ease;cursor:pointer;display:flex;flex-direction:column}.recipe-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.recipe-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:16/9;object-fit:cover}.recipe-info[_ngcontent-%COMP%]{padding:15px;background:#fff;flex-grow:1;display:flex;flex-direction:column}.recipe-title[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.2rem;color:#333}.recipe-stats[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:auto}.stat-btn[_ngcontent-%COMP%]{background:none;border:none;color:#666;font-size:1rem;display:flex;align-items:center;gap:5px;cursor:pointer;transition:color .2s ease}.stat-btn[_ngcontent-%COMP%]:hover, .stat-btn.active[_ngcontent-%COMP%]{color:#ff4081}.no-recipes[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666}.profile-actions[_ngcontent-%COMP%]{margin-top:1rem}.upload-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background-color:#ffb6c1;color:#fff;border-radius:4px;cursor:pointer;transition:background-color .2s ease;font-size:.9rem}.upload-btn[_ngcontent-%COMP%]:hover{filter:brightness(.9)}.upload-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.btn-primary[_ngcontent-%COMP%]{background-color:#ffb6c1;border-color:#ffb6c1;border-radius:10px;padding:10px;font-weight:500}"]})};var OW=()=>({standalone:!0});function FW(n,e){n&1&&(A(0,"h2"),O(1,"Create New Recipe"),S())}function LW(n,e){n&1&&(A(0,"h2"),O(1,"Edit Recipe"),S())}function VW(n,e){if(n&1){let t=ut();A(0,"span",23),O(1),A(2,"button",24),ee("click",function(){let i=Me(t).$implicit,o=te();return xe(o.removeTag(i))}),S()()}if(n&2){let t=e.$implicit;P(),ke(" ",t," ")}}function UW(n,e){if(n&1){let t=ut();A(0,"div",25)(1,"div",26),K(2,"input",27),S(),A(3,"div",28),K(4,"input",29),S(),A(5,"div",28),K(6,"input",30),S(),A(7,"div",31)(8,"button",32),ee("click",function(){let i=Me(t).index,o=te();return xe(o.removeIngredient(i))}),O(9,"\xD7"),S()()()}if(n&2){let t=e.index;G("formGroupName",t)}}function jW(n,e){if(n&1){let t=ut();A(0,"div",33)(1,"div",34)(2,"div",11)(3,"span",35),O(4),S(),K(5,"textarea",36),S()(),A(6,"div",31)(7,"button",32),ee("click",function(){let i=Me(t).index,o=te();return xe(o.removeDirection(i))}),O(8,"\xD7"),S()()()}if(n&2){let t=e.index;P(4),ke("Step ",t+1,""),P(),G("formControlName",t)}}function BW(n,e){n&1&&K(0,"span",37)}var Yl=class n{constructor(e,t,r,i,o,s,a,u){this.fb=e;this.firestore=t;this.storage=r;this.userService=i;this.recipeService=o;this.router=s;this.route=a;this.firebaseService=u;this.recipeForm=this.fb.group({name:["",Je.required],description:["",Je.required],image:[""],ingredients:this.fb.array([]),directions:this.fb.array([])})}recipeForm;tags=[];tagInput="";imageFile=null;loading=!1;editMode=!1;recipeId=null;originalImageUrl="";ngOnInit(){this.route.params.subscribe(e=>y(this,null,function*(){let t=e.id;t&&(this.editMode=!0,this.recipeId=t,yield this.loadRecipeForEdit(t))}))}loadRecipeForEdit(e){return y(this,null,function*(){this.loading=!0;try{let t=yield this.firebaseService.getRecipeById(e);if(!t){alert("Recipe not found"),this.router.navigate(["/home"]);return}let r=this.userService.getCurrentUser();if(!r||t.userId!==r.uid){alert("You are not authorized to edit this recipe."),this.router.navigate(["/home"]);return}this.recipeForm.patchValue({name:t.name,description:t.description,image:t.imageUrl||""}),this.tags=t.tags||[],this.originalImageUrl=t.imageUrl||"",this.ingredients.clear(),(t.ingredients||[]).forEach(i=>{this.ingredients.push(this.fb.group({name:[i.name,Je.required],quantity:[i.quantity,[Je.required,Je.min(0)]],unit:[i.unit,Je.required]}))}),this.directions.clear(),(t.directions||[]).forEach(i=>{this.directions.push(this.fb.control(i,Je.required))})}catch{alert("Failed to load recipe for editing."),this.router.navigate(["/home"])}finally{this.loading=!1}})}get ingredients(){return this.recipeForm.get("ingredients")}get directions(){return this.recipeForm.get("directions")}addIngredient(){let e=this.fb.group({name:["",Je.required],quantity:["",[Je.required,Je.min(0)]],unit:["",Je.required]});this.ingredients.push(e)}removeIngredient(e){this.ingredients.removeAt(e)}addDirection(){this.directions.push(this.fb.control("",Je.required))}removeDirection(e){this.directions.removeAt(e)}addTag(){this.tagInput.trim()&&!this.tags.includes(this.tagInput.trim())&&(this.tags.push(this.tagInput.trim()),this.tagInput="")}removeTag(e){this.tags=this.tags.filter(t=>t!==e)}onImageSelected(e){let t=e.target.files;t.length>0&&(this.imageFile=t[0])}uploadImage(e){return y(this,null,function*(){let t=NO(this.storage,`recipe-images/${Date.now()}_${e.name}`),r=yield PO(t,e);return yield MO(r.ref)})}onSubmit(){return y(this,null,function*(){if(this.recipeForm.invalid)return;this.loading=!0;let e=this.userService.getCurrentUser();if(!e){alert("You must be logged in to create a recipe");return}try{let t=this.originalImageUrl;if(this.imageFile&&(t=yield this.uploadImage(this.imageFile)),this.editMode&&this.recipeId){let r=xt(this.firestore,"recipes",this.recipeId);yield Gr(r,{name:this.recipeForm.value.name,description:this.recipeForm.value.description,imageUrl:t,tags:this.tags,ingredients:this.recipeForm.value.ingredients,directions:this.recipeForm.value.directions}),alert("Recipe updated successfully!"),this.router.navigate(["/recipe",this.recipeId])}else{let r={userId:e.uid,name:this.recipeForm.value.name,description:this.recipeForm.value.description,imageUrl:t,tags:this.tags,ingredients:this.recipeForm.value.ingredients,directions:this.recipeForm.value.directions,createdAt:new Date,likes:0,saves:0,likedBy:[],savedBy:[]},i=mn(this.firestore,"recipes");yield eO(i,r),alert("Recipe created successfully!"),this.router.navigate(["/home"])}}catch(t){console.error("Error saving recipe:",t),alert("Failed to save recipe. Please try again.")}finally{this.loading=!1}})}static \u0275fac=function(t){return new(t||n)(L(Hg),L(bt),L(As),L(st),L(yn),L(Ke),L(qt),L(Kr))};static \u0275cmp=$e({type:n,selectors:[["app-recipe-form"]],decls:43,vars:12,consts:[[1,"container","mt-4"],[4,"ngIf"],[1,"mt-4",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","description",1,"form-label"],["id","description","rows","3","formControlName","description",1,"form-control"],["for","image",1,"form-label"],["type","file","id","image","accept","image/*",1,"form-control",3,"change"],[1,"form-label"],[1,"input-group"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","ngModel","ngModelOptions"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"mt-2"],["class","badge bg-secondary me-2",4,"ngFor","ngForOf"],["formArrayName","ingredients"],["class","row g-3 mb-2",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-primary","mt-2",3,"click"],["formArrayName","directions"],["class","row g-3 mb-2",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"badge","bg-secondary","me-2"],["type","button","aria-label","Close",1,"btn-close","btn-close-white",3,"click"],[1,"row","g-3","mb-2",3,"formGroupName"],[1,"col-5"],["type","text","placeholder","Ingredient name","formControlName","name",1,"form-control"],[1,"col-3"],["type","number","placeholder","Quantity","formControlName","quantity",1,"form-control"],["type","text","placeholder","Unit","formControlName","unit",1,"form-control"],[1,"col-1"],["type","button",1,"btn","btn-danger",3,"click"],[1,"row","g-3","mb-2"],[1,"col-11"],[1,"input-group-text"],["rows","2",1,"form-control",3,"formControlName"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,r){t&1&&(A(0,"div",0),Ee(1,FW,2,0,"h2",1)(2,LW,2,0,"h2",1),A(3,"form",2),ee("ngSubmit",function(){return r.onSubmit()}),A(4,"div",3)(5,"label",4),O(6,"Recipe Name"),S(),K(7,"input",5),S(),A(8,"div",3)(9,"label",6),O(10,"Description"),S(),K(11,"textarea",7),S(),A(12,"div",3)(13,"label",8),O(14,"Recipe Image"),S(),A(15,"input",9),ee("change",function(o){return r.onImageSelected(o)}),S()(),A(16,"div",3)(17,"label",10),O(18,"Tags"),S(),A(19,"div",11)(20,"input",12),m_("ngModelChange",function(o){return OA(r.tagInput,o)||(r.tagInput=o),o}),ee("keyup.enter",function(){return r.addTag()}),S(),A(21,"button",13),ee("click",function(){return r.addTag()}),O(22,"Add"),S()(),A(23,"div",14),Ee(24,VW,3,1,"span",15),S()(),A(25,"div",3)(26,"label",10),O(27,"Ingredients"),S(),A(28,"div",16),Ee(29,UW,10,1,"div",17),S(),A(30,"button",18),ee("click",function(){return r.addIngredient()}),O(31," Add Ingredient "),S()(),A(32,"div",3)(33,"label",10),O(34,"Directions"),S(),A(35,"div",19),Ee(36,jW,9,2,"div",20),S(),A(37,"button",18),ee("click",function(){return r.addDirection()}),O(38," Add Step "),S()(),A(39,"div",3)(40,"button",21),Ee(41,BW,1,0,"span",22),O(42),S()()()()),t&2&&(P(),G("ngIf",!r.editMode),P(),G("ngIf",r.editMode),P(),G("formGroup",r.recipeForm),P(17),g_("ngModel",r.tagInput),G("ngModelOptions",Hh(11,OW)),P(4),G("ngForOf",r.tags),P(5),G("ngForOf",r.ingredients.controls),P(7),G("ngForOf",r.directions.controls),P(4),G("disabled",!r.recipeForm.valid||r.loading),P(),G("ngIf",r.loading),P(),ke(" ",r.loading?r.editMode?"Updating Recipe...":"Creating Recipe...":r.editMode?"Update Recipe":"Create Recipe"," "))},dependencies:[mt,ga,hi,u1,gc,Co,N0,fc,pc,x0,vc,mc,Kl,Bg,$g,rn],styles:[".badge[_ngcontent-%COMP%]{padding:8px;margin-right:5px;margin-bottom:5px}.badge[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{margin-left:5px;font-size:.5rem}.btn-danger[_ngcontent-%COMP%]{padding:.375rem .75rem}textarea[_ngcontent-%COMP%]{resize:vertical}.btn-outline-primary[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:10px;font-weight:500;border-color:#db7093;color:#db7093}.btn-primary[_ngcontent-%COMP%]{background-color:#ffb6c1;border-color:#ffb6c1;border-radius:10px;padding:10px;font-weight:500}.btn[_ngcontent-%COMP%]:hover{filter:brightness(.9);border-color:gray}"]})};var $W=n=>["/recipe",n],HW=(n,e)=>e.id;function zW(n,e){n&1&&(A(0,"div",1)(1,"p"),O(2,"Loading saved recipes..."),S()())}function qW(n,e){if(n&1){let t=ut();A(0,"div",3)(1,"img",5),ee("error",function(i){Me(t);let o=te(2);return xe(o.handleImageError(i))}),S(),A(2,"div",6)(3,"h3",7),O(4),S(),A(5,"div",8)(6,"button",9),ee("click",function(i){let o=Me(t).$implicit,s=te(2);return xe(s.toggleLike(o,i))}),K(7,"i",10),O(8),S(),A(9,"button",9),ee("click",function(i){let o=Me(t).$implicit,s=te(2);return xe(s.toggleSave(o,i))}),K(10,"i",10),O(11),S()()()()}if(n&2){let t=e.$implicit,r=te(2);G("routerLink",Ln(18,$W,t.id)),P(),G("src",t.imageUrl,Tt)("alt",t.name),P(3),ze(t.name),P(2),He("active",r.isLiked(t)),P(),He("bi-heart-fill",r.isLiked(t))("bi-heart",!r.isLiked(t)),P(),ke(" ",t.likes," "),P(),He("active",r.isSaved(t)),P(),He("bi-bookmark-fill",r.isSaved(t))("bi-bookmark",!r.isSaved(t)),P(),ke(" ",t.saves," ")}}function GW(n,e){n&1&&(A(0,"div",4)(1,"p"),O(2,"No saved recipes yet. Browse recipes and save your favorites!"),S()())}function WW(n,e){if(n&1&&(A(0,"div",2),Cr(1,qW,12,20,"div",3,HW,!1,GW,3,0,"div",4),er(4,"async"),S()),n&2){let t=te();P(),Dr(Ki(4,1,t.savedRecipes$))}}var qg=class n{constructor(e,t){this.recipeService=e;this.userService=t;this.savedRecipes$=this.recipeService.savedRecipes$}savedRecipes$;loading=!0;error=null;userSubscription;recipes=[];ngOnInit(){return y(this,null,function*(){this.userSubscription=this.userService.currentUser$.subscribe(e=>y(this,null,function*(){e?yield this.loadData():this.loading=!1}))})}loadData(){return y(this,null,function*(){try{this.loading=!0,this.error=null,yield this.recipeService.loadSavedRecipes()}catch(e){console.error("Error loading saved recipes:",e),this.error="Failed to load saved recipes"}finally{this.loading=!1}})}handleImageError(e){let t=e.target;t&&(t.src="https://placehold.co/600x400/png?text=Recipe")}toggleLike(e,t){return y(this,null,function*(){t.preventDefault(),t.stopPropagation(),yield this.recipeService.toggleLike(e)})}toggleSave(e,t){return y(this,null,function*(){t.preventDefault(),t.stopPropagation(),yield this.recipeService.toggleSave(e),yield this.loadData()})}isLiked(e){return this.recipeService.isLikedByUser(e)}isSaved(e){return this.recipeService.isSavedByUser(e)}ngOnDestroy(){this.userSubscription?.unsubscribe()}static \u0275fac=function(t){return new(t||n)(L(yn),L(st))};static \u0275cmp=$e({type:n,selectors:[["app-saved-recipe"]],inputs:{recipes:"recipes"},decls:5,vars:1,consts:[[1,"saved-recipes-container"],[1,"loading"],[1,"recipe-grid"],["role","button",1,"recipe-card",3,"routerLink"],[1,"no-recipes"],[1,"recipe-image",3,"error","src","alt"],[1,"recipe-info"],[1,"recipe-title"],[1,"recipe-stats"],[1,"stat-btn",3,"click"],[1,"bi"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"h2"),O(2,"Saved Recipes"),S(),Ee(3,zW,3,0,"div",1)(4,WW,5,3,"div",2),S()),t&2&&(P(3),On(r.loading?3:4))},dependencies:[mt,fi,rn,Gt],styles:[".saved-recipes-container[_ngcontent-%COMP%]{padding:2rem;max-width:1800px;margin:0 auto}h2[_ngcontent-%COMP%]{margin-bottom:2rem;font-family:Playfair Display,serif;color:#333}.recipe-grid[_ngcontent-%COMP%]{columns:3;column-gap:2rem;width:100%}.recipe-card[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:2rem;position:relative;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px #0000001a;transition:transform .2s ease;display:inline-block;width:100%;cursor:pointer}.recipe-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.recipe-image[_ngcontent-%COMP%]{width:100%;display:block;object-fit:cover}.recipe-info[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:1.5rem;background:linear-gradient(transparent,#000c)}.recipe-title[_ngcontent-%COMP%]{color:#fff;margin:0 0 .75rem;font-size:1.5rem}.recipe-stats[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.stat-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ccc;font-size:1.1rem;display:flex;align-items:center;gap:.5rem;padding:.5rem;cursor:pointer;transition:all .2s ease}.stat-btn[_ngcontent-%COMP%]:hover{color:#fff;transform:scale(1.1)}.stat-btn.active[_ngcontent-%COMP%]{color:#ff4081}.stat-btn.active.bi-bookmark-fill[_ngcontent-%COMP%], button.stat-btn[_ngcontent-%COMP%]:has(.bi-bookmark-fill).active{color:#ffc107}.stat-btn.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop .3s ease}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}.no-recipes[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#666;font-size:1.1rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#666}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}@media (max-width: 1200px){.recipe-grid[_ngcontent-%COMP%]{columns:2}}@media (max-width: 768px){.recipe-grid[_ngcontent-%COMP%]{columns:1}}"]})};var KW=n=>["/recipe",n],QW=(n,e)=>e.id;function YW(n,e){n&1&&(A(0,"div",0),O(1,"Loading liked recipes..."),S())}function ZW(n,e){if(n&1&&(A(0,"div",1),O(1),S()),n&2){let t=te();P(),ze(t.error)}}function JW(n,e){if(n&1){let t=ut();A(0,"div",3)(1,"img",5),ee("error",function(i){Me(t);let o=te(2);return xe(o.handleImageError(i))}),S(),A(2,"div",6)(3,"h3",7),O(4),S(),A(5,"div",8)(6,"button",9),ee("click",function(i){let o=Me(t).$implicit,s=te(2);return xe(s.toggleLike(o,i))}),K(7,"i",10),O(8),S(),A(9,"button",9),ee("click",function(i){let o=Me(t).$implicit,s=te(2);return xe(s.toggleSave(o,i))}),K(10,"i",10),O(11),S()()()()}if(n&2){let t=e.$implicit,r=te(2);G("routerLink",Ln(18,KW,t.id)),P(),G("src",t.imageUrl||"https://placehold.co/600x400/png?text=Recipe",Tt)("alt",t.name),P(3),ze(t.name),P(2),He("active",r.isLiked(t)),P(),He("bi-heart-fill",r.isLiked(t))("bi-heart",!r.isLiked(t)),P(),ke(" ",t.likes," "),P(),He("active",r.isSaved(t)),P(),He("bi-bookmark-fill",r.isSaved(t))("bi-bookmark",!r.isSaved(t)),P(),ke(" ",t.saves," ")}}function XW(n,e){n&1&&(A(0,"div",4)(1,"p"),O(2,"No liked recipes yet."),S()())}function e8(n,e){if(n&1&&(A(0,"div",2),Cr(1,JW,12,20,"div",3,QW,!1,XW,3,0,"div",4),er(4,"async"),S()),n&2){let t=te();P(),Dr(Ki(4,1,t.likedRecipes$))}}var Gg=class n{constructor(e,t){this.recipeService=e;this.userService=t;this.likedRecipes$=this.recipeService.likedRecipes$}likedRecipes$;loading=!0;error=null;userSubscription;recipes=[];ngOnInit(){return y(this,null,function*(){this.userSubscription=this.userService.currentUser$.subscribe(e=>y(this,null,function*(){e?yield this.loadData():this.loading=!1}))})}loadData(){return y(this,null,function*(){try{this.loading=!0,this.error=null,yield this.recipeService.loadLikedRecipes()}catch(e){console.error("Error loading liked recipes:",e),this.error="Failed to load liked recipes"}finally{this.loading=!1}})}handleImageError(e){let t=e.target;t&&(t.src="https://placehold.co/600x400/png?text=Recipe")}toggleLike(e,t){return y(this,null,function*(){t.preventDefault(),t.stopPropagation(),yield this.recipeService.toggleLike(e),yield this.loadData()})}toggleSave(e,t){return y(this,null,function*(){t.preventDefault(),t.stopPropagation(),yield this.recipeService.toggleSave(e)})}isLiked(e){return this.recipeService.isLikedByUser(e)}isSaved(e){return this.recipeService.isSavedByUser(e)}ngOnDestroy(){this.userSubscription?.unsubscribe()}static \u0275fac=function(t){return new(t||n)(L(yn),L(st))};static \u0275cmp=$e({type:n,selectors:[["app-liked-recipe"]],inputs:{recipes:"recipes"},decls:3,vars:1,consts:[[1,"loading"],[1,"error"],[1,"recipe-grid"],["role","button",1,"recipe-card",3,"routerLink"],[1,"no-recipes"],[1,"recipe-image",3,"error","src","alt"],[1,"recipe-info"],[1,"recipe-title"],[1,"recipe-stats"],[1,"stat-btn",3,"click"],[1,"bi"]],template:function(t,r){t&1&&Ee(0,YW,2,0,"div",0)(1,ZW,2,1,"div",1)(2,e8,5,3,"div",2),t&2&&On(r.loading?0:r.error?1:2)},dependencies:[mt,fi,rn,Gt],styles:[".liked-recipes-container[_ngcontent-%COMP%]{padding:2rem;max-width:1800px;margin:0 auto}h2[_ngcontent-%COMP%]{margin-bottom:2rem;font-family:Playfair Display,serif;color:#333}.recipe-grid[_ngcontent-%COMP%]{columns:3;column-gap:2rem;width:100%}.recipe-card[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:2rem;position:relative;border-radius:12px;overflow:hidden;box-shadow:0 4px 6px #0000001a;transition:transform .2s ease;display:inline-block;width:100%;cursor:pointer}.recipe-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.recipe-image[_ngcontent-%COMP%]{width:100%;display:block;object-fit:cover}.recipe-info[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:1.5rem;background:linear-gradient(transparent,#000c)}.recipe-title[_ngcontent-%COMP%]{color:#fff;margin:0 0 .75rem;font-size:1.5rem}.recipe-stats[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.stat-btn[_ngcontent-%COMP%]{background:none;border:none;color:#ccc;font-size:1.1rem;display:flex;align-items:center;gap:.5rem;padding:.5rem;cursor:pointer;transition:all .2s ease}.stat-btn[_ngcontent-%COMP%]:hover{color:#fff;transform:scale(1.1)}.stat-btn.active[_ngcontent-%COMP%]{color:#ff4081}.stat-btn.active.bi-bookmark-fill[_ngcontent-%COMP%], button.stat-btn[_ngcontent-%COMP%]:has(.bi-bookmark-fill).active{color:#ffc107}.stat-btn.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pop .3s ease}@keyframes _ngcontent-%COMP%_pop{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}.no-recipes[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#666;font-size:1.1rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#666}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}@media (max-width: 1200px){.recipe-grid[_ngcontent-%COMP%]{columns:2}}@media (max-width: 768px){.recipe-grid[_ngcontent-%COMP%]{columns:1}}"]})};var Wg=class n{submit(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-contact-us"]],decls:16,vars:0,consts:[[1,"container","py-5"],[1,"mb-3"],["for","subject",1,"form-label"],["id","subject","placeholder","Short summary...",1,"form-control"],["for","message",1,"form-label"],["id","message","rows","5","placeholder","Describe your issue or suggestion...",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"h2"),O(2,"Contact DishDash (Us!)"),S(),A(3,"p"),O(4,"Need help? Submit feedback or report a bug below."),S(),A(5,"form")(6,"div",1)(7,"label",2),O(8,"Subject"),S(),K(9,"input",3),S(),A(10,"div",1)(11,"label",4),O(12,"Message"),S(),K(13,"textarea",5),S(),A(14,"button",6),ee("click",function(){return r.submit()}),O(15,"Submit"),S()()())},styles:[".btn-primary[_ngcontent-%COMP%]{background-color:#ffb6c1;border-color:#ffb6c1;border-radius:10px;padding:10px;font-weight:500}"]})};var Kg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-about-us"]],decls:9,vars:0,consts:[[1,"container","py-5"],[1,"about-container"],["src","chef.jpg",1,"img-fluid","rounded","mt-4",2,"max-height","350px","object-fit","cover","width","100%"]],template:function(t,r){t&1&&(A(0,"div",0)(1,"div",1)(2,"h1"),O(3,"About Us"),S(),A(4,"p"),O(5," We are a team of passionate students on a mission to make recipes great again! Our goal is to make sharing and using recipes with friends simple, joyful, and fun. "),S(),A(6,"p"),O(7," We strive to inspire chefs across the world and improve the cooking experience for everyone\u2014from home cooks to culinary pros. "),S(),K(8,"img",2),S()())},styles:[".about-container[_ngcontent-%COMP%]{max-width:800px;margin:auto;background-color:#fff5f8;padding:2rem;border-radius:16px;box-shadow:0 10px 20px #0000000d;text-align:center;transition:all .3s ease}.about-container[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 24px #0000001a}.about-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:1rem}.about-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.7;color:#333}"]})};var d1=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:Tg},{path:"login",component:zg},{path:"search",component:_c},{path:"saved",component:qg},{path:"liked",component:Gg},{path:"user-profile",component:Ql},{path:"contact-us",component:Wg},{path:"about-us",component:Kg},{path:"profile/:username",component:Ql},{path:"new-recipe",component:Yl},{path:"recipe/:id",component:Sg,canActivate:[L0]},{path:"edit-recipe/:id",component:Yl,canActivate:[L0]},{path:"**",redirectTo:"home"}];var h1={providers:[XM(()=>ex(kO)),oN(()=>aN()),Xk(()=>rO()),RO(()=>xO()),HA({eventCoalescing:!0}),mw(d1),Kr]};var t8=()=>({exact:!0});function n8(n,e){if(n&1&&(A(0,"li",2)(1,"a",4),K(2,"i"),A(3,"span"),O(4),S()()()),n&2){let t=e.$implicit;P(),G("routerLink",t.route)("routerLinkActiveOptions",Hh(5,t8)),P(),CA(t.icon),P(2),ze(t.label)}}function r8(n,e){if(n&1){let t=ut();A(0,"div")(1,"a",5),ee("click",function(){Me(t);let i=te();return xe(i.navigateToProfile())}),K(2,"img",6),A(3,"span"),O(4),S()()()}if(n&2){let t=te();P(2),G("src",t.getProfilePicture(),Tt)("alt",t.user.username+"'s profile picture"),P(2),ze(t.user.username)}}var Qg=class n{constructor(e,t,r){this.userService=e;this.navService=t;this.router=r;this.isExpanded$=this.navService.isExpanded$}user=null;userSubscription;isExpanded$;navItems=[{icon:"bi bi-house",label:"Home",route:"/home"},{icon:"bi bi-bookmark",label:"Saved",route:"/saved"},{icon:"bi bi-heart",label:"Liked",route:"/liked"},{icon:"bi bi-plus-square",label:"New",route:"/new-recipe"}];ngOnInit(){this.userSubscription=this.userService.currentUser$.subscribe(e=>{this.user=e})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe()}getProfilePicture(){return this.userService.getProfilePicture(this.user)}navigateToProfile(){this.user?.username&&this.router.navigate(["/profile",this.user.username])}static \u0275fac=function(t){return new(t||n)(L(st),L(yc),L(Ke))};static \u0275cmp=$e({type:n,selectors:[["app-navbar"]],decls:7,vars:5,consts:[[1,"d-flex","flex-column","align-items-center","p-3","border-end","sidebar"],[1,"nav","nav-pills","flex-column","w-100"],[1,"nav-item","mb-3"],[1,"profile"],["routerLinkActive","active",1,"nav-link","d-flex","align-items-center","gap-3","text-dark",3,"routerLink","routerLinkActiveOptions"],[1,"nav-link","d-flex","align-items-center","gap-3","text-dark",2,"cursor","pointer",3,"click"],[1,"profile-img",3,"src","alt"]],template:function(t,r){t&1&&(A(0,"div",0),er(1,"async"),A(2,"ul",1),Cr(3,n8,5,6,"li",2,RA),S(),A(5,"div",3),Ee(6,r8,5,3,"div"),S()()),t&2&&(He("collapsed",!Ki(1,3,r.isExpanded$)),P(3),Dr(r.navItems),P(3),On(r.user?6:-1))},dependencies:[mt,fi,rn,Gt,gw],styles:[".sidebar[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 56px);position:relative}.sidebar.collapsed[_ngcontent-%COMP%]{width:80px}.sidebar.collapsed[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.sidebar.collapsed[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{display:flex;justify-content:center}.sidebar.collapsed[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:0;justify-content:center}.sidebar[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{flex-grow:1}.sidebar[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{margin-top:auto;padding-bottom:1rem;width:100%}.sidebar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{position:absolute;right:-40px;top:10px;background:none;border:none;padding:8px;cursor:pointer;background-color:#f8f9fa;border-radius:50%;width:35px;height:35px;display:flex;align-items:center;justify-content:center;transition:transform .3s ease}.sidebar[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1rem;padding:.75rem 1rem;transition:all .2s ease;border-radius:8px;white-space:nowrap;display:flex;align-items:center;gap:.5rem;color:#666}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{background-color:#f2f2f2;color:#333}.sidebar[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:hover{background-color:#ffb6c1;color:#fff}.profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:30px;min-height:30px;width:30px;height:30px;object-fit:cover;border-radius:50%;flex-shrink:0}"]})};var Yg=class n{title="DishDash";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"main"],[1,"search-container"],[1,"content"],[1,"side-nav"],[1,"main-content"]],template:function(t,r){t&1&&(A(0,"main",0)(1,"div",1),K(2,"app-search"),S(),A(3,"div",2)(4,"div",3),K(5,"app-navbar"),S(),A(6,"div",4),K(7,"router-outlet"),S()()())},dependencies:[$u,Qg,_c],styles:[".main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.search-container[_ngcontent-%COMP%]{width:100%;padding:1rem;background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.side-nav[_ngcontent-%COMP%]{height:100%;border-right:1px solid #dee2e6}.main-content[_ngcontent-%COMP%]{flex:1;padding:1rem;overflow-y:auto}.nav-link[_ngcontent-%COMP%]{color:#666;text-decoration:none;padding:.5rem 1rem;border-radius:4px;transition:all .2s ease}.nav-link[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;color:#333}.nav-link.active[_ngcontent-%COMP%], .nav-link.active[_ngcontent-%COMP%]:hover{background-color:#ffb6c1;color:#fff}.upload-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background-color:#ffb6c1;color:#fff;border-radius:4px;cursor:pointer;transition:background-color .2s ease;font-size:.9rem}.upload-btn[_ngcontent-%COMP%]:hover{background-color:#ffb6c1}"]})};B_(Yg,h1).catch(n=>console.error(n));
